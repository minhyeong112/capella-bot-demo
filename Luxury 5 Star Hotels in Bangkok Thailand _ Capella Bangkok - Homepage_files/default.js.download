(()=>{var zu=Object.create;var yt=Object.defineProperty,Wu=Object.defineProperties,Va=Object.getOwnPropertyDescriptor,Vu=Object.getOwnPropertyDescriptors,Ju=Object.getOwnPropertyNames,an=Object.getOwnPropertySymbols,Yu=Object.getPrototypeOf,xs=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable;var Ya=(r,e,t)=>e in r?yt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e)=>{for(var t in e||(e={}))xs.call(e,t)&&Ya(r,t,e[t]);if(an)for(var t of an(e))Ja.call(e,t)&&Ya(r,t,e[t]);return r},T=(r,e)=>Wu(r,Vu(e)),Zu=r=>yt(r,"__esModule",{value:!0}),s=(r,e)=>yt(r,"name",{value:e,configurable:!0});var gt=(r,e)=>{var t={};for(var n in r)xs.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&an)for(var n of an(r))e.indexOf(n)<0&&Ja.call(r,n)&&(t[n]=r[n]);return t};var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Xu=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ju(e))!xs.call(r,n)&&n!=="default"&&yt(r,n,{get:()=>e[n],enumerable:!(t=Va(e,n))||t.enumerable});return r},k=r=>Xu(Zu(yt(r!=null?zu(Yu(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),_e=(r,e,t,n)=>{for(var i=n>1?void 0:n?Va(e,t):e,a=r.length-1,o;a>=0;a--)(o=r[a])&&(i=(n?o(e,t,i):o(i))||i);return n&&i&&yt(e,t,i),i};var y=(r,e,t)=>new Promise((n,i)=>{var a=l=>{try{c(t.next(l))}catch(p){i(p)}},o=l=>{try{c(t.throw(l))}catch(p){i(p)}},c=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,o);c((t=t.apply(r,e)).next())});var R=w((_y,ln)=>{var Za,Xa,Qa,eo,to,ro,no,io,so,on,Ss,ao,oo,co,ht,lo,uo,po,fo,mo,yo,go,ho,bo,cn;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&undefined?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ln=="object"&&typeof ln.exports=="object"?r(t(e,t(ln.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,o){return n[a]=i?i(a,o):o}}s(t,"createExporter")})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};Za=s(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}s(a,"__"),n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},"__extends"),Xa=Object.assign||function(n){for(var i,a=1,o=arguments.length;a<o;a++){i=arguments[a];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},Qa=s(function(n,i){var a={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(n);c<o.length;c++)i.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(n,o[c])&&(a[o[c]]=n[o[c]]);return a},"__rest"),eo=s(function(n,i,a,o){var c=arguments.length,l=c<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,a):o,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,i,a,o);else for(var h=n.length-1;h>=0;h--)(p=n[h])&&(l=(c<3?p(l):c>3?p(i,a,l):p(i,a))||l);return c>3&&l&&Object.defineProperty(i,a,l),l},"__decorate"),to=s(function(n,i){return function(a,o){i(a,o,n)}},"__param"),ro=s(function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},"__metadata"),no=s(function(n,i,a,o){function c(l){return l instanceof a?l:new a(function(p){p(l)})}return s(c,"adopt"),new(a||(a=Promise))(function(l,p){function h(C){try{b(o.next(C))}catch(j){p(j)}}s(h,"fulfilled");function D(C){try{b(o.throw(C))}catch(j){p(j)}}s(D,"rejected");function b(C){C.done?l(C.value):c(C.value).then(h,D)}s(b,"step"),b((o=o.apply(n,i||[])).next())})},"__awaiter"),io=s(function(n,i){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,c,l,p;return p={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function h(b){return function(C){return D([b,C])}}function D(b){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,c&&(l=b[0]&2?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[b[0]&2,l.value]),b[0]){case 0:case 1:l=b;break;case 4:return a.label++,{value:b[1],done:!1};case 5:a.label++,c=b[1],b=[0];continue;case 7:b=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(b[0]===6||b[0]===2)){a=0;continue}if(b[0]===3&&(!l||b[1]>l[0]&&b[1]<l[3])){a.label=b[1];break}if(b[0]===6&&a.label<l[1]){a.label=l[1],l=b;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(b);break}l[2]&&a.ops.pop(),a.trys.pop();continue}b=i.call(n,a)}catch(C){b=[6,C],c=0}finally{o=l=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},"__generator"),so=s(function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&cn(i,n,a)},"__exportStar"),cn=Object.create?function(n,i,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(i,a);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,c)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]},on=s(function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values"),Ss=s(function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o=a.call(n),c,l=[],p;try{for(;(i===void 0||i-- >0)&&!(c=o.next()).done;)l.push(c.value)}catch(h){p={error:h}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(p)throw p.error}}return l},"__read"),ao=s(function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Ss(arguments[i]));return n},"__spread"),oo=s(function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var o=Array(n),c=0,i=0;i<a;i++)for(var l=arguments[i],p=0,h=l.length;p<h;p++,c++)o[c]=l[p];return o},"__spreadArrays"),co=s(function(n,i,a){if(a||arguments.length===2)for(var o=0,c=i.length,l;o<c;o++)(l||!(o in i))&&(l||(l=Array.prototype.slice.call(i,0,o)),l[o]=i[o]);return n.concat(l||Array.prototype.slice.call(i))},"__spreadArray"),ht=s(function(n){return this instanceof ht?(this.v=n,this):new ht(n)},"__await"),lo=s(function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(n,i||[]),c,l=[];return c={},p("next"),p("throw"),p("return"),c[Symbol.asyncIterator]=function(){return this},c;function p(H){o[H]&&(c[H]=function(mt){return new Promise(function(vs,Nu){l.push([H,mt,vs,Nu])>1||h(H,mt)})})}function h(H,mt){try{D(o[H](mt))}catch(vs){j(l[0][3],vs)}}function D(H){H.value instanceof ht?Promise.resolve(H.value.v).then(b,C):j(l[0][2],H)}function b(H){h("next",H)}function C(H){h("throw",H)}function j(H,mt){H(mt),l.shift(),l.length&&h(l[0][0],l[0][1])}},"__asyncGenerator"),uo=s(function(n){var i,a;return i={},o("next"),o("throw",function(c){throw c}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(c,l){i[c]=n[c]?function(p){return(a=!a)?{value:ht(n[c](p)),done:c==="return"}:l?l(p):p}:l}},"__asyncDelegator"),po=s(function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof on=="function"?on(n):n[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(l){a[l]=n[l]&&function(p){return new Promise(function(h,D){p=n[l](p),c(h,D,p.done,p.value)})}}function c(l,p,h,D){Promise.resolve(D).then(function(b){l({value:b,done:h})},p)}},"__asyncValues"),fo=s(function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n},"__makeTemplateObject");var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};mo=s(function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&cn(i,n,a);return t(i,n),i},"__importStar"),yo=s(function(n){return n&&n.__esModule?n:{default:n}},"__importDefault"),go=s(function(n,i,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(n):o?o.value:i.get(n)},"__classPrivateFieldGet"),ho=s(function(n,i,a,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!c:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(n,a):c?c.value=a:i.set(n,a),a},"__classPrivateFieldSet"),bo=s(function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},"__classPrivateFieldIn"),r("__extends",Za),r("__assign",Xa),r("__rest",Qa),r("__decorate",eo),r("__param",to),r("__metadata",ro),r("__awaiter",no),r("__generator",io),r("__exportStar",so),r("__createBinding",cn),r("__values",on),r("__read",Ss),r("__spread",ao),r("__spreadArrays",oo),r("__spreadArray",co),r("__await",ht),r("__asyncGenerator",lo),r("__asyncDelegator",uo),r("__asyncValues",po),r("__makeTemplateObject",fo),r("__importStar",mo),r("__importDefault",yo),r("__classPrivateFieldGet",go),r("__classPrivateFieldSet",ho),r("__classPrivateFieldIn",bo)})});var yr=w(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.compose=bt.CompositeTransducer=void 0;var un=class{constructor(e,t){this.a=e,this.b=t}async_(e){return this.b.async_(this.a.async_(e))}sync(e){return this.b.sync(this.a.sync(e))}};s(un,"CompositeTransducer");bt.CompositeTransducer=un;function Qu(r,e){return new un(r,e)}s(Qu,"compose");bt.compose=Qu});var wo=w(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.decompose=void 0;var ed=yr();function*Ds(r){r instanceof ed.CompositeTransducer?(yield*Ds(r.a),yield*Ds(r.b)):yield r}s(Ds,"decompose");dn.decompose=Ds});var X=w(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.syncReturned=P.asyncReturned=P.isReturned=P.isYielded=P.AsyncIteratorHandler=P.by=P.toAsyncIterable=P.isArrayLike=P.asyncIterable=P.iterable=P.toIterable=P.isPromiseLike=P.isAsyncIterable=P.isIterable=P.value=P.key=P.comparators=P.descending=P.ascending=void 0;var Ue=R();function pn(r,e){return r<e?-1:r>e?1:0}s(pn,"ascending");P.ascending=pn;function td(r,e){return r<e?1:r>e?-1:0}s(td,"descending");P.descending=td;function rd(...r){return(e,t)=>{for(let n of r){let i=n(e,t);if(i!=0)return i}return 0}}s(rd,"comparators");P.comparators=rd;function nd(r){return Object.assign(e=>e[r],{name:r})}s(nd,"key");P.key=nd;function id(r){return e=>e[r]}s(id,"value");P.value=id;function sd(r){return typeof r=="object"&&Symbol.iterator in r}s(sd,"isIterable");P.isIterable=sd;function ad(r){return typeof r=="object"&&Symbol.asyncIterator in r}s(ad,"isAsyncIterable");P.isAsyncIterable=ad;function od(r){return typeof r=="object"&&"then"in r}s(od,"isPromiseLike");P.isPromiseLike=od;function cd(...r){return r}s(cd,"toIterable");P.toIterable=cd;function*ld(r){for(let e=0;e<r.length;e++)yield r[e]}s(ld,"iterable");P.iterable=ld;function ud(r){return Ue.__asyncGenerator(this,arguments,s(function*(){for(let t of r)yield yield Ue.__await(t)},"asyncIterable_1"))}s(ud,"asyncIterable");P.asyncIterable=ud;function dd(r){return typeof r=="object"&&typeof r.length=="number"}s(dd,"isArrayLike");P.isArrayLike=dd;function pd(r){return Ue.__asyncGenerator(this,arguments,s(function*(){yield yield Ue.__await(r)},"toAsyncIterable_1"))}s(pd,"toAsyncIterable");P.toAsyncIterable=pd;function fd(r,e=pn){return typeof r=="function"?yd(r,e):md(r,e)}s(fd,"by");P.by=fd;function md(r,e=pn){return(t,n)=>e(t[r],n[r])}s(md,"byKey");function yd(r,e=pn){return(t,n)=>e(r(t),r(n))}s(yd,"byFn");var Ps=class{constructor(){this.handlers=[],this.state=[]}value(e){this.newState({value:e,done:!1})}error(e){this.newState(e)}close(e){this.newState({value:e,done:!0})}[Symbol.asyncIterator](){return this}next(){return new Promise((e,t)=>{this.newHandler([e,t])})}newState(e){let t=this.handlers.shift();if(typeof t=="undefined")return this.state.push(e);let n=this.state.shift();if(typeof n=="undefined")return this.consume(e,t);this.consume(n,t),this.newState(e)}newHandler(e){let t=this.state.shift();if(typeof t=="undefined")return this.handlers.push(e);let n=this.handlers.shift();if(typeof n=="undefined")return this.consume(t,e);this.consume(t,n),this.newHandler(e)}consume(e,[t,n]){e instanceof Error?n(e):t(e)}};s(Ps,"AsyncIteratorHandler");P.AsyncIteratorHandler=Ps;function gd(r){return r&&typeof r=="object"&&"yielded"in r}s(gd,"isYielded");P.isYielded=gd;function hd(r){return r&&typeof r=="object"&&"returned"in r}s(hd,"isReturned");P.isReturned=hd;function bd(r){return Ue.__asyncGenerator(this,arguments,s(function*(){for(;;){let{value:t,done:n}=yield Ue.__await(r.next());if(n){yield yield Ue.__await({returned:t});break}else yield yield Ue.__await({yielded:t})}},"asyncReturned_1"))}s(bd,"asyncReturned");P.asyncReturned=bd;function*wd(r){for(;;){let{value:e,done:t}=r.next();if(t){yield{returned:e};break}else yield{yielded:e}}}s(wd,"syncReturned");P.syncReturned=wd});var vo=w(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.dedupe=vt.DedupeTransducer=void 0;var wt=R(),vd=X(),fn=class{constructor(e){this.comparator=e}async_(e){return wt.__asyncGenerator(this,arguments,s(function*(){var n,i;let a;try{for(var o=wt.__asyncValues(e),c;c=yield wt.__await(o.next()),!c.done;){let l=c.value;typeof a=="undefined"?yield yield wt.__await(l):this.comparator(l,a)!==0&&(yield yield wt.__await(l)),a=l}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield wt.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){let t;for(let n of e)typeof t=="undefined"?yield n:this.comparator(n,t)!==0&&(yield n),t=n}};s(fn,"DedupeTransducer");vt.DedupeTransducer=fn;function xd(r=vd.ascending){return new fn(r)}s(xd,"dedupe");vt.dedupe=xd});var xo=w(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.drop=xt.DropTransducer=void 0;var gr=R(),mn=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return gr.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=gr.__asyncValues(e),o;o=yield gr.__await(a.next()),!o.done;){let c=o.value;--this.count<0&&(yield yield gr.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield gr.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)--this.count<0&&(yield t)}};s(mn,"DropTransducer");xt.DropTransducer=mn;function Sd(r){return new mn(r)}s(Sd,"drop");xt.drop=Sd});var So=w(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.dropWhile=St.DropWhileTransducer=void 0;var hr=R(),yn=class{constructor(e){this.predicate=e}async_(e){return hr.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=!0;try{for(var o=hr.__asyncValues(e),c;c=yield hr.__await(o.next()),!c.done;){let l=c.value;a&&(a=this.predicate(l)),a||(yield yield hr.__await(l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield hr.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){let t=!0;for(let n of e)t&&(t=this.predicate(n)),t||(yield n)}};s(yn,"DropWhileTransducer");St.DropWhileTransducer=yn;function Dd(r){return new yn(r)}s(Dd,"dropWhile");St.dropWhile=Dd});var hn=w(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.accept=Be.filter=Be.FilterTransducer=void 0;var br=R(),gn=class{constructor(e){this.predicate=e}async_(e){return br.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=br.__asyncValues(e),o;o=yield br.__await(a.next()),!o.done;){let c=o.value;this.predicate(c)&&(yield yield br.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield br.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)this.predicate(t)&&(yield t)}};s(gn,"FilterTransducer");Be.FilterTransducer=gn;function Do(r){return new gn(r)}s(Do,"filter");Be.filter=Do;Be.accept=Do});var As=w(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.first=Pt.FirstTransducer=void 0;var Dt=R(),bn=class{async_(e){return Dt.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=Dt.__asyncValues(e),o;o=yield Dt.__await(a.next()),!o.done;){let c=o.value;return yield Dt.__await(yield yield Dt.__await(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield Dt.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)return yield t}};s(bn,"FirstTransducer");Pt.FirstTransducer=bn;function Pd(){return new bn}s(Pd,"first");Pt.first=Pd});var Po=w(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.find=void 0;var Ad=hn(),Cd=As(),Td=yr();function Od(r){return(0,Td.compose)((0,Ad.filter)(r),(0,Cd.first)())}s(Od,"find");wn.find=Od});var Ao=w(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.flatMap=At.FlatMapTransducer=void 0;var et=R(),vn=class{constructor(e){this.mapper=e}async_(e){return et.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=et.__asyncValues(e),o;o=yield et.__await(a.next()),!o.done;){let c=o.value;yield et.__await(yield*et.__asyncDelegator(et.__asyncValues(this.mapper(c))))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield et.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)yield*this.mapper(t)}};s(vn,"FlatMapTransducer");At.FlatMapTransducer=vn;function Rd(r){return new vn(r)}s(Rd,"flatMap");At.flatMap=Rd});var To=w($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.transducer=$e.identity=$e.IdentityTransducer=void 0;var xn=class{async_(e){return e}sync(e){return e}};s(xn,"IdentityTransducer");$e.IdentityTransducer=xn;function Co(){return new xn}s(Co,"identity");$e.identity=Co;$e.transducer=Co});var Cs=w(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.last=Ct.LastTransducer=void 0;var wr=R(),Sn=class{async_(e){return wr.__asyncGenerator(this,arguments,s(function*(){var n,i;let a;try{for(var o=wr.__asyncValues(e),c;c=yield wr.__await(o.next()),!c.done;)a=c.value}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield wr.__await(i.call(o)))}finally{if(n)throw n.error}}a!==void 0&&(yield yield wr.__await(a))},"async_1"))}*sync(e){let t;for(t of e);t!==void 0&&(yield t)}};s(Sn,"LastTransducer");Ct.LastTransducer=Sn;function kd(){return new Sn}s(kd,"last");Ct.last=kd});var Oo=w(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.map=Tt.MapTransducer=void 0;var vr=R(),Dn=class{constructor(e){this.mapper=e}async_(e){return vr.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=vr.__asyncValues(e),o;o=yield vr.__await(a.next()),!o.done;){let c=o.value;yield yield vr.__await(this.mapper(c))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield vr.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)yield this.mapper(t)}};s(Dn,"MapTransducer");Tt.MapTransducer=Dn;function Ed(r){return new Dn(r)}s(Ed,"map");Tt.map=Ed});var Ts=w(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.scan=Rt.ScanTransducer=void 0;var Ot=R(),Pn=class{constructor(e,t){this.reducer=e,this.seed=t}async_(e){return Ot.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=this.seed;yield yield Ot.__await(a);try{for(var o=Ot.__asyncValues(e),c;c=yield Ot.__await(o.next()),!c.done;){let l=c.value;yield yield Ot.__await(a=this.reducer(a,l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield Ot.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){let t=this.seed;yield t;for(let n of e)yield t=this.reducer(t,n)}};s(Pn,"ScanTransducer");Rt.ScanTransducer=Pn;function Md(r,e){return new Pn(r,e)}s(Md,"scan");Rt.scan=Md});var Ro=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.reduce=void 0;var Id=yr(),_d=Cs(),Fd=Ts();function jd(r,e){return(0,Id.compose)((0,Fd.scan)(r,e),(0,_d.last)())}s(jd,"reduce");An.reduce=jd});var ko=w(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.reject=void 0;var Ld=hn();function qd(r){return new Ld.FilterTransducer(e=>!r(e))}s(qd,"reject");Cn.reject=qd});var Os=w(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.sum=Ce.subtract=Ce.add=Ce.increment=void 0;function Hd(r){return r+1}s(Hd,"increment");Ce.increment=Hd;function Kd(r,e){return e===void 0?t=>r+t:r+e}s(Kd,"add");Ce.add=Kd;function Ud(r,e){return e===void 0?t=>t-r:r-e}s(Ud,"subtract");Ce.subtract=Ud;var Bd=s((r,e)=>r+e,"sum");Ce.sum=Bd});var kt=w(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.AsyncSequence=te.Sequence=te.sequence=te.range=te.repeat=te.iterate=void 0;var Rs=Os(),ks=X(),Eo=G();function*Tn(r,e){for(;;)yield e,e=r(e)}s(Tn,"iterate");te.iterate=Tn;function*$d(r){for(;;)yield r()}s($d,"repeat");te.repeat=$d;function*Gd(r,e,t=1){if(t===0)throw new Error("step can not be 0");if(e===void 0)yield*Tn((0,Rs.add)(t),r);else{let n=Math.abs(t);e<r?yield*Es(Tn((0,Rs.subtract)(n),r),(0,Eo.takeWhile)(i=>i>=e)):yield*Es(Tn((0,Rs.add)(n),r),(0,Eo.takeWhile)(i=>i<=e))}}s(Gd,"range");te.range=Gd;function Es(r,...e){return(0,ks.isIterable)(r)?new xr(r,e):(0,ks.isArrayLike)(r)?new xr((0,ks.iterable)(r),e):new On(r,e)}s(Es,"sequence");te.sequence=Es;var xr=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.iterator](){return this.transducers.reduce((e,t)=>t.sync(e),this.source)[Symbol.iterator]()}};s(xr,"Sequence");te.Sequence=xr;var On=class{constructor(e,t){this.source=e,this.transducers=t}[Symbol.asyncIterator](){return this.transducers.reduce((e,t)=>t.async_(e),this.source)[Symbol.asyncIterator]()}};s(On,"AsyncSequence");te.AsyncSequence=On});var _o=w(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.single=void 0;var Mo=R(),Nd=X(),Io=kt();function zd(r,...e){return(0,Nd.isIterable)(r)?Wd((0,Io.sequence)(r,...e)):Vd((0,Io.sequence)(r,...e))}s(zd,"single");Rn.single=zd;function Wd(r){for(let e of r)return e;throw new Error("Expected a single value")}s(Wd,"toSingle");function Vd(r){var e,t,n,i;return Mo.__awaiter(this,void 0,void 0,function*(){try{for(e=Mo.__asyncValues(r);t=yield e.next(),!t.done;)return t.value}catch(a){n={error:a}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}throw new Error("Expected a single value")})}s(Vd,"toSinglePromise")});var re=w(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.array=void 0;var Fo=R(),jo=X(),Lo=kt();function Jd(r,...e){return(0,jo.isIterable)(r)||(0,jo.isArrayLike)(r)?Yd((0,Lo.sequence)(r,...e)):Zd((0,Lo.sequence)(r,...e))}s(Jd,"array");kn.array=Jd;function Yd(r){let e=[];for(let t of r)e.push(t);return e}s(Yd,"toArray");function Zd(r){var e,t,n,i;return Fo.__awaiter(this,void 0,void 0,function*(){let a=[];try{for(e=Fo.__asyncValues(r);t=yield e.next(),!t.done;){let o=t.value;a.push(o)}}catch(o){n={error:o}}finally{try{t&&!t.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}return a})}s(Zd,"toPromiseArray")});var Ho=w(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.sort=Et.SortTransducer=void 0;var Sr=R(),Xd=X(),qo=re(),En=class{constructor(e){this.comparator=e}async_(e){return Sr.__asyncGenerator(this,arguments,s(function*(){let n=yield Sr.__await((0,qo.array)(e));n.sort(this.comparator),yield Sr.__await(yield*Sr.__asyncDelegator(Sr.__asyncValues(n)))},"async_1"))}*sync(e){let t=(0,qo.array)(e);t.sort(this.comparator),yield*t}};s(En,"SortTransducer");Et.SortTransducer=En;function Qd(r=Xd.ascending){return new En(r)}s(Qd,"sort");Et.sort=Qd});var Ko=w(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.take=Mt.TakeTransducer=void 0;var tt=R(),Mn=class{constructor(e){if(this.count=e,typeof e=="undefined")throw new Error("Count can not be undefined")}async_(e){return tt.__asyncGenerator(this,arguments,s(function*(){var n,i;if(this.count<1)return yield tt.__await(void 0);try{for(var a=tt.__asyncValues(e),o;o=yield tt.__await(a.next()),!o.done;){let c=o.value;if(yield yield tt.__await(c),--this.count<1)return yield tt.__await(void 0)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield tt.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){if(!(this.count<1)){for(let t of e)if(yield t,--this.count<1)return}}};s(Mn,"TakeTransducer");Mt.TakeTransducer=Mn;function ep(r){return new Mn(r)}s(ep,"take");Mt.take=ep});var Uo=w(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.takeWhile=_t.TakeWhileTransducer=void 0;var It=R(),In=class{constructor(e){this.predicate=e}async_(e){return It.__asyncGenerator(this,arguments,s(function*(){var n,i;try{for(var a=It.__asyncValues(e),o;o=yield It.__await(a.next()),!o.done;){let c=o.value;if(this.predicate(c))yield yield It.__await(c);else return yield It.__await(void 0)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&(yield It.__await(i.call(a)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){for(let t of e)if(this.predicate(t))yield t;else return}};s(In,"TakeWhileTransducer");_t.TakeWhileTransducer=In;function tp(r){return new In(r)}s(tp,"takeWhile");_t.takeWhile=tp});var $o=w(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0})});var Fe=w(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.container=Ge.lazy=Ge.replace=void 0;function Go(r,e,t){return Object.defineProperty(r,e,{value:t})}s(Go,"replace");Ge.replace=Go;function No(r,e,t){if(typeof t.get=="undefined")throw new Error("@lazy can only decorate getter methods");return Object.defineProperty(r,e,Object.assign(Object.assign({},t),{get(){return Go(this,e,t.get.call(this))[e]}}))}s(No,"lazy");Ge.lazy=No;function rp(r){return Object.keys(r).reduce((e,t)=>No(e,t,{configurable:!0,get:()=>r[t](e)}),{})}s(rp,"container");Ge.container=rp});var _s=w(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.AVLTree=void 0;var zo=R(),_n=X(),Wo=Fe(),ye=class{constructor(e){this.comparator=e}static empty(e=_n.ascending){return new Ms(e)}static create(e,t,n=_n.ascending){let i=ye.empty(n);return new ae(n,e,t,i,i)}static of(e,t=_n.ascending){return ye.preSorted(e.sort((0,_n.by)(0)),t,ye.empty(t))}static preSorted(e,t,n){let i=e.length;switch(i){case 0:return n;case 1:{let[[a,o]]=e;return new ae(t,a,o,n,n)}default:{let a=Math.floor(i/2),o=ye.preSorted(e.slice(0,a),t,n),c=ye.preSorted(e.slice(a+1),t,n),[l,p]=e[a];return new ae(t,l,p,o,c)}}}};s(ye,"AVLTree");Fn.AVLTree=ye;var Ms=class extends ye{constructor(e){super(e);this.isEmpty=!0,this.height=0,this.balance=0}insert(e,t){return new ae(this.comparator,e,t,this,this)}contains(e){return!1}lookup(e){}delete(e){return{tree:this}}first(){}last(){}removeFirst(){return{tree:this}}removeLast(){return{tree:this}}toString(){return""}*keys(){}*values(){}*entries(){return[]}};s(Ms,"Empty");var ae=class extends ye{constructor(e,t,n,i,a){super(e);this.key=t,this.value=n,this.left=i,this.right=a,this.isEmpty=!1}insert(e,t){let n=this.comparator(e,this.key);return n===0?new ae(this.comparator,e,t,this.left,this.right):n<0?this.replaceLeft(this.left.insert(e,t)):this.replaceRight(this.right.insert(e,t))}contains(e){let t=this.comparator(e,this.key);return t===0?!0:t<0?this.left.contains(e):this.right.contains(e)}lookup(e){let t=this.comparator(e,this.key);return t===0?this.value:t<0?this.left.lookup(e):this.right.lookup(e)}delete(e){let t=this.comparator(e,this.key);if(t===0){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:o,key:c,value:l}=this.left.removeLast();return{tree:Is(new ae(this.comparator,c,l,o,this.right)),key:this.key,value:this.value}}if(t<0){let{tree:o,key:c,value:l}=this.left.delete(e);return{tree:this.replaceLeft(o),key:c,value:l}}let{tree:n,key:i,value:a}=this.right.delete(e);return{tree:this.replaceRight(n),key:i,value:a}}first(){return this.left.isEmpty?this.value:this.left.first()}last(){return this.right.isEmpty?this.value:this.right.last()}removeFirst(){if(this.left.isEmpty)return{tree:this.right,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.left.removeFirst();return{tree:this.replaceLeft(e),key:t,value:n}}removeLast(){if(this.right.isEmpty)return{tree:this.left,key:this.key,value:this.value};let{tree:e,key:t,value:n}=this.right.removeLast();return{tree:this.replaceRight(e),key:t,value:n}}replaceLeft(e){return Is(new ae(this.comparator,this.key,this.value,e,this.right))}replaceRight(e){return Is(new ae(this.comparator,this.key,this.value,this.left,e))}toString(){return`(${this.left} ${this.key}=${this.value} ${this.right})`}get balance(){return this.left.height-this.right.height}get height(){return Math.max(this.left.height,this.right.height)+1}*keys(){yield*this.left.keys(),yield this.key,yield*this.right.keys()}*values(){yield*this.left.values(),yield this.value,yield*this.right.values()}*entries(){yield*this.left.entries(),yield[this.key,this.value],yield*this.right.entries()}};s(ae,"Node");zo.__decorate([Wo.lazy],ae.prototype,"balance",null);zo.__decorate([Wo.lazy],ae.prototype,"height",null);function Is(r){let e=r.balance;return e==-2?ip(r):e==2?np(r):r}s(Is,"balance");function np(r){let e=r.left.balance;return e==-1?sp(r):e==1?Vo(r):r}s(np,"balanceLeft");function ip(r){let e=r.right.balance;return e==1?ap(r):e==-1?Jo(r):r}s(ip,"balanceRight");function Vo(r){return Zo(r)}s(Vo,"balanceLeftLeft");function sp(r){let e=Yo(r.left);return Vo(r.replaceLeft(e))}s(sp,"balanceLeftRight");function Jo(r){return Yo(r)}s(Jo,"balanceRightRight");function ap(r){let e=Zo(r.right);return Jo(r.replaceRight(e))}s(ap,"balanceRightLeft");function Yo(r){let e=r.right,t=e.left,n=r.replaceRight(t);return e.replaceLeft(n)}s(Yo,"rotateLeft");function Zo(r){let e=r.left,t=e.right,n=r.replaceLeft(t);return e.replaceRight(n)}s(Zo,"rotateRight")});var Qo=w(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.unique=Ft.UniqueTransducer=void 0;var Dr=R(),op=X(),Xo=_s(),jn=class{constructor(e){this.comparator=e}async_(e){return Dr.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=Xo.AVLTree.empty(this.comparator);try{for(var o=Dr.__asyncValues(e),c;c=yield Dr.__await(o.next()),!c.done;){let l=c.value;a.contains(l)||(a=a.insert(l,void 0),yield yield Dr.__await(l))}}catch(l){n={error:l}}finally{try{c&&!c.done&&(i=o.return)&&(yield Dr.__await(i.call(o)))}finally{if(n)throw n.error}}},"async_1"))}*sync(e){let t=Xo.AVLTree.empty(this.comparator);for(let n of e)t.contains(n)||(t=t.insert(n,void 0),yield n)}};s(jn,"UniqueTransducer");Ft.UniqueTransducer=jn;function cp(r=op.ascending){return new jn(r)}s(cp,"unique");Ft.unique=cp});var ec=w(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.WindowedTransducer=Lt.windowed=void 0;var jt=R();function lp(r,e=1,t=!1){return new Ln(r,e,t)}s(lp,"windowed");Lt.windowed=lp;var Ln=class{constructor(e,t,n){this.size=e,this.step=t,this.remainder=n}async_(e){return jt.__asyncGenerator(this,arguments,s(function*(){var n,i;let a=[],o=0;try{for(var c=jt.__asyncValues(e),l;l=yield jt.__await(c.next()),!l.done;){let p=l.value;if(o>0){o--;continue}a.push(p),a.length===this.size&&(yield yield jt.__await([...a]),a=a.slice(this.step),this.step>this.size&&(o=this.step-this.size))}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=c.return)&&(yield jt.__await(i.call(c)))}finally{if(n)throw n.error}}this.remainder&&(yield yield jt.__await([...a]))},"async_1"))}*sync(e){let t=[],n=0;for(let i of e){if(n>0){n--;continue}t.push(i),t.length===this.size&&(yield[...t],t=t.slice(this.step),this.step>this.size&&(n=this.step-this.size))}this.remainder&&(yield[...t])}};s(Ln,"WindowedTransducer");Lt.WindowedTransducer=Ln});var rc=w(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.zipWithIndex=Ne.zip=Ne.ZipTransducer=void 0;var qn=R(),tc=X(),up=kt(),Pr=class{constructor(e){this.other=e}async_(e){return qn.__asyncGenerator(this,arguments,s(function*(){if(!(0,tc.isAsyncIterable)(this.other))throw new Error("Unsupported operation exception");let n=e[Symbol.asyncIterator](),i=this.other[Symbol.asyncIterator]();for(;;){let[a,o]=yield qn.__await(Promise.all([n.next(),i.next()]));if(a.done||o.done)return yield qn.__await(void 0);yield yield qn.__await([a.value,o.value])}},"async_1"))}*sync(e){if(!(0,tc.isIterable)(this.other))throw new Error("Unsupported operation exception");let t=e[Symbol.iterator](),n=this.other[Symbol.iterator]();for(;;){let i=t.next(),a=n.next();if(i.done||a.done)return;yield[i.value,a.value]}}};s(Pr,"ZipTransducer");Ne.ZipTransducer=Pr;function dp(r){return new Pr(r)}s(dp,"zip");Ne.zip=dp;function pp(){return new Pr((0,up.range)(0))}s(pp,"zipWithIndex");Ne.zipWithIndex=pp});var G=w(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=R();F.__exportStar(yr(),M);F.__exportStar(wo(),M);F.__exportStar(vo(),M);F.__exportStar(xo(),M);F.__exportStar(So(),M);F.__exportStar(hn(),M);F.__exportStar(Po(),M);F.__exportStar(As(),M);F.__exportStar(Ao(),M);F.__exportStar(To(),M);F.__exportStar(Cs(),M);F.__exportStar(Oo(),M);F.__exportStar(Ro(),M);F.__exportStar(ko(),M);F.__exportStar(Ts(),M);F.__exportStar(_o(),M);F.__exportStar(Ho(),M);F.__exportStar(Ko(),M);F.__exportStar(Uo(),M);F.__exportStar($o(),M);F.__exportStar(Qo(),M);F.__exportStar(ec(),M);F.__exportStar(rc(),M)});var oe=w(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.caching=Ht.cache=void 0;function bp(r,e,t){if(typeof t.value!="function")throw new Error("@cache can only decorate methods");let n=new WeakMap;function i(a){let o=n.get(a);if(o)return o;let c=new Map;return n.set(a,c),c}return s(i,"getCache"),Object.defineProperty(r,e,Object.assign(Object.assign({},t),{value:function(...a){let o=JSON.stringify(a),c=i(this),l=c.get(o);if(typeof l!="undefined"||c.has(o))return l;let p=t.value.call(this,...a);return c.set(o,p),p}}))}s(bp,"cache");Ht.cache=bp;function wp(r){let e=new Map;return function(...t){let n=JSON.stringify(t),i=e.get(n);if(typeof i!="undefined"||e.has(n))return i;let a=r(...t);return e.set(n,a),a}}s(wp,"caching");Ht.caching=wp});var wi=w(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.StoppedClock=zt.SystemClock=void 0;var Xs=class{now(){return new Date}};s(Xs,"SystemClock");zt.SystemClock=Xs;var Qs=class{constructor(e){this.value=e}now(){return this.value}};s(Qs,"StoppedClock");zt.StoppedClock=Qs});var at=w(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.Days=_.hasNativeToParts=_.yearOf=_.dayOf=_.monthOf=_.Month=_.weekdayOf=_.Weekday=_.defaultOptions=_.date=void 0;function Gc(r,e,t){if(e&&(e<1||e>12))throw new Error(`Invalid month ${e}`);if(t&&(t<1||t>31))throw new Error(`Invalid day ${t}`);let n=new Date(Date.UTC(r,e?e-1:0,t||1));if(r!==ra(n))throw new Error(`Invalid year ${r}`);if(e&&e!==ea(n))throw new Error(`Invalid month ${e}`);if(t&&t!==ta(n))throw new Error(`Invalid day ${t}`);return n}s(Gc,"date");_.date=Gc;_.defaultOptions={year:"numeric",month:"numeric",day:"numeric",weekday:"long"};var Nc;(function(r){r[r.Monday=1]="Monday",r[r.Tuesday=2]="Tuesday",r[r.Wednesday=3]="Wednesday",r[r.Thursday=4]="Thursday",r[r.Friday=5]="Friday",r[r.Saturday=6]="Saturday",r[r.Sunday=7]="Sunday"})(Nc=_.Weekday||(_.Weekday={}));function mf(r){let e=r.getUTCDay();return e===0?Nc.Sunday:e}s(mf,"weekdayOf");_.weekdayOf=mf;var yf;(function(r){r[r.January=1]="January",r[r.February=2]="February",r[r.March=3]="March",r[r.April=4]="April",r[r.May=5]="May",r[r.June=6]="June",r[r.July=7]="July",r[r.August=8]="August",r[r.September=9]="September",r[r.October=10]="October",r[r.November=11]="November",r[r.December=12]="December"})(yf=_.Month||(_.Month={}));function ea(r){return r.getUTCMonth()+1}s(ea,"monthOf");_.monthOf=ea;function ta(r){return r.getUTCDate()}s(ta,"dayOf");_.dayOf=ta;function ra(r){return r.getUTCFullYear()}s(ra,"yearOf");_.yearOf=ra;_.hasNativeToParts=typeof Intl.DateTimeFormat.prototype.formatToParts=="function";var st=class{static startOf(e){return Gc(ra(e),ea(e),ta(e))}static add(e,t){let n=new Date(e.getTime());return n.setUTCDate(e.getUTCDate()+t),n}static subtract(e,t){return st.add(e,t*-1)}static between(e,t){return Math.abs((e.getTime()-t.getTime())/st.milliseconds)}};s(st,"Days");_.Days=st;st.milliseconds=24*60*60*1e3});var Le=w(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.splitByRegex=q.characters=q.removeUnicodeMarkers=q.different=q.suffix=q.prefix=q.replace=q.isNonMatch=q.isNamedMatch=q.NamedRegExp=void 0;var gf=/\(\?<([^>]+)>/g,Ir=class{constructor(e,t){this.pattern=e,this.names=t}static create(e,t){let n=[],i=zc(gf,e,a=>(n.push(a[1]),"("));return new Ir(new RegExp(i,t),n)}match(e){let t=e.match(this.pattern);return t?this.namedMatch(t):[]}namedMatch(e){return e.slice(1).map((n,i)=>({name:this.names[i],value:n}))}*exec(e){let t=new RegExp(this.pattern.source,"g");for(;;){let n=t.exec(e);if(!n)break;yield this.namedMatch(n)}}*iterate(e){let t=0,n=new RegExp(this.pattern.source,"g");for(;;){let a=n.exec(e);if(!a)break;let o=e.substring(t,a.index);o&&(yield o),yield this.namedMatch(a),t=n.lastIndex}let i=e.substring(t);i&&(yield i)}toString(){return`Pattern: ${this.pattern} Names: ${JSON.stringify(this.names)}`}toJSON(){return{pattern:this.pattern.source,names:this.names}}};s(Ir,"NamedRegExp");q.NamedRegExp=Ir;function hf(r){return Array.isArray(r)}s(hf,"isNamedMatch");q.isNamedMatch=hf;function bf(r){return typeof r=="string"}s(bf,"isNonMatch");q.isNonMatch=bf;function zc(r,e,t,n=i=>i){let i=[],a=0,o;for(;(o=r.exec(e))!=null;)i.push(n(e.substring(a,o.index))),i.push(t(o)),a=r.lastIndex;return i.push(n(e.substring(a))),i.join("")}s(zc,"replace");q.replace=zc;function na(r,e){for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n!=i)return t}return r.length}s(na,"prefix");q.prefix=na;function Wc(r,e){return na([...r].reverse(),[...e].reverse())}s(Wc,"suffix");q.suffix=Wc;function wf(r){let e=r.map(Jc),[t,n]=e.reduce(([i,a],o,c)=>{let l=c<e.length-1?e[c+1]:e[0],p=na(o,l),h=Wc(o,l);return[p<i?p:i,h<a?h:a]},[Number.MAX_VALUE,Number.MAX_VALUE]);return e.map(i=>i.slice(t,n?-n:void 0).join(""))}s(wf,"different");q.different=wf;function Vc(r){return r.replace(/[\u200E\u200F]/g,"")}s(Vc,"removeUnicodeMarkers");q.removeUnicodeMarkers=Vc;function Jc(r){return vf(Vc(r))}s(Jc,"characters");q.characters=Jc;function vf(r){return typeof Symbol=="function"&&r[Symbol.iterator]?[...r]:Yc(r)}s(vf,"split");var xf=/(?=(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/;function Yc(r){return r.split(xf)}s(Yc,"splitByRegex");q.splitByRegex=Yc});var Fr=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.formatData=K.format=K.valueFromParts=K.SimpleFormat=K.ImprovedDateTimeFormat=K.Formatters=K.optionsFrom=K.partsFrom=K.dateTimeFormat=void 0;var Sf=R(),Zc=at(),Df=re(),Pf=G(),ia=Le(),Af=oe();function sa(r,e){return new Intl.DateTimeFormat(r,Object.assign(Object.assign({},e),{timeZone:"UTC"}))}s(sa,"dateTimeFormat");K.dateTimeFormat=sa;function Cf(r,e){if(r==="year"){if(e===4)return"numeric";if(e===2)return"2-digit"}if(r==="month"){if(e===4)return"long";if(e===3)return"short";if(e===2)return"2-digit";if(e===1)return"numeric"}if(r==="day"){if(e===2)return"2-digit";if(e===1)return"numeric"}if(r==="weekday"){if(e===4)return"long";if(e===3)return"short"}throw new Error(`Illegal Argument: ${r} ${e}`)}s(Cf,"formatFrom");var Tf=ia.NamedRegExp.create("(?:(?<year>y+)|(?<month>M+)|(?<day>d+)|(?<weekday>E+))","g");function aa(r){return(0,Df.array)(Tf.iterate(r),(0,Pf.map)(e=>{if((0,ia.isNamedMatch)(e)){let[t]=e.filter(a=>Boolean(a.value)),n=t.name,i=Cf(n,t.value.length);return{type:n,value:i}}else return{type:"literal",value:e}}))}s(aa,"partsFrom");K.partsFrom=aa;function Xc(r){let e=typeof r=="string"?aa(r):r,t=["year","month","day","weekday"];return e.filter(n=>t.indexOf(n.type)!=-1).reduce((n,i)=>(n[i.type]=i.value,n),typeof r=="string"?{format:r}:{})}s(Xc,"optionsFrom");K.optionsFrom=Xc;var Wt=class{static create(e,t){return typeof t=="string"?new _r(e,t):typeof t.format=="string"?new _r(e,t.format):new vi(e,t)}};s(Wt,"Formatters");Sf.__decorate([Af.cache],Wt,"create",null);K.Formatters=Wt;var vi=class{constructor(e,t,n=sa(e,t)){this.locale=e,this.options=t,this.delegate=n}format(e){return(0,ia.removeUnicodeMarkers)(this.delegate.format(e))}formatToParts(e){return this.delegate.formatToParts(e)}};s(vi,"ImprovedDateTimeFormat");K.ImprovedDateTimeFormat=vi;var _r=class{constructor(e,t){this.locale=e,this.formatString=t,this.partsInOrder=aa(t),this.options=Xc(this.partsInOrder)}format(e){return this.formatToParts(e).map(t=>t.value).join("")}formatToParts(e){let t=sa(this.locale,this.options).formatToParts(e);return this.partsInOrder.map(n=>({type:n.type,value:this.valueFor(t,n.type,n.value)}))}valueFor(e,t,n){return t==="literal"?n:Qc(e,t)}};s(_r,"SimpleFormat");K.SimpleFormat=_r;function Qc(r,e){return r.filter(t=>t.type===e).map(t=>t.value).join("")}s(Qc,"valueFromParts");K.valueFromParts=Qc;function Of(r,e,t=Zc.defaultOptions){if(r==null)throw new Error("Date format requires a value");return Wt.create(e,t).format(r)}s(Of,"format");K.format=Of;function Rf(r,e,t=Zc.defaultOptions){return Wt.create(e,t).formatToParts(r)}s(Rf,"formatData");K.formatData=Rf});var jr=w(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.unique=Vt.flatten=void 0;function kf(r){return r.flatMap(e=>e)}s(kf,"flatten");Vt.flatten=kf;function el(r){return typeof r=="function"&&r.toString().includes("native code")}s(el,"isNativeFunction");var Ef=el(Set)&&new Set([1]).size===1;function Mf(r){if(el(Array.from)&&Ef)return Array.from(new Set(r));let e=[];for(let t of r)e.indexOf(t)<0&&e.push(t);return e}s(Mf,"unique");Vt.unique=Mf});var Lr=w(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.get=Jt.identity=void 0;function If(){return r=>r}s(If,"identity");Jt.identity=If;function _f(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}s(_f,"get");Jt.get=_f});var Ci=w(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.extraDelimiters=O.CachingParser=O.all=O.AllParser=O.parsers=O.or=O.OrParser=O.FailParser=O.IdentityParser=O.mappingParser=O.MappingParser=O.preProcess=O.PreProcessor=O.namedRegexParser=O.NamedRegexParser=void 0;var tl=R(),rl=Le(),Ff=G(),nl=oe(),il=re(),xi=class{constructor(e){this.regex=e}parse(e){let t=this.regex.match(e);if(t.length===0)throw new Error(`Generated regex ${this.regex.pattern} did not match "${e}" `);return t}parseAll(e){return(0,il.array)(this.regex.exec(e))}};s(xi,"NamedRegexParser");O.NamedRegexParser=xi;function jf(r){return new xi(r)}s(jf,"namedRegexParser");O.namedRegexParser=jf;var Si=class{constructor(e,t){this.delegate=e,this.mapper=t}parse(e){return this.delegate.parse(this.mapper(e))}parseAll(e){return this.delegate.parseAll(this.mapper(e))}};s(Si,"PreProcessor");O.PreProcessor=Si;function Lf(r,e){return new Si(r,e)}s(Lf,"preProcess");O.preProcess=Lf;var Di=class{constructor(e,t){this.parser=e,this.mapper=t}parse(e){return this.mapper(this.parser.parse((0,rl.removeUnicodeMarkers)(e)))}parseAll(e){return e?(0,il.array)(this.parser.parseAll((0,rl.removeUnicodeMarkers)(e)),(0,Ff.flatMap)(t=>{try{return[this.mapper(t)]}catch(n){return[]}})):[]}};s(Di,"MappingParser");O.MappingParser=Di;function qf(r,e){return new Di(r,e)}s(qf,"mappingParser");O.mappingParser=qf;var oa=class{parse(e){return e}parseAll(e){return[e]}};s(oa,"IdentityParser");O.IdentityParser=oa;var ca=class{parse(e){throw new Error}parseAll(e){return[]}};s(ca,"FailParser");O.FailParser=ca;var Pi=class{constructor(e){this.parsers=e}parse(e){for(let t of this.parsers)try{let n=t.parse(e);if(n)return n}catch(n){}throw new Error(`Unable to parse value: ${e}`)}parseAll(e){for(let t of this.parsers){let n=t.parseAll(e);if(n.length>0)return n}return[]}};s(Pi,"OrParser");O.OrParser=Pi;function sl(...r){return new Pi(r)}s(sl,"or");O.or=sl;function Hf(...r){return sl(...r)}s(Hf,"parsers");O.parsers=Hf;var Ai=class{constructor(e){this.parsers=e}parse(e){throw new Error("Not supported, please call AllParser.parseAll")}parseAll(e){return this.parsers.flatMap(t=>t.parseAll(e))}};s(Ai,"AllParser");O.AllParser=Ai;function Kf(...r){return new Ai(r)}s(Kf,"all");O.all=Kf;var qr=class{constructor(e){this.parser=e}parse(e){return this.parser.parse(e)}parseAll(e){return this.parser.parseAll(e)}};s(qr,"CachingParser");tl.__decorate([nl.cache],qr.prototype,"parse",null);tl.__decorate([nl.cache],qr.prototype,"parseAll",null);O.CachingParser=qr;O.extraDelimiters=" -/"});var Hr=w(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.atBoundaryOnly=Oe.cleanValue=Oe.boundaryDelimiters=void 0;Oe.boundaryDelimiters=",.";var Uf=new RegExp(`[${Oe.boundaryDelimiters}]$`);function Bf(r){return r.replace(Uf,"").trim()}s(Bf,"cleanValue");Oe.cleanValue=Bf;function $f(r){return`(?:^|\\s)${r}(?=[\\s${Oe.boundaryDelimiters}]|$)`}s($f,"atBoundaryOnly");Oe.atBoundaryOnly=$f});var ol=w(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Row=Q.PrefixTree=Q.DEFAULT_COMPARATOR=Q.pair=Q.Trie=Q.TrieFactory=void 0;var Yt=R(),Zt=Fe(),Gf=Le(),Nf=X(),zf=_s(),Xt=kt(),ie=G(),ot=class{constructor(e=Nf.ascending){this.comparator=e}get avlTree(){return zf.AVLTree.empty(this.comparator)}get empty(){return new Ve(this,void 0,this.avlTree)}create(e,t=this.avlTree){return new Ve(this,e,t)}construct(e,t){if(e.length===0)return this.create(t);let[n,...i]=e;return this.create(void 0,this.avlTree.insert(n,this.construct(i,t)))}};s(ot,"TrieFactory");Yt.__decorate([Zt.lazy],ot.prototype,"avlTree",null);Yt.__decorate([Zt.lazy],ot.prototype,"empty",null);Q.TrieFactory=ot;var Ve=class{constructor(e=new ot,t,n=e.avlTree){this.factory=e,this.value=t,this.children=n}contains(e){return!!this.lookup(e)}get isEmpty(){return!this.value&&this.children.isEmpty}lookup(e){if(e.length==0)return this.value;let[t,...n]=e,i=this.children.lookup(t);return i&&i.lookup(n)}match(e){if(e.length==0){let a=this.value?[this.value]:[];return(0,ie.single)(this.children.values(),(0,ie.reduce)((o,c)=>o.concat(c.match(e)),a))}let[t,...n]=e,i=this.children.lookup(t);return i?i.match(n):[]}insert(e,t){if(e.length===0)return this.factory.create(t,this.children);let[n,...i]=e,a=this.children.lookup(n);return a?a=a.insert(i,t):a=this.factory.construct(i,t),this.factory.create(this.value,this.children.insert(n,a))}delete(e){return this.insert(e,void 0)}entries(){function*e(n,[i,a]){n=[...n,i],a.value&&(yield la(n,a.value)),yield*t(a,n)}s(e,"recurse");function t(n,i){return(0,Xt.sequence)(n.children.entries(),(0,ie.flatMap)(a=>e(i,a)))}return s(t,"recurseChildren"),t(this,[])}keys(){return(0,Xt.sequence)(this.entries(),(0,ie.map)(([e])=>e))}values(){return(0,Xt.sequence)(this.entries(),(0,ie.map)(([,e])=>e))}get height(){return(0,ie.single)(this.children.values(),(0,ie.reduce)((e,t)=>Math.max(e,t.height+1),0))}toString(){return(this.value?`(${this.value})`:"")+this.children}};s(Ve,"Trie");Yt.__decorate([Zt.lazy],Ve.prototype,"isEmpty",null);Yt.__decorate([Zt.lazy],Ve.prototype,"height",null);Q.Trie=Ve;function la(r,e){return[r,e]}s(la,"pair");Q.pair=la;var Wf=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base"}).compare;Q.DEFAULT_COMPARATOR=Wf;var Je=class{constructor(e=Gf.characters,t=Q.DEFAULT_COMPARATOR,n=new Ve(new ot(t))){this.converter=e,this.comparator=t,this.trie=n}contains(e){return!!this.lookup(e)}get isEmpty(){return this.trie.isEmpty}match(e){return this.trie.match(this.converter(e))}lookup(e){return this.trie.lookup(this.converter(e))}insert(e,t=e){return new Je(this.converter,this.comparator,this.trie.insert(this.converter(e),t))}delete(e){return new Je(this.converter,this.comparator,this.trie.insert(this.converter(e),void 0))}entries(){return(0,Xt.sequence)(this.trie.entries(),(0,ie.map)(([e,t])=>la(e.join(""),t)))}keys(){return(0,Xt.sequence)(this.entries(),(0,ie.map)(([e])=>e))}values(){return(0,Xt.sequence)(this.entries(),(0,ie.map)(([,e])=>e))}get height(){return this.trie.height}search(e,t){let n=ct.create(this.converter(e),this.comparator);return(0,ie.single)(this.trie.children.entries(),(0,ie.reduce)((i,[a,o])=>i.concat(al(o,a,n,t)),[]))}};s(Je,"PrefixTree");Yt.__decorate([Zt.lazy],Je.prototype,"isEmpty",null);Yt.__decorate([Zt.lazy],Je.prototype,"height",null);Q.PrefixTree=Je;function al(r,e,t,n){let i=t.next(e),a=[];return i.distance<=n&&r.value&&a.push({value:r.value,distance:i.distance}),i.minimal<=n?(0,ie.single)(r.children.entries(),(0,ie.reduce)((o,[c,l])=>o.concat(al(l,c,i,n)),a)):a}s(al,"recurse");var ct=class{constructor(e,t,n){this.keys=e,this.values=t,this.comparator=n}static create(e,t){let n=[];for(let i=0;i<=e.length;i++)n[i]=i;return new ct(e,n,t)}next(e){let t=this.keys.reduce((n,i,a)=>(n[a+1]=this.comparator(i,e)===0?this.values[a]:1+Math.min(n[a],this.values[a],this.values[a+1]),n),[this.values[0]+1]);return new ct(this.keys,t,this.comparator)}get distance(){return this.values[this.keys.length]}get minimal(){return Math.min(...this.values)}};s(ct,"Row");Q.Row=ct});var Kr=w($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.Weekdays=$.Months=$.numberFormatter=$.Numerals=$.numberOf=$.DatumLookup=$.uniqueMatch=void 0;var Vf=R(),cl=ol(),ll=Hr(),ua=jr(),da=Le(),Jf=Lr(),Yf=re(),ul=G(),Zf=Fe(),Xf=oe();function dl(r,e){let t=(0,ua.flatten)(r.match(e)),n=(0,ua.unique)(t.map(i=>i.value));if(n.length==1)return n[0]}s(dl,"uniqueMatch");$.uniqueMatch=dl;var Qt=class{constructor(e,t=cl.DEFAULT_COMPARATOR){this.data=e,this.prefixTree=this.data.reduce((n,i)=>{let a=n.lookup(i.name)||[];return a.push(i),n.insert(i.name,a)},new cl.PrefixTree(void 0,t))}parse(e,t=dl){let n=t(this.prefixTree,e);if(typeof n=="undefined")throw new Error(`${this.constructor.name} - Unable to parse: ${e}`);return n}get pattern(){return`[${this.characters.join("")}]{1,${this.max}}`}get max(){return this.data.reduce((e,t)=>{let n=(0,da.characters)(t.name).length;return Math.max(e,n)},Number.MIN_VALUE)}get characters(){return(0,ua.unique)(this.data.map(e=>e.name).flatMap(da.characters)).sort()}};s(Qt,"DatumLookup");$.DatumLookup=Qt;function pl(r){return!r||r.trim().length===0?NaN:Number(r)}s(pl,"numberOf");$.numberOf=pl;var de=class extends Qt{constructor(e,t){super(e);this.locale=t}static get(e,t=[]){return de.cache[e]=de.cache[e]||de.create(e,t)}static create(e,t=[]){return new de([...de.generateData(e),...t],e)}static generateData(e){let t=(0,$.numberFormatter)(e).format(1234567890).replace(/[,. '٬٫]/g,"");return(0,Yf.array)((0,da.characters)(t),(0,ul.zip)([1,2,3,4,5,6,7,8,9,0]),(0,ul.map)(([n,i])=>({name:n,value:i})))}parse(e){let t=pl(e);return isNaN(t)?super.parse(e):t}get pattern(){let e=this.characters.join("");return e==="0123456789"?"\\d":`\\d${e}`}format(e){return(0,$.numberFormatter)(this.locale).format(e)}};s(de,"Numerals");de.cache={};Vf.__decorate([Zf.lazy],de.prototype,"pattern",null);$.Numerals=de;$.numberFormatter=(0,Xf.caching)(r=>new Intl.NumberFormat(r,{useGrouping:!1}));var pa=class extends Qt{constructor(e,t){super(e);this.numerals=de.get(t)}parse(e){let t=(0,Jf.get)(()=>this.numerals.parse(e));return isNaN(t)?super.parse((0,ll.cleanValue)(e)):t}};s(pa,"Months");$.Months=pa;var fa=class extends Qt{parse(e){return super.parse((0,ll.cleanValue)(e))}};s(fa,"Weekdays");$.Weekdays=fa});var Ri=w(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.weekdays=ee.WeekdaysBuilder=ee.months=ee.MonthsBuilder=ee.additionalMonthsDatum=ee.monthDatum=void 0;var Ur=R(),fl=at(),Ti=Fr(),ml=Hr(),Br=oe(),yl=Kr();function gl(r,e){let t=[];for(let n=r;n<=e;n++)t.push(n);return t}s(gl,"range");function Oi(r){return r.map((e,t)=>({name:e,value:t+1}))}s(Oi,"monthDatum");ee.monthDatum=Oi;var hl=[{name:"Mrz",value:3},{name:"Sep.",value:9}],bl=[["jan\xFAar","febr\xFAar","mars","apr\xEDl","ma\xED","j\xFAn\xED","j\xFAl\xED","\xE1g\xFAst","september","okt\xF3ber","n\xF3vember","desember"],["jan.","feb.","mar.","apr.","ma\xED","j\xFAn.","j\xFAl.","\xE1g\xFA.","sep.","okt.","n\xF3v.","des."]].flatMap(Oi),wl=Oi(["gener","febrer","mar\xE7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"]),vl=[{name:"ene",value:1},{name:"abr",value:4},{name:"ago",value:8},{name:"dic",value:12}];ee.additionalMonthsDatum={de:hl,"de-DE":hl,ca:wl,"ca-ES":wl,es:vl,"es-ES":vl,is:bl,"is-IS":bl};var Re=class{constructor(e={}){this.monthsData=e}static create(e){return new Re(e.monthsData)}build(e){let t=Re.formats.flatMap(n=>this.datumFor(e,n));return new yl.Months([...this.monthsData[e]||[],...ee.additionalMonthsDatum[e]||[],...t],e)}datumFor(e,t){return Oi(this.namesFor(e,t))}namesFor(e,t){let n=gl(1,12).map(a=>(0,fl.date)(2e3,a,1)),i=Ti.Formatters.create(e,t);return n.map(a=>(0,Ti.valueFromParts)(i.formatToParts(a),"month")).map(ml.cleanValue)}};s(Re,"MonthsBuilder");Re.formats=[{month:"long"},{month:"short"},{year:"numeric",month:"long",day:"numeric"},{year:"numeric",month:"short",day:"numeric"}];Ur.__decorate([Br.cache],Re.prototype,"build",null);Ur.__decorate([Br.cache],Re.prototype,"namesFor",null);ee.MonthsBuilder=Re;function Qf(r,e="long"){let t=Object.assign({},typeof e=="string"?{month:e}:e);return Re.create(t).namesFor(r,t)}s(Qf,"months");ee.months=Qf;var be=class{constructor(e={}){this.weekdayData=e}static create(e){let t=e.weekdaysData;return this._create(t)}static _create(e){return new be(e)}build(e){let t=be.formats.flatMap(n=>this.datumFor(e,n));return new yl.Weekdays([...this.weekdayData[e]||[],...t])}datumFor(e,t){return this.namesFor(e,t).map((n,i)=>({name:n,value:i+1}))}namesFor(e,t){let n=gl(1,7).map(a=>(0,fl.date)(2e3,1,a+2)),i=Ti.Formatters.create(e,t);return n.map(a=>(0,Ti.valueFromParts)(i.formatToParts(a),"weekday")).map(ml.cleanValue)}};s(be,"WeekdaysBuilder");be.formats=[{weekday:"long"},{weekday:"short"},{year:"numeric",month:"numeric",day:"numeric",weekday:"long"},{year:"numeric",month:"numeric",day:"numeric",weekday:"short"}];Ur.__decorate([Br.cache],be.prototype,"build",null);Ur.__decorate([Br.cache],be.prototype,"namesFor",null);Ur.__decorate([Br.cache],be,"_create",null);ee.WeekdaysBuilder=be;function em(r,e="long"){let t=Object.assign({},typeof e=="string"?{weekday:e}:e);return be.create(t).namesFor(r,t)}s(em,"weekdays");ee.weekdays=em});var va=w(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.formatBuilder=x.parser=x.defaultParserOptions=x.DefaultDateFactory=x.dateFrom=x.DateTimeFormatPartParser=x.DateParser=x.escapeCharacters=x.RegexBuilder=x.inferDecimalSeparator=x.numberParser=x.NumberParser=x.decimalSeparator=x.isDecimalSeparator=x.separatorsOf=x.mapIgnoreError=x.numberPattern=x.Spaces=void 0;var ki=R(),tm=Fe(),$r=Le(),xl=G(),Gr=oe(),Sl=re(),ma=at(),Dl=jr(),ya=Lr(),er=Ci(),ga=Fr(),ha=Hr(),tr=Kr(),Ei=Ri(),le=class{static handle(e){return le.codes.indexOf(e)!=-1?le.spaces:e}static remove(e){return e&&e.replace(le.pattern,"")}};s(le,"Spaces");x.Spaces=le;le.codes=[32,160,8239].map(r=>String.fromCharCode(r));le.spaces=le.codes.join("");le.pattern=new RegExp(`[${le.spaces}]`,"g");var Pl=`\u066C\u066B,.'\u2019\u2018${le.spaces}`;x.numberPattern=(0,Gr.caching)(r=>{let e=tr.Numerals.get(r).pattern;return`-?(?:[${e}]+[${Pl}])*[${e}]+`});function Al(r){return(0,xl.flatMap)(e=>{try{return[r(e)]}catch(t){return[]}})}s(Al,"mapIgnoreError");x.mapIgnoreError=Al;var rm=$r.NamedRegExp.create(`(?<separator>[${Pl}])`);function Cl(r){return(0,Sl.array)(rm.exec(r),(0,xl.map)(([e])=>e.value))}s(Cl,"separatorsOf");x.separatorsOf=Cl;function ba(r){return r&&typeof r=="string"&&r==="."||r===","||r==="\u066B"}s(ba,"isDecimalSeparator");x.isDecimalSeparator=ba;function Tl(r){if(ba(r))return r;throw new Error(`Invalid decimal separator${r}`)}s(Tl,"decimalSeparator");x.decimalSeparator=Tl;var Mi=class{constructor(e,t){this.decimalSeparator=e,this.locale=t,this.strictNumberPattern=new RegExp(`^${(0,x.numberPattern)(t)}$`),this.globalNumberPattern=$r.NamedRegExp.create(`(?<number>${(0,x.numberPattern)(t)})`,"g")}parse(e){if(!this.strictNumberPattern.test(e))throw new Error(`Unable to parse '${e}'`);return this.parseSingle(e)}parseAll(e){return(0,Sl.array)(this.globalNumberPattern.exec(e),Al(([t])=>this.parseSingle(t.value.trim())))}parseSingle(e,t=this.decimalSeparator(e)){let n=Cl(e);if(n.length===0)return this.numberOf(e,t);let a=n[n.length-1]===t?n.slice(0,n.length-1):n;if(a.indexOf(t)!==-1)throw new Error(`Unable to parse '${e}'`);if((0,Dl.unique)(a).length>1)throw new Error(`Unable to parse '${e}'`);return this.numberOf(e,t)}convert(e,t){let n=tr.Numerals.get(this.locale);return(0,$r.characters)(e).map(i=>{if(i===t)return".";if(i==="-")return"-";let a=(0,ya.get)(()=>n.parse(i));return isNaN(a)?"":a.toString()}).join("")}numberOf(e,t){let n=this.convert(e,t),i=(0,tr.numberOf)(n);if(isNaN(i))throw new Error(`Unable to parse '${e}'`);return i}};s(Mi,"NumberParser");x.NumberParser=Mi;function Ii(r,e="en"){return r?ba(r)?new Mi(t=>r,e):Ii((0,x.inferDecimalSeparator)(r),r):Ii(e)}s(Ii,"numberParser");x.numberParser=Ii;x.inferDecimalSeparator=(0,Gr.caching)(r=>(0,ya.get)(()=>Tl(new Intl.NumberFormat(r).formatToParts(.1).find(e=>e.type==="decimal").value),"."));var qe=class{constructor(e,t=ma.defaultOptions,n){this.locale=e,this.options=t,this.formatted=n}static create(e,t=ma.defaultOptions){return typeof t=="string"?wa(e,t):typeof t.format=="string"?wa(e,t.format,t.strict):new qe(e,t,(0,ga.formatData)(new Date,e,t))}get pattern(){let e=this.formatted.map((t,n)=>{switch(t.type){case"year":return`(?<year>[${tr.Numerals.get(this.locale).pattern}]{${this.lengthOf(t.value)}})`;case"month":return`(?<month>${this.monthsPattern()})`;case"day":return`(?<day>[${tr.Numerals.get(this.locale).pattern}]{1,2})`;case"weekday":return`(?<weekday>${Ei.WeekdaysBuilder.create(this.options).build(this.locale).pattern.toLocaleLowerCase(this.locale)})`;default:{let i=(0,Dl.unique)((0,$r.characters)(Ol(this.addExtraLiterals(t)))).join("").replace(" ","\\s"),o=n===this.formatted.length-1?"*":"+";return`[${i}]${o}?`}}}).join("");return(0,ha.atBoundaryOnly)(e)}lengthOf(e){return e.length===2||e==="2-digit"?2:4}addExtraLiterals(e){return this.options.strict?e.value:this.options.format?e.value+(this.options.separators||ha.boundaryDelimiters):e.value+(this.options.separators||ha.boundaryDelimiters+er.extraDelimiters)}monthsPattern(){let e=`[${tr.Numerals.get(this.locale).pattern}]{1,2}`,t=Ei.MonthsBuilder.create(this.options).build(this.locale).pattern.toLocaleLowerCase(this.locale);return this.options.month==="2-digit"||this.options.month==="numeric"?e:this.options.month==="short"||this.options.month==="long"?t:`(?:${e}|${t})`}};s(qe,"RegexBuilder");ki.__decorate([tm.lazy],qe.prototype,"pattern",null);ki.__decorate([Gr.cache],qe,"create",null);x.RegexBuilder=qe;function Ol(r){return r.replace(/[\-]/g,"\\$&")}s(Ol,"escapeCharacters");x.escapeCharacters=Ol;var rr=class{static create(e,t){let n=qe.create(e,t).pattern;return(0,er.mappingParser)(Nr.create($r.NamedRegExp.create(n),e),i=>Rl(i,e,t))}};s(rr,"DateParser");ki.__decorate([Gr.cache],rr,"create",null);x.DateParser=rr;var Nr=class{static create(e,t){return(0,er.preProcess)((0,er.mappingParser)((0,er.namedRegexParser)(e),n=>this.convert(n,t)),n=>this.preProcess(n,t))}static convert(e,t){return e.map(n=>({type:n.name,value:n.value.toLocaleUpperCase(t)}))}static preProcess(e,t){return e.toLocaleLowerCase(t)}};s(Nr,"DateTimeFormatPartParser");ki.__decorate([Gr.cache],Nr,"create",null);x.DateTimeFormatPartParser=Nr;function Rl(r,e,t){var n;let i=Ii(".",e),a=r.find(C=>C.type==="day");if(!a)throw new Error("No day found");let o=i.parse(a.value),c=r.find(C=>C.type==="month");if(!c)throw new Error("No month found");let l=Ei.MonthsBuilder.create(t).build(e).parse(c.value),p=r.find(C=>C.type==="year"),h=p?i.parse(p.value):void 0,D=r.find(C=>C.type==="weekday"),b=D?(0,ya.get)(()=>Ei.WeekdaysBuilder.create(t).build(e).parse(D.value)):void 0;return((n=t.factory)!==null&&n!==void 0?n:new _i).create({year:h,month:l,day:o,weekday:b})}s(Rl,"dateFrom");x.dateFrom=Rl;var _i=class{create({year:e,month:t,day:n}){if(typeof e=="undefined")throw new Error("No year found");return(0,ma.date)(e,t,n)}};s(_i,"DefaultDateFactory");x.DefaultDateFactory=_i;x.defaultParserOptions=[{year:"numeric",month:"long",day:"numeric",weekday:"long"},{year:"numeric",month:"short",day:"numeric",weekday:"short"},{year:"numeric",month:"numeric",day:"numeric"},{year:"numeric",month:"short",day:"numeric"},{year:"numeric",month:"long",day:"numeric"}];function kl(r,e){switch(typeof e){case"string":return rr.create(r,{format:e});case"object":return rr.create(r,e);default:return(0,er.or)(...x.defaultParserOptions.map(t=>kl(r,t)))}}s(kl,"parser");x.parser=kl;function wa(r,e,t=!1){return new qe(r,Object.assign(Object.assign({},(0,ga.optionsFrom)(e)),{strict:t}),(0,ga.partsFrom)(e))}s(wa,"formatBuilder");x.formatBuilder=wa});var _l=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.SmartDate=W.Pivot=W.InferYear=W.InferDirection=W.InferYearViaWeekday=W.compositeDateFactory=W.parse=void 0;var El=G(),Fi=wi(),Ml=kt(),nm=re(),we=at(),Il=va();function im(r,e,t){return(0,Il.parser)(e,t).parse(r)}s(im,"parse");W.parse=im;var xa=class{constructor(e){this.factories=e}create(e){for(let t of this.factories)try{return t.create(e)}catch(n){}throw new Error(`Unable to create date for ${JSON.stringify(e)}`)}};s(xa,"CompositeDateFactory");function sm(...r){return new xa(r)}s(sm,"compositeDateFactory");W.compositeDateFactory=sm;var zr=class{constructor(e){this.clock=e}static create(e=new Fi.SystemClock){return new zr(e)}create({year:e,month:t,day:n,weekday:i}){if(e)return(0,we.date)(e,t,n);if(!i)throw new Error("No weekday provided");let a=this.candidates(t,n).find(o=>(0,we.weekdayOf)(o)===i);if(a)return a;throw new Error("No candidate date found that matches")}candidates(e,t){let n=we.Days.startOf(this.clock.now());return(0,nm.array)((0,Ml.range)(0,-6),(0,El.zip)((0,Ml.range)(1,6)),(0,El.flatMap)(i=>i),(0,Il.mapIgnoreError)(i=>(0,we.date)((0,we.yearOf)(n)+i,e,t)))}};s(zr,"InferYearViaWeekday");W.InferYearViaWeekday=zr;var Wr;(function(r){r[r.Before=-1]="Before",r[r.After=1]="After"})(Wr=W.InferDirection||(W.InferDirection={}));var ve=class{constructor(e,t){this.direction=t,this.date=we.Days.startOf(e)}static before(e){return new ve(e,Wr.Before)}static after(e){return new ve(e,Wr.After)}static sliding(e=new Fi.SystemClock){let t=e.now();return ve.before((0,we.date)((0,we.yearOf)(t)+50,1,1))}create({year:e,month:t,day:n}){if(e&&e<10)throw new Error("Illegal year");if(e&&e>=100&&e<1e3)throw new Error("Illegal year");if(e&&e>=1e3)return(0,we.date)(e,t,n);let i=this.calculateYear(e),a=(0,we.date)(i,t,n);if(this.direction==Wr.Before&&a<this.date||this.direction==Wr.After&&a>this.date)return a;let o=this.calculateYearIncrement(e);return a.setUTCFullYear(a.getUTCFullYear()+o*this.direction),a}calculateYearIncrement(e){return typeof e=="undefined"?1:100}calculateYear(e){if(typeof e=="undefined")return this.date.getUTCFullYear();let t=Math.floor(this.date.getUTCFullYear()/100)*100;return e+t}};s(ve,"InferYear");W.InferYear=ve;var Sa=class{static on(e){return ve.before((0,we.date)(e,1,1))}static sliding(e=new Fi.SystemClock){return ve.sliding(e)}};s(Sa,"Pivot");W.Pivot=Sa;var Da=class{constructor(e=new Fi.SystemClock){this.clock=e}create(e){return typeof e.year=="undefined"?ve.after(this.clock.now()).create(e):ve.sliding(this.clock).create(e)}};s(Da,"SmartDate");W.SmartDate=Da});var jl=w(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.LearningDateFormatter=se.FromFormatStringWeekdayExtractor=se.FromFormatStringMonthExtractor=se.FromFormatStringDataExtractor=se.exactFormat=se.BaseDataExtractor=void 0;var xe=R(),ji=at(),nr=Le(),am=oe(),ke=Fe(),Fl=Fr(),om=re(),cm=G(),Pa=Kr(),Vr=Ri(),Li=class{constructor(e,t,n,i){this.locale=e,this.options=t,this.dates=n,this.partType=i}};s(Li,"BaseDataExtractor");se.BaseDataExtractor=Li;function Aa(r,e,t){let n=Fl.Formatters.create(r,e);return t.map(i=>n.format(i))}s(Aa,"exactFormat");se.exactFormat=Aa;var Jr=class extends Li{extract(){let e=Object.keys(this.options).length==1,t=Aa(this.locale,this.options,this.dates);if(e)return t;let n=Aa(this.locale,{[this.partType]:this.options[this.partType]},this.dates),i=this.diff(t),a=[];for(let o=0;o<n.length;o++){let c=t[o],l=n[o],p=i[o];a.push(c.indexOf(l)!=-1&&l.length>p.length&&isNaN(parseInt(p))?l:p)}return a}diff(e){return(0,nr.different)(e)}};s(Jr,"FromFormatStringDataExtractor");se.FromFormatStringDataExtractor=Jr;var Ye=class extends Jr{constructor(e,t,n){super(e,t,n,"month")}diff(e){if(!this.options.weekday)return super.diff(e);let t=[],n=(0,Vr.weekdays)(this.locale,this.options),i=n[this.day(this.dates[8])];for(let a=0;a<e.length;a++){let c=this.replaceYearMonthDay(e[a]).replace(this.weekday(n,a),i);t[a]=this.restoreYearMonthDay(c)}return super.diff(t)}weekday(e,t){return e[this.day(this.dates[t])]}replaceYearMonthDay(e){return(0,nr.replace)(Ye.replaceYMD,e,t=>{let n=t[1],i=t[2];if(i==="\u5E74")return`${n}year`;if(i==="\u6708")return`${n}month`;if(i==="\u65E5")return`${n}day`;throw new Error(`Unknown delimiter ${i}`)})}restoreYearMonthDay(e){return(0,nr.replace)(Ye.restoreYMD,e,t=>{let n=t[1];if(n==="year")return"\u5E74";if(n==="month")return"\u6708";if(n==="day")return"\u65E5";throw new Error(`Unknown delimiter ${n}`)})}day(e){let t=e.getUTCDay();return t==0?6:t-1}};s(Ye,"FromFormatStringMonthExtractor");se.FromFormatStringMonthExtractor=Ye;Ye.replaceYMD=/(\d)([年月日])/g;Ye.restoreYMD=/(year|month|day)/g;var Ca=class extends Jr{constructor(e,t,n){super(e,t,n,"weekday")}diff(e){if(!this.options.day)return super.diff(e);let t=[],n=this.dates[0].getUTCDate().toString();for(let i=0;i<e.length;i++){let a=e[i],o=this.convertToNumeral(this.dates[i].getUTCDate()),c=a.replace(o,n);t[i]=c}return super.diff(t)}convertToNumeral(e){return(0,Pa.numberFormatter)(this.locale).format(e)}};s(Ca,"FromFormatStringWeekdayExtractor");se.FromFormatStringWeekdayExtractor=Ca;var Z=class{constructor(e,t=ji.defaultOptions,n=3333,i=11,a=20,o=ji.Weekday.Friday,c=Pa.Numerals.get(e)){this.locale=e,this.options=t,this.yearValue=n,this.monthValue=i,this.dayValue=a,this.weekdayValue=o,this.numerals=c}static create(e,t=ji.defaultOptions){return new Z(e,t)}get formatter(){return Fl.Formatters.create(this.locale,this.options)}get formatted(){return this.formatter.format((0,ji.date)(this.yearValue,this.monthValue,this.dayValue))}get months(){return Vr.MonthsBuilder.create(this.options).build(this.locale)}get month(){return Vr.MonthsBuilder.create(this.options).namesFor(this.locale,this.options)[this.monthValue-1]}get weekdays(){return Vr.WeekdaysBuilder.create(this.options).build(this.locale)}get weekday(){return(0,Vr.weekdays)(this.locale,this.options)[this.weekdayValue-1]}get year(){return this.numerals.format(this.yearValue)}get day(){return this.numerals.format(this.dayValue)}get learningNamesPattern(){let e=s(i=>`(?<${i}>${this[i]})`,"template"),n=`(?:${Object.keys(this.options).map(i=>e(i)).join("|")})`;return nr.NamedRegExp.create(n)}get actualNamesPattern(){let e=Pa.Numerals.get(this.locale).pattern,t=this.learningNamesPattern,n=(0,om.array)(t.iterate(this.formatted),(0,cm.map)(a=>{if((0,nr.isNamedMatch)(a)){let[o]=a.filter(c=>Boolean(c.value)).map(c=>c.name);if(!o)throw new Error;if(o=="year")return`(?<year>[${e}]{4})`;if(o=="day")return`(?<day>[${e}]{1,2})`;if(o=="month")return`(?<month>(?:[${e}]{1,2}|${this.months.pattern}))`;if(o=="weekday")return`(?<weekday>${this.weekdays.pattern})`}else return`(?<literal>[${a}]+?)`})),i="^"+n.join("")+"$";return nr.NamedRegExp.create(i)}format(e){return this.formatter.format(e)}formatToParts(e){let t=this.actualNamesPattern,n=this.formatter.format(e),i=t.match(n);if(i.length===0)throw new Error(`${t} did not match ${n}`);let a=i.map(o=>({type:this.getType(o.name,o.value),value:o.value}));return this.collapseLiterals(a)}collapseLiterals(e){for(let t=0;t<e.length;t++){let n=e[t];if(n.type==="literal"){let i=t+1;for(;;){let a=e[i];if(!(a&&a.type==="literal"))break;n.value=n.value+a.value,e.splice(i,1)}}}return e}getType(e,t){return e==="month"||e==="weekday"?this.parsable(this.months,t)?"month":this.parsable(this.weekdays,t)?"weekday":"literal":e}parsable(e,t){try{return Boolean(e.parse(t))}catch(n){return!1}}};s(Z,"LearningDateFormatter");xe.__decorate([ke.lazy],Z.prototype,"formatter",null);xe.__decorate([ke.lazy],Z.prototype,"formatted",null);xe.__decorate([ke.lazy],Z.prototype,"months",null);xe.__decorate([ke.lazy],Z.prototype,"month",null);xe.__decorate([ke.lazy],Z.prototype,"weekdays",null);xe.__decorate([ke.lazy],Z.prototype,"weekday",null);xe.__decorate([ke.lazy],Z.prototype,"year",null);xe.__decorate([ke.lazy],Z.prototype,"day",null);xe.__decorate([ke.lazy],Z.prototype,"learningNamesPattern",null);xe.__decorate([ke.lazy],Z.prototype,"actualNamesPattern",null);xe.__decorate([am.cache],Z,"create",null);se.LearningDateFormatter=Z});var De=w(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});var He=R();He.__exportStar(wi(),Se);He.__exportStar(at(),Se);He.__exportStar(Fr(),Se);He.__exportStar(va(),Se);He.__exportStar(Hr(),Se);He.__exportStar(_l(),Se);He.__exportStar(Kr(),Se);He.__exportStar(jl(),Se);He.__exportStar(Ri(),Se)});var Du=w(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.currencies=void 0;fs.currencies={AFN:{decimals:2,symbols:["Afs","\u060B"]},EUR:{decimals:2,symbols:["\u20AC"]},ALL:{decimals:2,symbols:["L"]},DZD:{decimals:2,symbols:["DA"]},USD:{decimals:2,symbols:["$","US$"]},AOA:{decimals:2,symbols:["Kz"]},XCD:{decimals:2,symbols:["EC$","$"]},ARS:{decimals:2,symbols:["$"]},AMD:{decimals:2,symbols:["\u058F"]},AWG:{decimals:2,symbols:["\u0192"]},AUD:{decimals:2,symbols:["A$","AU$","AUD","$"]},AZN:{decimals:2,symbols:["\u20BC","A.M."]},BSD:{decimals:2,symbols:["B$","$"]},BHD:{decimals:3,symbols:["BD"]},BDT:{decimals:2,symbols:["\u09F3"]},BBD:{decimals:2,symbols:["Bds$","$"]},BYN:{decimals:2,symbols:["Br"]},BZD:{decimals:2,symbols:["Bz$","$"]},XOF:{decimals:0,symbols:["F"]},BMD:{decimals:2,symbols:["BD$","$"]},INR:{decimals:2,symbols:["\u20B9","Rs"]},BTN:{decimals:2,symbols:["Nu"]},BOB:{decimals:2,symbols:["Bs"]},BOV:{decimals:2,symbols:[]},BAM:{decimals:2,symbols:["KM"]},BWP:{decimals:2,symbols:["P"]},NOK:{decimals:2,symbols:["kr"]},BRL:{decimals:2,symbols:["R$"]},BND:{decimals:2,symbols:["B$","$"]},BGN:{decimals:2,symbols:["\u043B\u0432.","\u043B\u0432"]},BIF:{decimals:0,symbols:["FBu"]},CVE:{decimals:2,symbols:[]},KHR:{decimals:2,symbols:["\u17DB"]},XAF:{decimals:0,symbols:[]},CAD:{decimals:2,symbols:["C$","CAD$","$","\xA2"]},KYD:{decimals:2,symbols:["CI$","$"]},CLP:{decimals:0,symbols:["CLP$","$"]},CLF:{decimals:4,symbols:[]},CNY:{decimals:2,symbols:["\xA5","\uFFE5"]},COP:{decimals:2,symbols:["COL$","$"]},COU:{decimals:2,symbols:["COU$"]},KMF:{decimals:0,symbols:["CF"]},CDF:{decimals:2,symbols:["CF"]},NZD:{decimals:2,symbols:["NZ$","$"]},CRC:{decimals:2,symbols:["\u20A1"]},HRK:{decimals:2,symbols:["kn"]},CUP:{decimals:2,symbols:["$MN","$"]},CUC:{decimals:2,symbols:["CUC$","$"]},ANG:{decimals:2,symbols:["\u0192","NA\u0192","CMg"]},CZK:{decimals:2,symbols:["K\u010D"]},DKK:{decimals:2,symbols:["kr","kr."]},DJF:{decimals:0,symbols:["Fdj"]},DOP:{decimals:2,symbols:["RD$","$"]},EGP:{decimals:2,symbols:["LE","\xA3"]},SVC:{decimals:2,symbols:[]},ERN:{decimals:2,symbols:["Nfk"]},SZL:{decimals:2,symbols:["E"]},ETB:{decimals:2,symbols:["Br"]},FKP:{decimals:2,symbols:["\xA3"]},FJD:{decimals:2,symbols:["F$","FJ$","$"]},XPF:{decimals:0,symbols:["\u20A3"]},GMD:{decimals:2,symbols:["D"]},GEL:{decimals:2,symbols:["\u20BE"]},GHS:{decimals:2,symbols:["GH\u20B5"]},GIP:{decimals:2,symbols:["\xA3"]},GTQ:{decimals:2,symbols:["Q"]},GBP:{decimals:2,symbols:["\xA3"]},GNF:{decimals:0,symbols:["FG"]},GYD:{decimals:2,symbols:["G$","GY$","$"]},HTG:{decimals:2,symbols:["Gde.","G"]},HNL:{decimals:2,symbols:["L"]},HKD:{decimals:2,symbols:["\u5143","HK$","$"]},HUF:{decimals:2,symbols:["Ft"]},ISK:{decimals:0,symbols:["kr"]},IDR:{decimals:2,symbols:["Rp","Rs"]},XDR:{decimals:0,symbols:[]},IRR:{decimals:2,symbols:["\uFDFC"]},IQD:{decimals:3,symbols:["\u062F.\u0639","ID"]},ILS:{decimals:2,symbols:["\u20AA"]},JMD:{decimals:2,symbols:["J$","$"]},JPY:{decimals:0,symbols:["\u5186","\xA5","\uFFE5"]},JOD:{decimals:3,symbols:["JD"]},KZT:{decimals:2,symbols:["\u20B8"]},KES:{decimals:2,symbols:["Ksh","KSh"]},KPW:{decimals:2,symbols:["\u20A9"]},KRW:{decimals:0,symbols:["\u20A9"]},KWD:{decimals:3,symbols:["KD","\u062F.\u0643"]},KGS:{decimals:2,symbols:["\u20C0"]},LAK:{decimals:2,symbols:["\u20AD"]},LBP:{decimals:2,symbols:["\u0644.\u0644.","LL","\xA3"]},LSL:{decimals:2,symbols:["M"]},ZAR:{decimals:2,symbols:["R"]},LRD:{decimals:2,symbols:["Lib$","L$","$"]},LYD:{decimals:3,symbols:["LD"]},CHF:{decimals:2,symbols:["Fr"]},MOP:{decimals:2,symbols:["MOP$"]},MKD:{decimals:2,symbols:["DEN","\u0434\u0435\u043D"]},MGA:{decimals:2,symbols:["Ar"]},MWK:{decimals:2,symbols:["MK"]},MYR:{decimals:2,symbols:["RM"]},MVR:{decimals:2,symbols:["\u0783","Rf","MRF"]},MRU:{decimals:2,symbols:[]},MUR:{decimals:2,symbols:["\u20A8"]},XUA:{decimals:0,symbols:[]},MXN:{decimals:2,symbols:["$"]},MXV:{decimals:2,symbols:[]},MDL:{decimals:2,symbols:["L"]},MNT:{decimals:2,symbols:["\u20AE"]},MAD:{decimals:2,symbols:["DH"]},MZN:{decimals:2,symbols:["MT","MTn"]},MMK:{decimals:2,symbols:["K"]},NAD:{decimals:2,symbols:["N$","$"]},NPR:{decimals:2,symbols:["N\u20A8","\u0930\u0941","\u20A8","Re"]},NIO:{decimals:2,symbols:["C$"]},NGN:{decimals:2,symbols:["\u20A6"]},OMR:{decimals:3,symbols:["\u0631.\u0639."]},PKR:{decimals:2,symbols:["\u20A8","Rs"]},PAB:{decimals:2,symbols:["B/."]},PGK:{decimals:2,symbols:["K"]},PYG:{decimals:0,symbols:["\u20B2"]},PEN:{decimals:2,symbols:["S/."]},PHP:{decimals:2,symbols:["\u20B1"]},PLN:{decimals:2,symbols:["z\u0142"]},QAR:{decimals:2,symbols:["QR"]},RON:{decimals:2,symbols:["lei"]},RUB:{decimals:2,symbols:["\u20BD"]},RWF:{decimals:0,symbols:["FRw"]},SHP:{decimals:2,symbols:["\xA3"]},WST:{decimals:2,symbols:["WS$"]},STN:{decimals:2,symbols:["Db","\u20A1"]},SAR:{decimals:2,symbols:["SR"]},RSD:{decimals:2,symbols:["\u0434\u0438\u043D","din"]},SCR:{decimals:2,symbols:["SRe"]},SLL:{decimals:2,symbols:["Le"]},SLE:{decimals:2,symbols:["Le"]},SGD:{decimals:2,symbols:["S$","$"]},XSU:{decimals:0,symbols:["Sucre"]},SBD:{decimals:2,symbols:["$","SI$"]},SOS:{decimals:2,symbols:["Sh.So."]},SSP:{decimals:2,symbols:["Db","\xA3"]},LKR:{decimals:2,symbols:["Rs","\u0DBB\u0DD4","\u0BB0\u0BC2"]},SDG:{decimals:2,symbols:["\u062C.\u0633","sud\xA3","\xA3"]},SRD:{decimals:2,symbols:["$"]},SEK:{decimals:2,symbols:["kr"]},CHE:{decimals:2,symbols:[]},CHW:{decimals:2,symbols:[]},SYP:{decimals:2,symbols:["syr\xA3","LS","\xA3"]},TWD:{decimals:2,symbols:["NT$","$"]},TJS:{decimals:2,symbols:["SM"]},TZS:{decimals:2,symbols:["TSh"]},THB:{decimals:2,symbols:["\u0E3F"]},TOP:{decimals:2,symbols:["T$"]},TTD:{decimals:2,symbols:["TT$","$"]},TND:{decimals:3,symbols:["DT"]},TRY:{decimals:2,symbols:["YTL","\u20BA"]},TMT:{decimals:2,symbols:["T"]},UGX:{decimals:0,symbols:["Ush"]},UAH:{decimals:2,symbols:["\u20B4"]},AED:{decimals:2,symbols:["DH","\u062F.\u0625","Dhs"]},USN:{decimals:2,symbols:[]},UYU:{decimals:2,symbols:["$U","$"]},UYI:{decimals:0,symbols:[]},UYW:{decimals:4,symbols:[]},UZS:{decimals:2,symbols:["So'm"]},VUV:{decimals:0,symbols:["VT"]},VES:{decimals:2,symbols:["Bs.S"]},VED:{decimals:2,symbols:[]},VND:{decimals:0,symbols:["\u20AB","\u0111"]},YER:{decimals:2,symbols:["\uFDFC'"]},ZMW:{decimals:2,symbols:["K","ZK"]},ZWL:{decimals:2,symbols:[]},XBA:{decimals:0,symbols:[]},XBB:{decimals:0,symbols:[]},XBC:{decimals:0,symbols:[]},XBD:{decimals:0,symbols:[]},XTS:{decimals:0,symbols:[]},XXX:{decimals:0,symbols:[]},XAU:{decimals:0,symbols:[]},XPD:{decimals:0,symbols:[]},XPT:{decimals:0,symbols:[]},XAG:{decimals:0,symbols:[]},ADP:{symbols:["Pta"],decimals:2}}});var Pu=w(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.PreferredCurrencies=void 0;var U=class{static dollarSymbol(e){return e&&U.dollarCountries[e]||"USD"}static poundSymbol(e){return e&&U.poundCountries[e]||"GBP"}static yenSymbol(e){return e&&U.yenCountries[e]||"JPY"}static kroneSymbol(e){return e&&U.kroneCountries[e]||"DKK"}static rupeeSymbol(e){return e&&U.rupeeCountries[e]||"INR"}static for(e){return[U.dollarSymbol(e),U.poundSymbol(e),U.yenSymbol(e),U.kroneSymbol(e),U.rupeeSymbol(e)]}};s(U,"PreferredCurrencies");ms.PreferredCurrencies=U;U.dollarCountries={AG:"XCD",AR:"ARS",AU:"AUD",BS:"BSD",BB:"BBD",BZ:"BZD",BM:"BMD",BN:"BND",CA:"CAD",CO:"COP",CL:"CLP",CU:"CUP",DM:"XCD",DO:"DOP",EC:"USD",FM:"USD",KY:"KYD",FJ:"FJD",GD:"XCD",GY:"GYD",HK:"HKD",JM:"JMD",KI:"AUD",KN:"XCD",LC:"XCD",LR:"LRD",MH:"USD",MX:"MXN",NA:"NAD",NZ:"NZD",SG:"SGD",SB:"SBD",SR:"SRD",SV:"USD",TL:"USD",TW:"TWD",TT:"TTD",TV:"AUD",US:"USD",UY:"UYU",VC:"XCD",ZW:"USD"};U.poundCountries={EG:"EGP",FK:"FKP",GB:"GBP",GI:"GIP",GG:"GBP",IM:"GBP",JE:"GBP",LB:"LBP",SH:"SHP",SS:"SSP",SD:"SDG",SY:"SYP"};U.yenCountries={CN:"CNY",JP:"JPY"};U.kroneCountries={DK:"DKK",FO:"DKK",GL:"DKK",IS:"ISK",NO:"NOK",SE:"SEK"};U.rupeeCountries={IN:"INR",ID:"IDR",MU:"MUR",NP:"NPR",PK:"PKR",LK:"LKR"}});var qa=w(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.infer=dr.prefer=void 0;var Au=jr(),uy=Pu();function dy(...r){if(r.filter(Boolean).length!==0)return(e,t)=>{let n=e.lookup(t)||[],i=(0,Au.unique)(n.map(a=>a.value));if(i.length!==0)return i.length===1?i[0]:i.find(a=>r.indexOf(a)!==-1)}}s(dy,"prefer");dr.prefer=dy;function py(r){return r?r.split(/[-_]/).filter(Boolean):[]}s(py,"localeParts");function fy(r){let[,e]=py(r),t=uy.PreferredCurrencies.for(e);return(n,i)=>{let a=n.lookup(i)||[],o=(0,Au.unique)(a.map(l=>l.value));if(o.length===0)return;if(o.length===1)return o[0];let c=o.filter(l=>l.startsWith(e));return c.length===1?c[0]:o.find(l=>t.indexOf(l)!==-1)}}s(fy,"infer");dr.infer=fy});var Mu=w(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.IntegerGroupParser=S.PartsFromFormat=S.NumberFormatPartParser=S.MoneyParser=S.RegexBuilder=S.symbolFor=S.CurrencySymbols=S.parseToParts=S.parser=S.parse=S.FormatToParts=S.toPartsPonyfill=S.format=S.partsFrom=S.hasNativeToParts=S.Formatter=S.decimalsFor=S.moneyFrom=S.money=void 0;var ut=R(),Xe=Le(),pe=G(),ys=X(),Ha=Du(),Cu=Fe(),Ka=Ci(),en=oe(),my=Lr(),tn=re(),fe=De(),yy=qa();function gs(r,e){return{amount:e,currency:r}}s(gs,"money");S.money=gs;function Ua(r,e,t){let{currency:n}=(0,pe.single)(r,(0,pe.filter)(l=>l.type==="currency"),(0,pe.flatMap)(l=>{try{let p=V.get(e).parse(l.value,t&&t.strategy);return[{currency:p,exactMatch:p===l.value}]}catch(p){return[]}}),(0,pe.sort)((0,ys.by)("exactMatch",ys.descending)),(0,pe.first)()),i=r.filter(l=>l.type==="integer"||l.type==="decimal"||l.type==="fraction"),a=(0,my.get)(()=>r.filter(l=>l.type==="decimal")[0].value,"."),o=i.map(l=>l.value).join(""),c=(0,fe.numberParser)(a,e).parse(o);return gs(n,c)}s(Ua,"moneyFrom");S.moneyFrom=Ua;function Tu(r){let e=Ha.currencies[r];return e?e.decimals:2}s(Tu,"decimalsFor");S.decimalsFor=Tu;var Me=class{static create(e,t,n="code"){return new Intl.NumberFormat(t,{currencyDisplay:n,currency:e,style:"currency",minimumFractionDigits:0,maximumFractionDigits:Tu(e)})}};s(Me,"Formatter");ut.__decorate([en.cache],Me,"create",null);S.Formatter=Me;S.hasNativeToParts=typeof Intl.NumberFormat.prototype.formatToParts=="function";function Ba(r,e,t="code",n=S.hasNativeToParts){let i=Me.create(r.currency,e,t);return n?i.formatToParts(r.amount):Ou(r,e,t)}s(Ba,"partsFrom");S.partsFrom=Ba;function gy(r,e,t="code"){return Me.create(r.currency,e,t).format(r.amount)}s(gy,"format");S.format=gy;function Ou(r,e,t="code"){let n=r.currency,i=r.amount;return dt.create(n,e,t).format(i)}s(Ou,"toPartsPonyfill");S.toPartsPonyfill=Ou;var Ru=gs("GBP",111222.3333),dt=class{constructor(e,t,n,i){this.currency=e,this.currencyDisplay=t,this.parser=n,this.locale=i}static create(e,t,n="code"){let i=Me.create(e,t,n).format(Ru.amount),a=Ie.examplePattern(t).parse(i),o=rn.buildFrom(a,t),c=pt.create(t,o);return new dt(e,n,c,t)}format(e){let t=Me.create(this.currency,this.locale,this.currencyDisplay);return this.parser.parse(t.format(e))}};s(dt,"FormatToParts");ut.__decorate([en.cache],dt,"create",null);S.FormatToParts=dt;function hy(r,e,t){return Ua(ku(r,e,t),e,t)}s(hy,"parse");S.parse=hy;function by(r,e){return hs.create(r,e)}s(by,"parser");S.parser=by;function ku(r,e,t){return pt.create(e,t).parse(r)}s(ku,"parseToParts");S.parseToParts=ku;var V=class extends fe.DatumLookup{constructor(e,t){super(e.map(n=>({name:(0,fe.cleanValue)(n.name),value:n.value})),ys.ascending);this.locale=t}static get(e,t=[]){return V.cache[e]=V.cache[e]||V.create(e,t)}static set(e,t){return V.cache[e]=t}static create(e,t=[]){return new V([...V.generateData(e),...t],e)}static generateData(e){return Object.keys(Ha.currencies).flatMap(t=>V.dataFor(e,t,Ha.currencies[t]))}static dataFor(e,t,n){return[{name:t,value:t},{name:Eu(e,t),value:t},...(0,tn.array)(n.symbols,(0,pe.flatMap)(i=>{let a=[{name:i,value:t}];if(V.generateAdditionalSymbols.indexOf(i)!==-1){let o=t.substring(0,2);a.push({name:i+o,value:t}),a.push({name:o+i,value:t}),a.push({name:t+i,value:t})}return a}))]}parse(e,t=(0,yy.infer)(this.locale)){return super.parse((0,fe.cleanValue)(e),t)}};s(V,"CurrencySymbols");S.CurrencySymbols=V;V.cache={};V.generateAdditionalSymbols=["$","\xA5","\xA3"];var wy=/GBP|£GB|GB£|UK£|£UK/;function Eu(r,e,t=S.hasNativeToParts){if(t){let n=Ba(gs(e,0),r,"symbol"),[i]=n.filter(a=>a.type==="currency");if(!i)throw new Error("No currency found");return fe.Spaces.remove(i.value)}else{let n=Me.create("GBP",r,"symbol").format(1).replace(wy,"@@@"),i=Me.create(e,r,"symbol").format(1),[,a]=(0,Xe.different)([n,i]);return a?fe.Spaces.remove(a):"\xA3"}}s(Eu,"symbolFor");S.symbolFor=Eu;var rn=class{static buildFromOptions(e,t){return t&&t.format?this.buildFrom(Ie.format.parse(t.format),e,!0):this.buildPattern(e,t&&t.strict||!1)}static buildPattern(e,t=!1){return this.buildFrom(Ba(Ru,e),e,t)}static buildFrom(e,t,n=!1){let i=this.buildParts(e,n),[a=""]=e.filter(l=>l.type==="group").map(l=>l.value),o=fe.Numerals.get(t).pattern,c=i.map(l=>{switch(l.type){case"currency":return`(?<currency>${V.get(t).pattern})?`;case"decimal":return`(?<decimal>[${l.value}]?)`;case"fraction":return`(?<fraction>[${o}]*)`;case"integer":return`(?<integer-group>[${o}${fe.Spaces.handle(a)}]*[${o}]+)`;default:return`(?<${l.type}>[${fe.Spaces.handle(l.value)}]?)`}}).join("");return(0,fe.atBoundaryOnly)(c)}static buildParts(e,t=!1){let n=[...e];if(!t){let i=n[0],a=n[n.length-1],o={type:"literal",value:" "};i.type==="currency"?(n.push(o,i),n.splice(1,0,o)):a.type==="currency"&&(n.unshift(a,o),n.splice(n.length-2,0,o))}return(0,tn.array)(n,(0,pe.filter)(i=>i.type!=="group"),(0,pe.dedupe)((0,ys.by)("type")))}};s(rn,"RegexBuilder");S.RegexBuilder=rn;var hs=class{static create(e,t){return(0,Ka.mappingParser)(pt.create(e,t),n=>Ua(n,e,t))}};s(hs,"MoneyParser");S.MoneyParser=hs;var pt=class{static create(e,t){let n=typeof t=="string"?t:rn.buildFromOptions(e,t);return(0,Ka.mappingParser)((0,Ka.namedRegexParser)(Xe.NamedRegExp.create(n)),i=>this.convert(i,e))}static convert(e,t){return(0,tn.array)(e,(0,pe.filter)(n=>Boolean(n.value)),(0,pe.flatMap)(n=>n.name==="integer-group"?Pe.digits(t).parse(n.value):[{type:n.name,value:n.value}]))}};s(pt,"NumberFormatPartParser");ut.__decorate([en.cache],pt,"create",null);S.NumberFormatPartParser=pt;var Ie=class{constructor(e,t){this.formatRegex=e,this.integerGroupParser=t}parse(e){return(0,tn.array)(this.formatRegex.iterate(e),(0,pe.flatMap)(t=>{if((0,Xe.isNamedMatch)(t)){let[n,i,a]=t.filter(o=>Boolean(o.value));if(n.name==="currency")return[{type:n.name,value:n.value}];{let o=this.integerGroupParser.parse(n.value);return i?[...o,{type:i.name,value:i.value},{type:a.name,value:a.value}]:o}}else return[{type:"literal",value:t}]}))}static get format(){let e=Xe.NamedRegExp.create("(?:(?<integer-group>(?:i.*i|i))(?:(?<decimal>[^f])(?<fraction>f+))?|(?<currency>C+))");return new Ie(e,Pe.integerFormat)}static examplePattern(e){let t=fe.Numerals.get(e),n=Xe.NamedRegExp.create(`(?:(?<integer-group>${t.format(1)}.*${t.format(2)})(?:(?<decimal>.)(?<fraction>${t.format(3)}+))?|(?<currency>${V.get(e).pattern}))`);return new Ie(n,Pe.digits(e))}};s(Ie,"PartsFromFormat");ut.__decorate([Cu.lazy],Ie,"format",null);ut.__decorate([en.cache],Ie,"examplePattern",null);S.PartsFromFormat=Ie;var Pe=class{constructor(e){this.regex=e}parse(e){return(0,tn.array)(this.regex.iterate(e),(0,pe.map)(t=>(0,Xe.isNamedMatch)(t)?{type:"integer",value:t[0].value}:{type:"group",value:t}))}static digits(e){return new Pe(Xe.NamedRegExp.create(`(?<integer>[${fe.Numerals.get(e).pattern}]+)`))}static get integerFormat(){return new Pe(Xe.NamedRegExp.create("(?<integer>i+)"))}};s(Pe,"IntegerGroupParser");ut.__decorate([en.cache],Pe,"digits",null);ut.__decorate([Cu.lazy],Pe,"integerFormat",null);S.IntegerGroupParser=Pe});var za=w(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.implicitMoneyParser=me.findDecimalSeparator=me.flexibleMoneyParser=me.FlexibleMoneyParser=me.flexibleParse=void 0;var Iu=R(),pr=Mu(),vy=Ci(),$a=Le(),ft=G(),_u=X(),xy=jr(),Sy=oe(),Dy=Fe(),Py=Lr(),Ay=re(),Ae=De(),Fu=qa();function Cy(r,e="en",t){return new Ke(e,t).parse(r)}s(Cy,"flexibleParse");me.flexibleParse=Cy;var Ke=class{constructor(e,t){this.locale=e,this.options=t}get pattern(){return Ke.patternFor(this.locale)}static patternFor(e){return $a.NamedRegExp.create((0,Ae.atBoundaryOnly)(`(?<currency>${pr.CurrencySymbols.get(e).pattern})?(?<literal>[${Ae.Spaces.spaces}])?(?<number>${(0,Ae.numberPattern)(e)})(?<literal>[${Ae.Spaces.spaces}])?(?<currency>${pr.CurrencySymbols.get(e).pattern})?`))}parse(e){try{return this.parseSingle(this.pattern.match((0,$a.removeUnicodeMarkers)(e)))}catch(t){throw new Error(`Unable to parse ${e}`)}}parseAll(e){return(0,Ay.array)(this.pattern.exec((0,$a.removeUnicodeMarkers)(e)),(0,Ae.mapIgnoreError)(t=>this.parseSingle(t)))}parseSingle(e){let{currency:t}=(0,ft.single)(e,(0,ft.filter)(a=>a.name==="currency"&&a.value!==void 0),(0,ft.flatMap)(a=>{try{let o=pr.CurrencySymbols.get(this.locale).parse(a.value,this.options&&this.options.strategy||(0,Fu.infer)(this.locale));return[{currency:o,exactMatch:o===a.value}]}catch(o){return[]}}),(0,ft.sort)((0,_u.by)("exactMatch",_u.descending)),(0,ft.first)()),n=(0,ft.single)(e,(0,ft.find)(a=>a.name==="number"&&a.value!==void 0)).value,i=(0,Ae.numberParser)(this.options&&this.options.decimalSeparator||Ga(t,n),this.locale);return(0,pr.money)(t,i.parse(n))}};s(Ke,"FlexibleMoneyParser");Iu.__decorate([Dy.lazy],Ke.prototype,"pattern",null);Iu.__decorate([Sy.cache],Ke,"patternFor",null);me.FlexibleMoneyParser=Ke;function Ty(r="en",e){return new Ke(r,e)}s(Ty,"flexibleMoneyParser");me.flexibleMoneyParser=Ty;function ju(r){return r==="."?",":"."}s(ju,"flip");function Ga(r,e){let t=(0,Ae.separatorsOf)(e);if(t.length===0)return".";let n=t[t.length-1],i=e.length-e.lastIndexOf(n)-1,a=(0,pr.decimalsFor)(r);if(t.length===1){if(i===3){if(a===3)throw new Error(`Can not parse ${e} as separator is ambiguous`);return ju(n)}return(0,Ae.decimalSeparator)(n)}return(0,xy.unique)(t).length===1?ju(n):(0,Ae.decimalSeparator)(n)}s(Ga,"findDecimalSeparator");me.findDecimalSeparator=Ga;var Na=class{constructor(e,t,n=new Ae.NumberParser(i=>(0,Py.get)(()=>Ga(e,i),(0,Ae.inferDecimalSeparator)(t)),t)){this.currency=e,this.parser=n}parse(e){let t=this.parser.parse(e);return{currency:this.currency,amount:t}}parseAll(e){return this.parser.parseAll(e).map(t=>({amount:t,currency:this.currency}))}};s(Na,"ImplicitMoneyParser");function Oy({currency:r,locale:e="en",strategy:t=(0,Fu.infer)(e)}){return r?new Na(pr.CurrencySymbols.get(e).parse(r,t),e):new vy.FailParser}s(Oy,"implicitMoneyParser");me.implicitMoneyParser=Oy});var nc=k(G()),ic=k(X()),fp=k(G());function mp(r){switch(typeof r){case"undefined":return!0;case"string":return r.trim()==="";case"number":return isNaN(r);case"object":{if(r==null)return!0;if(m.isObject(r))return Object.keys(r).length===0;if(Array.isArray(r))return r.length===0}}return!1}s(mp,"isEmpty");var je=class{static parse(e){if(typeof e!="number"&&L.isEmpty(e))return;let t=Number(e);if(!isNaN(t))return t}static isNumber(e){return typeof e=="number"&&!isNaN(e)}};s(je,"Numbers");var qt=class{static noWhitespace(e){return e&&typeof e=="string"?e.replace(/\s+/g,""):""}static startWith(e,t){return e?e.substring(0,t.length)===t:e===t}static endsWith(e,t){return e.substring(e.length-t.length,e.length)===t}static isEmpty(e){return e===void 0||e===null?!0:e.trim().length===0}static isEmail(e){return typeof e=="string"&&this.validEmailPattern.test(e)}static isLowerCase(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}static isUpperCase(e){return e===e.toUpperCase()&&e!==e.toLowerCase()}static kebabCase(e){return qt.delimiterCase(e,"-")}static snakeCase(e){return qt.delimiterCase(e,"_")}static delimiterCase(e,t){return e.replace(/([A-Z][a-z]+|\d+)/gm,`${t}$1`).replace(new RegExp(`^${t}`),"").toLowerCase()}static titleCase(e){return qt.isEmpty(e)?"":e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}static camelCase(e){return qt.isEmpty(e)?"":e.replace(/([A-Za-z]+|\d+)/gm,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()).replace(new RegExp("^."),t=>t.toLowerCase()).replace(new RegExp(/[_\-\s]/g),"")}},L=qt;s(L,"Strings"),L.validEmailPattern=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;function Ar(r,e,t){if(e(r))return t(r);switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(n=>Ar(n,e,t));if(m.isObject(r))return m.keys(r).sort().reduce((n,i)=>{let a=r[i];return n[i]=Ar(a,e,t),n},{})}}return r}s(Ar,"walkValues");function Hn(r,e){switch(typeof r){case"undefined":return;case"object":{if(r===null)return null;if(Array.isArray(r))return r.map(t=>Hn(t,e));if(m.isObject(r))return m.keys(r).sort().reduce((t,n)=>{let i=r[n];return t[e(String(n))]=Hn(i,e),t},{})}}return r}s(Hn,"walkKeys");var m=class{static isObject(e){return e&&typeof e=="object"&&(e.constructor===Object||/Object.*native/.test(e.constructor.toString()))}static keys(e){return Object.keys(e)}static values(e){return Object.keys(e).map(t=>e[t])}static entries(e){return Object.keys(e).map(t=>[t,e[t]])}static removeEmpty(e){return e&&(m.isObject(e)?Object.keys(e).reduce((t,n)=>{let i=m.removeEmpty(e[n]);return mp(i)||(t[n]=i),t},{}):e)}static sort(e){return e&&(Array.isArray(e)?e.map(m.sort):m.isObject(e)?Object.keys(e).sort().reduce((t,n)=>{let i=e[n];return t[n]=m.sort(i),t},{}):e)}static toLowerCase(e){return typeof e=="string"?e.toLowerCase():Array.isArray(e)?e.map(m.toLowerCase):f(()=>m.isObject(e))?Object.entries(e).reduce((t,[n,i])=>(t[n]=m.toLowerCase(i),t),{}):e}static snakeCase(e){return Hn(e,L.snakeCase)}static camelCase(e){return Hn(e,L.camelCase)}static filter(e,t){let n=m.keys(e).filter(t);return m.pick(e,...n)}static omit(e,...t){return t.reduce((n,i)=>(Reflect.deleteProperty(n,i),n),e)}static pick(e,...t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}};s(m,"Objects");var A=class{static from(e){return Array.from(e)}static find(e,t){if(e.find)return e.find(t);let[n]=e.filter(t);return n}static findLastIndex(e,t){let n=[...e].reverse().findIndex(t);return n===-1?n:e.length-n-1}static toObject(e){return e.reduce((t,n)=>(Object.keys(n).forEach(i=>{i in t||(t[i]=n[i])}),t),{})}static flatten(e){return e.reduce((t,n)=>t.concat(n),[])}static flatMap(e,t){return e.flatMap?e.flatMap(t):A.flatten(e.map(t))}static unique(e){return Array.from(new Set(e))}static clean(e){return e.filter(Boolean)}static trim(e){return e.map(t=>t.trim())}static includes(e,t){return"includes"in e?e.includes(t):e.indexOf(t)!==-1}static first(e){return e[0]}static last(e){return e[e.length-1]}static safeReverse(e){return e?e.slice().reverse():[]}static shuffle(e){return e.map(t=>({value:t,order:Math.random()})).sort((0,ic.by)("order")).map(({value:t})=>t)}};s(A,"Arrays");var Kn=class{static path(e){let t=[e];for(;e.parentElement;)e=e.parentElement,t.push(e);return t}};s(Kn,"Elements");function f(r,e=void 0){try{let t=r();return typeof t=="undefined"?e:t}catch(t){return e}}s(f,"get");function yp(r,e){let t=e.toLowerCase(),n=A.find(Object.keys(r),a=>a.toLowerCase()===t);if(!n)return;let i=r[n];return typeof i=="string"?i.trim():i}s(yp,"getValue");function Un(r,...e){if(!r)return[];if(Array.isArray(r))return A.clean(A.flatten(r.map(t=>Un(t,...e))));if(typeof r=="object"){let[t,...n]=e,i=yp(r,t);return typeof i=="object"?Un(i,...n):n.length===0&&Boolean(i)?[i]:[]}return[]}s(Un,"getAll");var ne=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof module!="undefined"?module:Function("return this")())();function Bn(r,e,t){let n=r[e];return typeof n=="undefined"?r[e]=t:Array.isArray(n)?n.indexOf(t)==-1&&n.push(t):r[e]=[n,t],r}s(Bn,"accumulateMultipleValues");function gp(r,e,t,n=i=>i){let i=[],a=0,o;for(;(o=r.exec(e))!=null;)i.push(n(e.substring(a,o.index))),i.push(t(o)),a=r.lastIndex;return i.push(n(e.substring(a))),i.join("")}s(gp,"regexReplace");function sc(r){return gp(/\w+/g,r,e=>hp(e[0]))}s(sc,"titleCase");function hp(r){return r.substr(0,1).toUpperCase()+r.substr(1).toLowerCase()}s(hp,"caseWord");function ac(r,e){return r.slice(0,e)}s(ac,"limit");function oc(r){return f(()=>A.last(r.constructor.name.split("$")),"")}s(oc,"getClassName");var cc=k(oe()),lc=k(Fe());function ue(r=ne){return r.triptease=r.triptease||{},r.triptease.onboard=r.triptease.onboard||{},{triptease:r.triptease,onboard:r.triptease.onboard}}s(ue,"globalObjects");var rt;(function(n){n.Native="native",n.NonNative="non-native",n.NotImplemented="not-implemented"})(rt||(rt={}));function uc(r,e){return f(()=>e.split(".").reduce((t,n)=>t[n],r))}s(uc,"getProperty");function vp(r){return r==null?rt.NotImplemented:typeof r=="function"?r.toString().includes("native code")?rt.Native:rt.NonNative:rt.Native}s(vp,"isNative");var $n=class{static exposeApi(){let e=ue(ne).triptease;e.native||(e.native=$n)}static getProperty(e){let t=uc(ne,e);return vp(t)!==rt.NonNative?t:uc($n.window,e)}static get window(){let e=ne;if(!e.document)return e;try{let t=e.document,n=t.querySelector("[name='triptease.native']");if(n)return n.contentWindow;let i=t.createElement("iframe");return i.style.display="none",i.setAttribute("title","blank"),i.setAttribute("aria-hidden","true"),i.setAttribute("name","triptease.native"),t.documentElement.appendChild(i),i.contentWindow}catch(t){return e}}},J=$n;s(J,"Native"),_e([cc.cache],J,"getProperty",1),_e([lc.lazy],J,"window",1);var xp=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}\.\d{3}Z)?$/;function Sp(r){return Ar(r,e=>typeof e=="string"&&xp.test(e),e=>{let t=new Date(e);return isNaN(t.valueOf())?e:t})}s(Sp,"convertDates");var Dp=J.getProperty("JSON.parse"),dc=J.getProperty("JSON.stringify"),Pp=J.getProperty("Date.prototype.toISOString"),Ap=J.getProperty("atob"),Cp=J.getProperty("btoa"),B=class{static parse(e){return Dp(e)}static parseWithDates(e){return Sp(B.parse(e))}static stringify(e){return dc(this.clean(e))}static clean(e){return Ar(e,t=>{let n=typeof t;switch(n){case"undefined":case"string":case"number":case"boolean":return!0;case"object":{if(t===null)return!0;if(Array.isArray(t)||m.isObject(t))return!1;if("toJSON"in t)return!0}}throw new Error(`Illegal JsonValue: ${n} ${t} `)},t=>t instanceof Date?Pp.call(t):t)}static atob(e){try{let t=Ap(e);return B.parseWithDates(t)}catch(t){}}static btoa(e){try{if(!m.isObject(e))return;let t=dc(e);return Cp(t)}catch(t){}}};s(B,"Json");var I=class{static same(e,t){return B.stringify(e)===B.stringify(t)}static isSuperset(e,t){return e===null||t===null?I.same(e,t):Array.isArray(e)&&Array.isArray(t)?e.length>t.length?!1:e.every(n=>t.some(i=>I.isSuperset(n,i))):f(()=>m.isObject(e))&&f(()=>m.isObject(t))?Object.keys(e).reduce((n,i)=>n&&I.isSuperset(e[i],t[i]),!0):I.same(e,t)}static compress(e){let t=I.groupValues(e);return this.compressGrouped(t)}static compressGrouped(e){return Object.entries(e).reduce(({shared:t,unique:n},[i,a])=>{if(f(()=>m.isObject(a))){let o=I.compressGrouped(a);Object.keys(o.shared).length>0&&(t[i]=o.shared),o.unique.forEach((c,l)=>{n[l]=n[l]||{},Object.keys(c).length>0&&(n[l][i]=c)})}return Array.isArray(a)&&a.forEach((o,c)=>{n[c]=n[c]||{},A.unique(a.map(l=>B.stringify(l))).length===1?t[i]=o:o!==void 0&&(n[c][i]=o)}),{shared:t,unique:n}},{shared:{},unique:[]})}static groupValues(e){let t=Array.from(e.reduce((o,c)=>Object.keys(c).reduce((l,p)=>l.add(p),o),new Set)),[n,i]=e.reduce((o,c)=>t.reduce(([l,p],h)=>{let D=c[h];return f(()=>m.isObject(D))?(p[h]=p[h]||[],p[h].push(D)):(l[h]=l[h]||[],l[h].push(D)),[l,p]},o),[{},{}]),a=Object.entries(i).reduce((o,[c,l])=>(o[c]=I.groupValues(l),o),{});return g(g({},n),a)}static decompress(e){return e.unique.map(t=>this.merge(e.shared,t))}static merge(e,t){return[...Object.keys(e),...Object.keys(t)].reduce((i,a)=>{let o=e[a],c=t[a];return f(()=>m.isObject(o))&&f(()=>m.isObject(c))?i[a]=I.merge(o,c):i[a]=c!=null?c:o,i},{})}};s(I,"JsonValues");function ce(r,e=!0){return r?(r.indexOf("?")==0&&(r=r.substring(1,r.length)),r.split("&").map(function(t){return t.split("=")}).reduce(function(t,n){let i=n[0],a=n[1];if(!i)return t;let o=pc(a),c=e?Tp(o):o;return Bn(t,pc(i),c)},{})):{}}s(ce,"queryObject");function pc(r){return f(()=>decodeURIComponent(r.replace(/\+/g,"%20")),r)}s(pc,"decode");function Tp(r){try{return B.parse(r)}catch(e){return r}}s(Tp,"coerce");var Fs=class{constructor(e){let t=Fs.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Uri: ${e}`);let[,,n,,i,a,,o,,c]=t;this.scheme=n,this.authority=i?new Gn(i):void 0,this.path=a,this.query=o,this.fragment=c}toString(){let e=[];return typeof this.scheme!="undefined"&&e.push(this.scheme,":"),typeof this.authority!="undefined"&&e.push("//",this.authority.toString()),e.push(this.path),typeof this.query!="undefined"&&e.push("?",this.query),typeof this.fragment!="undefined"&&e.push("#",this.fragment),e.join("")}get host(){return this.authority&&this.authority.host}get port(){return this.authority&&this.authority.port}get userInfo(){return this.authority&&this.authority.userInfo}},N=Fs;s(N,"Uri"),N.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var js=class{constructor(e){let t=js.RFC_3986.exec(e);if(!t)throw new Error(`Invalid Authority: ${e}`);let[,n,i,a]=t;this.userInfo=n,this.host=i,this.port=a}toString(){let e=[];return typeof this.userInfo!="undefined"&&e.push(this.userInfo,"@"),typeof this.host!="undefined"&&e.push(this.host),typeof this.port!="undefined"&&e.push(":",this.port),e.join("")}},Gn=js;s(Gn,"Authority"),Gn.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/;var fc=J.getProperty("console.log"),Op=J.getProperty("console.error"),Rp=J.getProperty("console.debug"),Ls=class{constructor(e=fc,t=Op,n=Rp||fc){this.log=e;this.error=t;this.debug=n}};s(Ls,"ConsoleLogger");var Cr=class{constructor(){this.log=s(()=>{},"log");this.error=s(()=>{},"error");this.debug=s(()=>{},"debug")}};s(Cr,"NoOpLogger");var mc="triptease-debug",kp=256;function qs(r,e=mc){let t=f(()=>{var n;return ce((n=r.location)==null?void 0:n.search,!1)[e]})||f(()=>{var n;return ce(new N((n=r.location)==null?void 0:n.originalHref).query,!1)[e]})||f(()=>{var n,i;return(i=(n=r.process)==null?void 0:n.env)==null?void 0:i.DEBUG})||f(()=>{var n;return((n=r.localStorage)==null?void 0:n.getItem)&&r.localStorage.getItem(e)})||f(()=>{var n;return((n=r.sessionStorage)==null?void 0:n.getItem)&&r.sessionStorage.getItem(e)})||"";return f(()=>t.substring(0,kp),"")}s(qs,"globalParameter");function Ep(r){return qs(r,mc).split(",").map(e=>e.trim())}s(Ep,"debugPatterns");function yc(r){let e=r.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp("^"+e+"$")}s(yc,"wildcardToRegexp");function Mp(r,e=ne){try{let t=Ep(e),n=t.filter(i=>i[0]==="!").map(i=>i.substr(1));return n.length>0?!n.some(i=>yc(i).test(r)):t.some(i=>i==="true"||yc(i).test(r))}catch(t){return!1}}s(Mp,"nameMatches");var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR"})(nt||(nt={}));var Hs=class{constructor(e,t,n=new Ls){this.name=e;this.logLevel=t;this.console=n}debug(e,...t){this.logLevel.valueOf()>0||this.console.debug(`[${this.name}] ${e}`,...t)}log(e,...t){this.logLevel.valueOf()>1||this.console.log(`[${this.name}] ${e}`,...t)}error(e,...t){this.logLevel.valueOf()>2||this.console.error(`[${this.name}] ${e}`,...t)}};s(Hs,"NamedLogger");function E(r,e=ne){let t=f(()=>{var n,i,a;return nt[((a=(i=(n=e.process)==null?void 0:n.env)==null?void 0:i.LOG_LEVEL)==null?void 0:a.toUpperCase())||"DEBUG"]},0);return Mp(r,e)?new Hs(r,t):new Cr}s(E,"namedLogger");var Ig=new Set(["Unknown","PossibleIdentifier"]),Nn=new Set(["HotelName","HotelCode","ChainCode"]);function Ks(r){return r&&typeof r=="object"&&r.constructor===Object&&typeof r["@type"]=="string"}s(Ks,"isStructuredData");function gc(r,e){return Ks(r)&&(typeof e=="function"?e(r["@type"]):r["@type"]===e)}s(gc,"isStructuredDataType");function hc(r){return gc(r,"LodgingReservation")}s(hc,"isLodgingReservation");var Te={cookieBot:"cookieBot",klaro:"klaro",google:"google",defaultNoConsentMode:"defaultNoConsentMode",defaultAutoConsentMode:"defaultAutoConsentMode"};function bc(r){return r&&typeof r=="object"&&r.checkin instanceof Date&&r.checkout instanceof Date}s(bc,"hasSearchDates");var v;(function(p){p.Search="Search",p.RoomsAndRates="RoomsAndRates",p.Confirmation="Confirmation",p.Checkout="Checkout",p.Payment="Payment",p.Group="Group",p.Advert="Advert",p.Partial="Partial",p.Unknown="Unknown"})(v||(v={}));var Ip=[v.Payment,v.Confirmation,v.RoomsAndRates,v.Checkout,v.Search,v.Partial,v.Group,v.Unknown,v.Advert];function wc(r){return Ip.indexOf(r)}s(wc,"pageRanking");var it;(function(i){i.Room="Room",i.Fee="Fee",i.Tax="Tax",i.Unknown="Unknown"})(it||(it={}));var zn;(function(n){n.Singleton="Singleton",n.ApplicationHost="ApplicationHost",n.DataSource="DataSource"})(zn||(zn={}));var vc;(function(i){i.PENDING="Pending",i.SKIPPED="Skipped",i.FAILED="Failed",i.PASSED="Passed"})(vc||(vc={}));var xc;(function(a){a.SCRIPT_PRESENT="Script Present",a.SCRIPT_LOADED="Script Loaded",a.INTEGRATION_ID_MATCHES="Integration Id Matches",a.PAGE_EVALUATED="Page Evaluated",a.MESSAGING_ACTIVE="Messaging Active"})(xc||(xc={}));var Y;(function(i){i.Enabled="Enabled",i.Disabled="Disabled",i.Strict="Strict",i.NotConfigured="NotConfigured"})(Y||(Y={}));function Kt(r){return r?typeof r=="object"&&("integrationId"in r||"clientKey"in r||"apiKey"in r||"identifiers"in r||"type"in r):!1}s(Kt,"isScrapedIdentifiers");function Wn(r){return r&&typeof r=="object"?r.constructor===Date&&!isNaN(r.getTime()):!1}s(Wn,"isDate");function Sc(r){if(r===void 0||!r.type)return!1;switch(r.type){case v.RoomsAndRates:return Us(r);case v.Confirmation:return Bs(r);case v.Checkout:return Lp(r);default:return!0}}s(Sc,"isPageValid");function _p(r){return Array.isArray(r)&&r.some(e=>e.price>0&&e.currency)}s(_p,"hasValidRates");function Fp(r){return Wn(r.checkin)&&Wn(r.checkout)&&r.checkin.getTime()<r.checkout.getTime()}s(Fp,"hasDates");function Dc(r){return typeof r.adults=="number"&&r.adults>0&&typeof r.children=="number"&&r.children>=0}s(Dc,"hasOccupancy");function jp(r){let{rateDetails:e}=r;return Array.isArray(e)&&e.every(t=>Dc(t))}s(jp,"hasCapacity");function Us(r){return r&&typeof r=="object"?Fp(r)&&(Dc(r)||jp(r))&&(_p(r.rateDetails)||["noAvailability","searchInProgress"].includes(r.ratesModified)):!1}s(Us,"isRoomsAndRatesPageData");function Bs(r){return!(r&&typeof r=="object")||typeof r.reference!="string"||["","undefined","null"].includes(r.reference.trim())?!1:r.reservationStatus==="cancelled"||Array.isArray(r.reservations)&&r.reservations.every(e=>e.reservationStatus==="cancelled")?!0:typeof r.price=="number"&&typeof r.currency=="string"}s(Bs,"isConfirmationPageData");function Lp(r){var e,t;return r&&typeof r=="object"?typeof((e=r.pii)==null?void 0:e.email)=="string"&&Array.isArray((t=r.pii)==null?void 0:t.processingConditions)&&r.pii.processingConditions.length>0&&!L.isEmpty(r.pii.email)&&L.isEmail(r.pii.email):!1}s(Lp,"isCheckoutPageData");function qp(r){if(r===void 0||!r.type)return!1;switch(r.type){case v.RoomsAndRates:return Tr(r);case v.Confirmation:return Hp(r);case v.Checkout:return Kp(r);default:return!1}}s(qp,"isPartialPage");function Tr(r){return r&&typeof r=="object"?Array.isArray(r.rateDetails)&&r.rateDetails.length>0||!!r.ratesModified:!1}s(Tr,"isPartialRoomsAndRates");function Hp(r){return r&&typeof r=="object"?typeof r.reference=="string"&&!L.isEmpty(r.reference):!1}s(Hp,"isPartialConfirmation");function Kp(r){return r&&typeof r=="object"?typeof r.pii.email=="string"&&!L.isEmpty(r.pii.email):!1}s(Kp,"isPartialCheckout");function Pc(r){let[e]=r.map(m.removeEmpty).filter(qp);if(!!e)return T(g({},e),{type:v.Partial,partialType:e.type})}s(Pc,"findPartial");function $s(r){let{rateDetails:e}=r;if(!e)return[];let t=e.filter(n=>n.price>0&&!L.isEmpty(n.currency));return A.unique(t.map(n=>n.currency)).length>1?[]:t}s($s,"validRates");function Ac(r){let e=new Set;return r.reduce((t,n)=>{let i=B.stringify(n);return e.has(i)||(e.add(i),t.push(n)),t},[])}s(Ac,"deDuplicateRates");function Cc(r){var e,t;if(r===void 0||!r.type)return r;switch(r.type){case v.RoomsAndRates:let n=g({},r);return"ratesModified"in n&&n.ratesModified==="noAvailability"&&(n.adults=(e=n.adults)!=null?e:2,n.children=(t=n.children)!=null?t:0),n;default:return r}}s(Cc,"addDefaultData");function Up(r){try{let{target:e,method:t}=Gp(r.type);if(e&&t)return!0}catch(e){}return!1}s(Up,"isOnboardMessage");var Or=class{constructor(e,t,n=Bp,i=E("messaging")){this.listener=e;this.allowedOrigins=n;this.logger=i;this.target=this.listener!==t?t:void 0}addListener(e){this.listener&&this.listener.addEventListener("message",t=>{this.disallowedOrigin(t)||!Up(t.data)||e(t.data,new Or(void 0,t.source||this.target))})}disallowedOrigin(e){return e.origin&&this.allowedOrigins.length>0&&this.allowedOrigins.indexOf(new N(e.origin).host)===-1}send(e){if(this.target)try{this.target.postMessage(e,"*")}catch(t){this.target.postMessage(JSON.parse(JSON.stringify(e)),"*")}}};s(Or,"WindowHandler");var Bp=["onboard.triptease.io","localhost"],$p=/^(.*)\.([^.]+)$/;function Gp(r){let[,e,t]=r.match($p)||[];return{target:e,method:t}}s(Gp,"targetAndMethod");function Vn(r){let e={};return function(...t){let n=JSON.stringify(t),i=e[n];return typeof i!="undefined"?i:e[n]=r(...t)}}s(Vn,"caching");function Np(r){return r.document.querySelector('iframe[name="triptease.onboard.kernel"]')}s(Np,"kernelFrame");function Tc(r){let e=Np(r);if(e&&e.contentWindow)return new Or(r,e.contentWindow)}s(Tc,"handlerFor");function Oc(r){return r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&"message"in r&&typeof r.message=="string"&&"stack"in r&&typeof r.stack=="string"}s(Oc,"isError");var Jn,zp=new Uint8Array(16);function Gs(){if(!Jn&&(Jn=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Jn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jn(zp)}s(Gs,"rng");var Rc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wp(r){return typeof r=="string"&&Rc.test(r)}s(Wp,"validate");var kc=Wp;var z=[];for(Yn=0;Yn<256;++Yn)z.push((Yn+256).toString(16).substr(1));var Yn;function Vp(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(z[r[e+0]]+z[r[e+1]]+z[r[e+2]]+z[r[e+3]]+"-"+z[r[e+4]]+z[r[e+5]]+"-"+z[r[e+6]]+z[r[e+7]]+"-"+z[r[e+8]]+z[r[e+9]]+"-"+z[r[e+10]]+z[r[e+11]]+z[r[e+12]]+z[r[e+13]]+z[r[e+14]]+z[r[e+15]]).toLowerCase();if(!kc(t))throw TypeError("Stringified UUID is invalid");return t}s(Vp,"stringify");var Ec=Vp;function Jp(r,e,t){r=r||{};var n=r.random||(r.rng||Gs)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Ec(n)}s(Jp,"v4");var Ns=Jp;var Yp=s(()=>f(()=>crypto.randomUUID())||Ns(),"uuid"),Zn=class{generate(e){if(typeof e!="undefined")throw new Error("UuidGenerator does not support custom lengths");return Yp().replace(/-/g,"")}};s(Zn,"UUIDGenerator");var zs=class{constructor(e,t){this.messaging=e;this.idGenerator=t}get(e,t,n){return(...i)=>y(this,null,function*(){let a=this.idGenerator.generate(),{payload:o}=yield this.messaging.handle({type:"triptease.onboard.request",requestType:String(t),payload:i,correlationId:a});if(Oc(o))throw o;return o})}};s(zs,"MessageProxy");function Xn(r,e=new Zn){return new Proxy({},new zs(r,e))}s(Xn,"messageProxy");var Qn=class{constructor(e,t=Xn(e)){this.proxy=t;this.applicationConfig=Vn(e=>y(this,null,function*(){return yield this.proxy.applicationConfig(e)}));this.generateClientConfig=Vn(e=>y(this,null,function*(){return yield this.proxy.generateClientConfig(e)}));this.generateConfig=Vn(e=>y(this,null,function*(){return yield this.proxy.generateConfig(e)}))}};s(Qn,"KernelProxy");var ei=class{constructor(e,t){this.providers=e;this.logger=t}scrape(){return y(this,null,function*(){return(yield Promise.all(this.providers.map(t=>y(this,null,function*(){try{return this.clean(yield t.scrape())}catch(n){return this.logger.error("Scraper threw error, probable identification failure",n),{}}})))).reduce((t,n)=>g(g({},t),n),{})})}clean(e){let t=m.removeEmpty(e);return t.identifiers&&(t.identifiers=t.identifiers.filter(n=>!!n.identifier).map(n=>m.removeEmpty({identifier:n.identifier.toString().trim(),type:n.type,identifierType:n.identifierType,source:n.source})).filter(n=>!L.isEmpty(n.identifier))),t}};s(ei,"CompositeScraper");function Rr(r){if(L.isEmpty(r))return{};if(r.indexOf(":")!==-1){let[e,t]=r.split(":");return{clientKey:e,identifiers:[{identifier:t,type:"Trusted",identifierType:"HotelCode"}]}}return{apiKey:r}}s(Rr,"processApiKey");function ti(r){if(!Kt(r))return{};let{integrationId:e,clientKey:t,apiKey:n,identifiers:i,type:a,defaultIdentification:o}=r,c=Rr(n);return e&&(c.integrationId=e),t&&(c.clientKey=t),i&&(c.identifiers=i),a&&(c.type=a),o!=null&&(c.defaultIdentification=o),c}s(ti,"processIdentifiers");var Ut=class{constructor(e){this.window=e;this.scripts=new Set}static create(e){let t=ue(e).onboard,n=t.stackScriptFinder;return n||(t.stackScriptFinder=new Ut(e))}capture(){let e=Xp();e&&this.scripts.add(e);let t=this.window.document.currentScript;t&&"src"in t&&this.scripts.add(t.src)}get(){return Array.from(this.scripts).map(e=>new N(e))}};s(Ut,"StackScriptFinder");var Zp=/(https?.*):\d+:\d+/;function Xp(){try{throw new Error}catch(r){if(!r.stack)return;let e=r.stack.match(Zp);return e?e[1]:void 0}}s(Xp,"rawScript");var ze=class{static find(e){return this.scripts(e).map(t=>new N(t.src))}static scripts(e){let n=["bootstrap.js","/paperboy/","/identity-service/confirm"].map(a=>`script[src*="${a}"][src*="triptease.io"]`);n.push('script[src*="triptease.net"]');let i=n.join(", ");return e.querySelectorAll(i)}};s(ze,"ScriptsFinder");var kr=class{static difference(e,t){return Array.from(e).reduce((n,i)=>t.has(i)?n:n.add(i),new Set)}};s(kr,"Sets");var Er=E("events"),ri=class{constructor(e,t){this.timers=e;this.handle=t;this.finders=new Set;this.keepers=new Set;this.handleEvent=s(e=>y(this,null,function*(){try{Er.debug("CreatedOrDeletedEvents: Checking for new created items");let t=new Set(Array.from(this.finders).flatMap(a=>a())),n=kr.difference(t,this.keepers),i=kr.difference(this.keepers,t);this.keepers=t,(n.size>0||i.size>0)&&(Er.log(`CreatedOrDeletedEvents: ${n.size} created, ${i.size} deleted element detected - firing event`),yield this.handle(e))}catch(t){Er.error("CreatedOrDeletedEvents.handleEvent threw while polling",t)}}),"handleEvent")}start(){return y(this,null,function*(){Er.log("Start polling for created items"),this.id=this.timers.setInterval(this.handleEvent,1e3)})}stop(){return y(this,null,function*(){Er.log("Stop polling for created items"),this.id&&(this.timers.clearInterval(this.id),this.id=void 0)})}watch(e){e().forEach(n=>this.keepers.add(n)),this.finders.add(e)}};s(ri,"CreatedOrDeletedEvents");function Mc(r,e){return()=>Array.from(r.querySelectorAll(e))}s(Mc,"selectorFinder");var Qp=J.getProperty("Date"),ni=class{now(){return new Qp}};s(ni,"NativeClock");var ii=class{now(){return new Date}};s(ii,"SystemClock");function Ic(r){return new Promise(e=>{this.setTimeout(()=>{e()},r)})}s(Ic,"delay");var ge=class{constructor(e=new ii){this.clock=e;this.delay=Ic.bind(this);this.delay=Ic}task(e){return y(this,null,function*(){return yield this.delay(0),e()})}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}setInterval(e,t){return setInterval(e,t)}clearInterval(e){clearInterval(e)}requestIdleCallback(e,t){let n=t?t.timeout:1,i=this.clock.now().getTime()+n,a=this;return this.setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(a.clock.now().getTime()-i))}})},n)}cancelIdleCallback(e){this.clearTimeout(e)}};s(ge,"SystemTimers");var Bh=new ge;var ef=E("events"),si=class{constructor(e,t){this.window=e;this.delegate=t;this.first=!0;this.fire=s(e=>y(this,null,function*(){if(this.window.document.hidden&&!this.first){ef.log("Document hidden - skipping",e);return}yield this.delegate.fire(e),this.first=!1}),"fire")}listen(e){return y(this,null,function*(){yield this.delegate.listen(e)})}removeListener(e){this.delegate.removeListener(e)}};s(si,"VisibilityGuard");var Ws=E("events"),ai=class{constructor(e,t){this.delegate=e;this.running=t;this.fire=s(e=>y(this,null,function*(){if(this.running.value){Ws.log("Already running - skipping",e);return}this.running.value=!0,yield this.delegate.fire(e),this.running.value=!1}),"fire")}listen(e){return y(this,null,function*(){if(yield this.delegate.listen(e),this.running.value){Ws.log("Already running - firing immediately");try{yield e()}catch(t){Ws.log(t)}}})}removeListener(e){this.delegate.removeListener(e)}};s(ai,"EventsGuard");var _c=E("events"),oi=class{constructor(){this.handlers=[];this.fire=s(e=>y(this,null,function*(){_c.log(`Firing handlers(${this.handlers.length})`,e),yield Promise.all(this.handlers.map(t=>y(this,null,function*(){try{yield t()}catch(n){_c.log("Error while firing handler",n)}})))}),"fire")}listen(e){return y(this,null,function*(){this.handlers.push(e)})}removeListener(e){this.handlers=this.handlers.filter(t=>t!==e)}};s(oi,"EventsMultiplexer");var Fc=E("events"),ci=class{constructor(e,t){this.timers=e;this.delegate=t;this.timeoutMs=1e3;this.timerId=0;this.fire=s(e=>y(this,null,function*(){Fc.log(`Event observed, waiting for ${this.timeoutMs} ms quiet`,e),this.timers.clearInterval(this.timerId),this.timerId=this.timers.setTimeout(()=>y(this,null,function*(){Fc.log("Event quiet period ended, firing event",e),yield this.delegate(e)}),this.timeoutMs)}),"fire")}};s(ci,"EventCollapser");var tf=E("events"),li=class{constructor(e,t,n=.2,i=new ge){this.handle=e;this.running=t;this.idleThreshold=n;this.timers=i;this.lastState=!1;this.busy=!1;this.average=new Bt;this.idleHandler=s(e=>{let t=e.timeRemaining();this.running.value?this.busy=!1:t===0?this.busy=!0:(this.average=this.average.calculate(t),this.busy=this.average.percentage<-this.idleThreshold),this.busy?this.idleId=void 0:this.idleId=this.timers.requestIdleCallback(this.idleHandler,t===0?void 0:{timeout:t})},"idleHandler");this.intervalHandler=s(()=>y(this,null,function*(){this.stateHasChanged()&&this.isIdle()&&(tf.log("Browser idle"),yield this.handle("Idle")),this.average=new Bt,this.lastState=this.busy,this.idleId||(this.idleId=this.timers.requestIdleCallback(this.idleHandler))}),"intervalHandler")}start(){return y(this,null,function*(){this.intervalId=this.timers.setInterval(this.intervalHandler,1e3),this.idleId=this.timers.requestIdleCallback(this.idleHandler)})}stop(){return y(this,null,function*(){this.intervalId&&this.timers.clearInterval(this.intervalId),this.idleId&&this.timers.cancelIdleCallback(this.idleId)})}isIdle(){return!this.busy}stateHasChanged(){return this.lastState!==this.busy}};s(li,"IdleEvents");var Bt=class{constructor(e=0,t=0,n=0,i=0){this.value=e;this.count=t;this.difference=n;this.percentage=i}calculate(e){let t=this.count+1,n=e-this.value,i=n/this.value,a=this.value+n/t;return new Bt(a,t,n,i)}};s(Bt,"StreamingAverage");var ui=class{constructor(e,t){this.window=e;this.handle=t}start(){return y(this,null,function*(){this.window.addEventListener("visibilitychange",this.handle),this.window.addEventListener("popstate",this.handle),this.window.addEventListener("hashchange",this.handle),this.window.addEventListener("pageshow",this.handle),this.window.addEventListener("pagehide",this.handle),this.window.document.readyState!=="complete"?this.window.document.addEventListener("DOMContentLoaded",this.handle):yield this.handle("Document already loaded")})}stop(){return y(this,null,function*(){this.window.removeEventListener("visibilitychange",this.handle),this.window.removeEventListener("popstate",this.handle),this.window.removeEventListener("hashchange",this.handle),this.window.removeEventListener("pageshow",this.handle),this.window.removeEventListener("pagehide",this.handle),this.window.document.removeEventListener("DOMContentLoaded",this.handle)})}};s(ui,"WindowEvents");var di=class{constructor(){this.value=!1}};s(di,"Running");var Vs=class{constructor(e,t=new ge){this.window=e;let n=new di;this.sink=new si(e,new ai(new oi,n)),this.fire=new ci(t,this.sink.fire).fire,this.mutation=new $t(this.fire),this.created=new ri(t,this.fire),this.sources=[new li(this.fire,n),this.mutation,this.created,new ui(e,this.fire)]}watch(e){this.created.watch(e)}listen(e){return y(this,null,function*(){yield this.sink.listen(e)})}start(){return y(this,null,function*(){yield Promise.all(this.sources.map(e=>e.start()))})}stop(){return y(this,null,function*(){this.sources.forEach(e=>e.stop())})}removeListener(e){this.sink.removeListener(e)}};s(Vs,"DefaultEvents");function pi(r){let e=ue(r).triptease;return e.events=e.events||new Vs(r)}s(pi,"defaultEvents");var rf={characterData:!0,attributes:!0,childList:!0},$t=class{constructor(e){this.handle=e;this.observer=new MutationObserver(this.handle)}start(){return y(this,null,function*(){})}stop(){return y(this,null,function*(){this.observer.disconnect()})}static observe(e,t=rf){if(!("MutationObserver"in ne))return e;let n=pi(ne).mutation;return e instanceof HTMLInputElement||e instanceof HTMLSelectElement?e.addEventListener("change",n.handle):n.observer.observe(e,t),e}};s($t,"MutationEvents");function Js(r,e=ne){return f(()=>pi(e).watch(Mc(e.document,r))),r}s(Js,"watch");var Gt=class{constructor(e){this.parent=e}querySelector(e,t){let n=this.parent.querySelector(e);return n||void 0}querySelectorAll(e,t){return Array.from(this.parent.querySelectorAll(e))}};s(Gt,"DomSelectorApi");var he=class{constructor(e){this.parent=e}querySelector(e,t){var i;Js(e,(i=this.parent.ownerDocument)==null?void 0:i.defaultView);let n=this.parent.querySelector(e);return n?$t.observe(n,t):void 0}querySelectorAll(e,t){var n;return Js(e,(n=this.parent.ownerDocument)==null?void 0:n.defaultView),Array.from(this.parent.querySelectorAll(e)).map(i=>$t.observe(i,t)).filter(Boolean)}};s(he,"ObservableSelectorApi");var We=class{constructor(e){this.window=e}scrape(){let e=ze.find(new Gt(this.window.document)),t=Ut.create(this.window).get();return We.extract([...e,...t])}static extract(e){return m.removeEmpty(e.reduce((t,n)=>{let i=t.integrationId?[t.integrationId]:[],a=t.clientKey?[t.clientKey]:[],o=t.apiKey?[t.apiKey]:[],c=t.identifiers?t.identifiers:[],l=ce(n.query,!1),p=We.pathClientKey(n);p&&a.unshift(p),l.clientKey&&a.unshift(l.clientKey),i.unshift(l.integrationId);let h=We.queryApiKey(l),D=Rr(h);D.apiKey&&o.unshift(D.apiKey),D.clientKey&&a.unshift(D.clientKey),D.identifiers&&c.unshift(D.identifiers[0]);let[b]=i.filter(Boolean),[C]=a.filter(Boolean),[j]=o.filter(Boolean),H=c.filter(Boolean);return{integrationId:b,clientKey:C,apiKey:j,identifiers:H}},{}))}static queryApiKey(e){return e.apiKey||e.hotelkey||e.hotelKey||e["api-key"]||e.token}static pathClientKey(e){if(e.host==="paperboy.triptease.net"){let[,n]=e.path.match(/\/+([^/.]+)(?:\.js)?$/)||[];return n}let[,t=""]=e.path.match(/\/paperboy\/+([^/.]+)(?:\.js)?$/)||[];if(t!="paperboy"&&t!="confirm")return t}};s(We,"ScriptScraper");function jc(r,e){if(e){let t=f(()=>r.tt_apiKeys[e])||f(()=>r.ttApiKeys[e])||f(()=>r.document.apiKeys[e])||f(()=>r.document.ttApiKeys[e]);if(t)return Ys(t)}return Ys(f(()=>r.ttData.apiKey)||r.ttApiKey||r.document.ttApiKey)}s(jc,"getApiKey");function Lc(r){return Ys(r.tt_clientKey||r.document.ttClientKey||r.document.tt_clientKey)}s(Lc,"getClientKey");var nf=["CLIENT_KEY","API_KEY"];function Ys(r){if(!!r&&!nf.includes(r))return r}s(Ys,"cleanKey");var fi=class{constructor(e){this.window=e}scrape(){let e=jc(this.window),t=Rr(e);return m.removeEmpty(T(g({},t),{clientKey:Lc(this.window)}))}};s(fi,"LegacyScraper");var mi=class{constructor(e){this.pageData=e}scrape(){return ti(this.pageData)}};s(mi,"PageScraper");var sf=E("integration-executor"),yi=class{process(e){var i,a,o;let t=(i=e.reservations)==null?void 0:i.filter(m.isObject).map(c=>g({reservationStatus:"confirmed"},c)),n=T(g({},e),{basePrice:qc(e.price,e.basePrice),reservations:t,reservationStatus:cf(T(g({},e),{reservations:t}))});if(n.rooms=(o=n.rooms)!=null?o:(a=n.reservations)==null?void 0:a.length,n.reservations=lf(n),n.basePrice=n.basePrice||Hc("basePrice",n.reservations,n.currency),n.adults===void 0&&n.children===void 0){let c=af(n);n.adults=c.adults,n.children=c.children}return m.removeEmpty(n)}};s(yi,"ConfirmationProcessor");function af(r){return!Array.isArray(r.reservations)||r.reservations.length===0?{}:r.reservations.some(e=>e.adults===void 0||e.children===void 0)?{}:r.reservations.reduce((e,t)=>{var n,i;return e.adults+=(n=t.adults)!=null?n:0,e.children+=(i=t.children)!=null?i:0,e},{adults:0,children:0})}s(af,"calculateOccupancy");function of(r,e){return e?r?r>e:!0:!1}s(of,"isBasePriceValid");function qc(r,e){return of(r,e)?e:void 0}s(qc,"validatedBasePrice");function cf(r){let{reservationStatus:e,reservations:t}=r;if(e)return e;if(!t||t.length===0)return"confirmed";let n=new Set(t.map(i=>i.reservationStatus));return n.size===1?Array.from(n)[0]:n.has("pending")?"pending":"modified"}s(cf,"calculateReservationStatus");function lf(r){let{reference:e,price:t,currency:n,basePrice:i,reservationStatus:a}=r;if(!r.reservations)return[m.removeEmpty({reference:e,price:t,currency:n,basePrice:i,reservationStatus:a})];let o=r.reservations.map(l=>m.removeEmpty(T(g({},l),{basePrice:qc(l.price,l.basePrice)}))),c=Hc("basePrice",o,r.currency);return c!==void 0&&c===t?uf("basePrice","price",o):o}s(lf,"calculateReservations");function Hc(r,e,t){if(!!t&&e.every(n=>n[r]&&n.currency===t))return e.reduce((n,i)=>i.reservationStatus==="confirmed"?(n!=null?n:0)+i[r]:n,void 0)}s(Hc,"sumOfConfirmedReservations");function uf(r,e,t){return t.every(n=>!n[e])?(sf.log(`Changing label from ${r} to ${e} in reservations`),t.map(n=>m.removeEmpty(T(g({},n),{[e]:n[r],[r]:void 0})))):t}s(uf,"changeLabel");var Uc=k(re()),gi=k(G());var Mr;(function(n){n.Unknown="Unknown",n.Total="Total",n.Nightly="Nightly"})(Mr||(Mr={}));function Kc(r){return r===!0?Mr.Total:r===!1?Mr.Nightly:Mr.Unknown}s(Kc,"asPriceType");var df=E("integration-executor"),hi=class{constructor(e,t){this.window=e;this.history=t}process(e){let t=m.removeEmpty(T(g({},e),{type:v.RoomsAndRates}));return t.rateDetails=Ac($s(e)),t.ratesModified=this.calculateRatesModified(t),t.priceType=Kc(t.total),t}calculateRatesModified(e){let{ratesModified:t,promoCodes:n}=e;return t||(this.hasRatesChangedWithoutSearchChanging(e)?"roomOrRateFiltered":this.hasSearchChangedWithoutRatesChanging(e)||this.hasCurrencyChangedWithoutPricesChanging(e)?"untrusted":n&&n.length>0?"discountCode":this.window.document.querySelector("html.translated-ltr,html.translated-rtl")?"untrusted":"none")}hasCurrencyChangedWithoutPricesChanging(e){let t=this.history.find(i=>Tr(i));return!((t==null?void 0:t.rateDetails)&&(e==null?void 0:e.rateDetails)&&t.rateDetails.length===e.rateDetails.length&&e.rateDetails.length>0)||!!I.same(Bc(e.rateDetails,"currency"),Bc(t.rateDetails,"currency"))?!1:I.same(Zs(Nt(e.rateDetails),"currency"),Zs(Nt(t.rateDetails),"currency"))}hasSearchChangedWithoutRatesChanging(e){let t=this.history.find(n=>Tr(n));if(!t)return!1;if(!I.same(bi(e),bi(t)))return I.same(Nt(e.rateDetails),Nt(t.rateDetails))}hasRatesChangedWithoutSearchChanging(e){let t=this.history.find(o=>Tr(o));if(!t||!I.same(bi(e),bi(t)))return!1;let{rateDetails:n,ratesModified:i}=t;if(i==="roomOrRateFiltered")return!0;if(i==="searchInProgress"||i==="untrusted")return!1;let{rateDetails:a}=e;return!($s(t).length===0&&a&&a.length>0||I.isSuperset(Nt(n),Nt(a))||ff(n,a)||pf(n,a))}};s(hi,"RoomsAndRatesProcessor");function bi(r){let{apiKey:e,checkin:t,checkout:n,rooms:i,adults:a,children:o,total:c}=r;return m.removeEmpty({apiKey:e,checkin:t,checkout:n,rooms:i,adults:a,children:o,total:c})}s(bi,"searchParameters");function Nt(r){return Zs(r,"rateName","roomName","rateCode","roomCode")}s(Nt,"excludeNames");function Zs(r,...e){if(!r)return;let t=e.reduce((n,i)=>(n[i]=void 0,n),{});return r.map(n=>m.removeEmpty(g(g({},n),t)))}s(Zs,"excludeKeys");function Bc(r,...e){if(!!r)return r.map(t=>m.removeEmpty(e.reduce((n,i)=>(n[i]=t[i],n),{})))}s(Bc,"pickKeys");function pf(r,e){if(r.length===0||e.length===0||r.length!==e.length||r[0].currency===e[0].currency)return!1;let t=(0,Uc.array)(r.map(o=>o.price),(0,gi.zip)(e.map(o=>o.price)),(0,gi.map)(([o,c])=>c/o)),n=Math.min(...t),i=Math.max(...t),a=(i-n)/i;return df.debug(`Currency changed percentDifference ${a}`),a<.01}s(pf,"currencyChanged");function $c(r,e){return e.reduce((t,n)=>{let i=n[r];return i&&(t[i]=t[i]===void 0||n.price<t[i]?n.price:t[i]),t},{})}s($c,"cheapestPrices");function ff(r,e){let t=["rateName","roomName"];for(let n of t){let i=$c(n,r),a=$c(n,e);if(Object.keys(a).length>0&&I.same(i,a))return!0}return!1}s(ff,"isCollapsed");var Ll=k(De()),qi=k(De());function ql(r,e){return f(()=>qi.Days.between(qi.Days.startOf(r),qi.Days.startOf(e)))}s(ql,"nights");var Hi=543,Hl=2,Ki=class{constructor(e,t,n=new ni,i=new hi(e,t),a=new yi){this.window=e;this.history=t;this.clock=n;this.roomsAndRatesProcessor=i;this.confirmationProcessor=a}process(e){return this.additionalProcessing((()=>{switch(e.type){case v.RoomsAndRates:return this.roomsAndRatesProcessor.process(e);case v.Confirmation:return this.addDatesFromSearch(this.confirmationProcessor.process(e));case v.Checkout:return this.addOccupancyFromSearch(this.addDatesFromSearch(e));default:return e}})())}additionalProcessing(e){var i,a,o,c,l,p,h,D,b;let t=g({},e);if(bc(t)){let C=this.clock.now().getFullYear(),j=t.checkin.getFullYear(),H=j-C;Hi-Hl<=H&&H<=Hi+Hl&&(t.checkin.setFullYear(j-Hi),t.checkout.setFullYear(t.checkout.getFullYear()-Hi)),t.nights=ql(t.checkout,t.checkin)}"rateDetails"in e&&e.rateDetails.length>0&&(t.rateSummary=lm(e.rateDetails),(o=t.adults)!=null||(t.adults=(a=(i=t.rateSummary)==null?void 0:i.min)==null?void 0:a.adults),(p=t.children)!=null||(t.children=(l=(c=t.rateSummary)==null?void 0:c.min)==null?void 0:l.children),(b=t.rooms)!=null||(t.rooms=(D=(h=t.rateSummary)==null?void 0:h.min)==null?void 0:D.rooms));let n=um(e.promoCodes);return n&&(t.promoCodes=n),t}addDatesFromSearch(e){let{checkin:t,checkout:n}=e;if(t&&n)return e;let i=this.history.find(a=>a.type===v.RoomsAndRates);return m.removeEmpty(T(g({},e),{checkin:i==null?void 0:i.checkin,checkout:i==null?void 0:i.checkout}))}addOccupancyFromSearch(e){let{adults:t,children:n}=e;if(t!==void 0&&n!==void 0)return e;let i=this.history.find(a=>a.type===v.RoomsAndRates);return m.removeEmpty(T(g({},e),{adults:i==null?void 0:i.adults,children:i==null?void 0:i.children}))}};s(Ki,"IntegrationDataProcessor");function lm(r){if(!r||r.length===0)return;let e=[...r].sort((n,i)=>{var a,o;return n.price/((a=n.rooms)!=null?a:1)-i.price/((o=i.rooms)!=null?o:1)}),[t]=e;return{count:r.length,currency:t.currency,min:t,max:A.last(e)}}s(lm,"rateSummary");function um(r){if(!r)return;let e=new Set(["undefined","null"]);return r.map(t=>t==null?void 0:t.trim()).filter(Boolean).filter(t=>!e.has(t))}s(um,"validCodes");var Ui=class{constructor(e){this.rules=e}clean(e){return typeof e=="string"?this.rules.reduce((t,n)=>typeof n=="function"?n(t):t.replace(n.search,n.replace),e):Array.isArray(e)?e.map(Ee):e&&typeof e=="object"?Object.keys(e).reduce((t,n)=>{let i=e[n];return t[n]=this.clean(i),t},{}):e}};s(Ui,"Cleaner");var Kl=s(r=>r.trim(),"trim"),dm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`","&nbsp;":" "},pm=s(function(r){let e="(?:"+Object.keys(r).join("|")+")",t=RegExp(e),n=RegExp(e,"g");return function(i){return t.test(i)?i.replace(n,a=>r[a]):i}},"createEscaper"),Ul=pm(dm),fm={search:/{{.*}}/g,replace:""},mm={search:/[,.\/#!$%^*;:{}\[\]()=_`~®©™'\u201C\u201D\u2018\u2019]+/g,replace:""},Bl={search:/\s+/g,replace:" "},ym={search:/\sand\s/gi,replace:" & "},gm={search:/\s*(?:Image|Logo)\s*/gi,replace:""},hm={search:/\s*(?:Uniquement\s+Adultes|Adults?\s*(?:Only)\s*)/gi,replace:""},bm={search:/\sAll\sInclusive\s*/gi,replace:""},wm={search:/\s*[(\[]?Official\s*(?:Hotel)?\s*(?:((?:Web)?Site)|Homepage|booking\s*engine)\s*(?:for|of)?[)\]]?\s*/gi,replace:""},vm={search:/\s&$/,replace:""},xm=new Ui([fm,Ul,mm,Bl,gm,hm,bm,wm,ym,vm,sc,Kl]),$l=new Ui([Ul,Bl,Kl]);function Ee(r){return xm.clean(r)}s(Ee,"clean");function Gl(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>t!=="undefined"&&t!=="null"))}s(Gl,"cleanValues");function Ta(r){if(r.hasOwnProperty("parentElement"))return r.parentElement;let e=r.parentNode;return e instanceof Element?e:e?Ta(e):null}s(Ta,"parentOf");var Sm=/^\s*$/,Dm=s(r=>r instanceof Text&&Sm.test(r.data),"isWhiteSpace"),Pm=["script","style","noscript","a"].map(r=>r.toUpperCase()),Am=s(r=>r&&Pm.indexOf(r.tagName)!==-1,"isUninterestingTag"),Cm=s(r=>!Dm(r)&&!Am(Ta(r)),"isValid");function Bi(r){return r instanceof Element?r:Ta(r)}s(Bi,"elementOf");function Tm(r){let e=Bi(r);if(!!e)return e.getBoundingClientRect()}s(Tm,"clientRectOf");function Om(r,e){let t=e.documentElement.scrollWidth,n=e.documentElement.scrollHeight,i=e.documentElement.scrollLeft,a=e.documentElement.scrollTop;if(t==0||n==0)return;let o=Tm(r);if(!!o)return{x:(o.left+i)/t,y:(o.top+a)/n,width:o.width/t,height:o.height/n}}s(Om,"positionOf");function Rm(r){if(r instanceof Text)return r.data.trim();if(r instanceof Element)return r.getAttribute("aria-label")||r.getAttribute("title")||r.getAttribute("alt")||void 0}s(Rm,"valueOf");function km(r,e=.8){return r.y<e&&r.width>0&&r.height>0}s(km,"isVisibleDefault");function Nl(r,e=km){let t=r.document,n=[],i=t.createNodeIterator(t.documentElement,NodeFilter.SHOW_TEXT,null);for(;;){let c=i.nextNode();if(!c)break;Cm(c)&&n.push(c)}let a=t.querySelectorAll("[aria-label], img[title], img[alt]");for(let c=0;c<a.length;c++)n.push(a[c]);n.sort((c,l)=>{let p=Bi(c).compareDocumentPosition(Bi(l));return p&Node.DOCUMENT_POSITION_PRECEDING?1:p&Node.DOCUMENT_POSITION_FOLLOWING?-1:0});let o=[];for(let c=0;c<n.length;c++){let l=n[c],p=Om(l,t);if(p&&!e(p))continue;let h=Rm(l);typeof h=="string"&&h.split(/[\r\n]/).forEach(D=>{if(D.length>2&&D.length<93){let b=Bi(l);o.push({source:b?b.tagName.toLowerCase():"",type:"Untrusted",identifierType:"Unknown",identifier:Ee(D)})}})}return o}s(Nl,"getDocumentIdentifierSources");var Em=["context.hotelName","Cart.HName","propertyName","ihReservations.ihHotelName","ihHotelName","HName","transactionHotelName","ratequeryHotelName","hpr","strippedPropertyName","property_name","flipto.sessionData.propertyName","HotelName"];function Mm(r){return f(()=>r.event.indexOf("gtm.")===0,!1)}s(Mm,"isGtmEvent");function zl(r){let e=Array.isArray(r)?r:r.dataLayer||[],t=A.safeReverse(e).filter(n=>!Mm(n));return Em.flatMap(n=>A.clean(A.unique(Un(t,...n.split(".")))).map(i=>({source:"dataLayer."+n,identifier:Ee(i),type:"Trusted",identifierType:"HotelName"})))}s(zl,"dataLayerIdentifiers");var $i=class{constructor(e,t,n){this.scope=e;this.property=t;this.seed=n}parentScope(e){let[,...t]=Kn.path(e);return A.find(t,n=>n.hasAttribute(this.scope))}getValue(e){return e.hasAttribute(this.scope)?this.processScope(e):e.getAttribute("content")||e.getAttribute("src")||e.getAttribute("href")||e.getAttribute("data")||e.getAttribute("value")||e.getAttribute("datetime")||e.textContent}processScope(e){return A.from(e.querySelectorAll(`*[${this.property}]`)).filter(t=>this.parentScope(t)===e).reduce((t,n)=>{let i=n.getAttribute(this.property);return i?Bn(t,i,$l.clean(this.getValue(n))):t},this.seed(e))}processDocument(e){return new he(e).querySelectorAll(`*[${this.scope}]`).map(this.processScope.bind(this))}};s($i,"StructuredDataExtractor");var Im=new $i("itemscope","itemprop",r=>{let t=(r.getAttribute("itemtype")||"Unknown").split("/");return Gi("microdata",{"@type":t.pop(),"@context":t.join("/")})}),_m=new $i("typeof","property",r=>Gi("rdfa",{"@type":r.getAttribute("typeof"),"@context":r.getAttribute("vocab")})),Fm={processDocument(r){return A.flatten(new he(r).querySelectorAll('script[type="application/ld+json"]').map(e=>{let n=(e.textContent||"").replace(/[\r\n]/g," ");try{let i=B.parse(n),a=i["@graph"]||i;return Array.isArray(a)?a.map(o=>Gi("json-ld",o)):Gi("json-ld",i)}catch(i){return{"@type":"Error",error:i.toString(),json:n}}}))}};function Gi(r,e){return T(g({},e),{"@format":r})}s(Gi,"addFormat");var lt={processDocument(r){return[...Fm.processDocument(r),...Im.processDocument(r),..._m.processDocument(r)]}};function*Wl(r,e){let t=Array.isArray(r)?r:[r];for(let n of t)if(n["@type"]===e)yield n;else for(let i of Object.values(n))Ks(i)&&(yield*Wl(i,e))}s(Wl,"filter");function Vl(r,e){let[t]=Wl(r,e);return t}s(Vl,"find");function jm(r){if(!!r)return{latitude:Number(r.latitude),longitude:Number(r.longitude)}}s(jm,"convertGeoCoordinates");function Jl(r){let e=jm(Vl(r,"GeoCoordinates")),t=Vl(r,"PostalAddress");return t?m.removeEmpty({geo:e,lines:[t.streetAddress,t.addressLocality].filter(Boolean),region:t.addressRegion,postalCode:t.postalCode,country:t.addressCountry}):m.removeEmpty({geo:e})}s(Jl,"getAddressFromStructuredData");function Yr(r,e){return[...new Ni(Oa,"Trusted",e).from(r),...new Ni(Zl,"Untrusted",e).from(r)].filter(t=>typeof t.identifier!="object")}s(Yr,"getMinimalIdentifiersFromStructuredData");function Yl(r,e){let t=lt.processDocument(r).filter(n=>qm.indexOf(n["@type"])!==-1);return Yr(t,e)}s(Yl,"structuredDataIdentifiers");var Ni=class{constructor(e,t,n=!0){this.orderedStructuredDataTypes=e;this.type=t;this.appendBrand=n}from(e){return A.flatten(this.filterStructuredData(e).map(t=>{let n=(Array.isArray(t.name)?t.name:[t.name]).flatMap(a=>({source:`structuredData[@type='${t["@type"]}'].name`,identifier:Ee(this.addBrand(t.brand,a)),type:this.type,identifierType:Hm(t["@type"])})),i=t.identifier;return i&&n.push({type:this.type,identifier:i,source:`structuredData[@type='${t["@type"]}'].identifier`,identifierType:"HotelCode"}),n}))}addBrand(e,t){return!this.appendBrand||!e||t.indexOf(e)>=0?t:`${e} ${t}`}filterStructuredData(e){return e?e.filter(Boolean).filter(t=>this.orderedStructuredDataTypes.indexOf(t["@type"])>=0).filter(t=>Boolean(t.name)).sort((t,n)=>this.orderedStructuredDataTypes.indexOf(t["@type"])-this.orderedStructuredDataTypes.indexOf(n["@type"])):[]}};s(Ni,"StructuredDataSources");var Oa=["Hotel","LodgingBusiness","BedAndBreakfast"],Zl=["WebSite","LocalBusiness","Organization"],Lm=["HotelRoom","LodgingReservation","Offer","SoftwareApplication"],qm=[...Oa,...Zl,...Lm];function Hm(r){return Oa.includes(r)?"HotelName":"Unknown"}s(Hm,"inferIdentifierTypeFrom");var Ra=k(re()),ir=k(G());function Xl(r){return r.identifier&&r.identifier.length>2&&r.identifier.length<110}s(Xl,"hasSensibleData");var zi=class{constructor(e,t,n=E("hotel-identifiers-scraper")){this.window=e;this.defaultIdentificationStatus=t;this.logger=n}scrape(){return{identifiers:this.identifierSources()}}identifierSources(){let e=[...Yl(this.window.document),...Km(this.window)].filter(Xl);if(this.logger.log("Strict identifiers",e),this.defaultIdentificationStatus===Y.Strict)return e;let t=[...zl(this.window),...Nm(this.window.document),...Wm(this.window.document),...Bm(this.window.document),...Gm(this.window)].filter(Xl);this.logger.log("Common identifiers",t);let n=[...e,...t];if(n.find(i=>Nn.has(i.identifierType)))return n;{let i=Nl(this.window);return this.logger.log("Additional identifiers",i),[...n,...i]}}};s(zi,"HotelIdentifiersScraper");function Zr(r){return r?Kt(r)?!!r.apiKey||!!r.identifiers&&r.identifiers.length>0:Array.isArray(r)?r.reduce((e,t)=>e||Zr(t),!1):r.constructor===Object?Zr(m.values(r)):!1:!1}s(Zr,"hasApiKeyOrIdentifier");function Km(r,e={host:!0}){if(r===void 0)return[];let{scheme:t,host:n,path:i,query:a}=f(()=>r instanceof N?r:typeof r=="string"?new N(r):new N(r.location.href),{});if(t==="about")return[];let o=e.host===!1?[]:[n,...Um(Ql(n))],c=Ql(i),l=Object.values(ce(a,!1)),p=[...o,...c,...l].map(b=>({identifier:b,type:"Untrusted",source:"url",identifierType:"PossibleIdentifier"})),h=(0,Ra.array)(c,(0,ir.windowed)(2,1),(0,ir.map)(([b,C])=>({identifier:[b,C].join("/"),type:"Untrusted",identifierType:"PossibleIdentifier",source:"url"}))),D=(0,Ra.array)(c,(0,ir.windowed)(3,1),(0,ir.map)(([b,C,j])=>({identifier:[b,C,j].join("/"),type:"Untrusted",identifierType:"PossibleIdentifier",source:"url"})));return[...p,...h,...D]}s(Km,"urlIdentifiers");function Ql(r){return r?r.split(/[./]/g).filter(Boolean):[]}s(Ql,"getParts");function Um(r){return r.filter(e=>e.length>3)}s(Um,"cleanHosts");function Bm(r){let{HotelCode:e}=$m(r);return[{identifierType:"PossibleIdentifier",type:"Untrusted",identifier:e,source:"cookie"}]}s(Bm,"cookieIdentifiers");function $m(r){return f(()=>r.cookie.split(";").reduce((e,t)=>{let[n,i]=t.trim().split("=").map(decodeURIComponent);return e[n]=i,e},{}),{})}s($m,"cookieObject");function Gm(r){let e=r.explicitHotelIdentifier;return[{identifierType:"PossibleIdentifier",type:"Untrusted",identifier:e,source:"window"}]}s(Gm,"miscIdentifiers");function Nm(r){return r.title.split(/[|\-:]/).reverse().map(e=>({source:"title",identifier:Ee(e),type:"Untrusted",identifierType:"Unknown"}))}s(Nm,"titles");function zm(r){return Array.from(r.getElementsByTagName("meta")).reduce((e,t)=>{let n=t.getAttribute("name")||t.getAttribute("property")||t.getAttribute("http-equiv"),i=t.getAttribute("content");return n&&(e[n]=i),e},{})}s(zm,"metaObject");function Wm(r){let e=["site-id","og:title","og:site_name","twitter:title"],t=zm(r);return Object.keys(t).filter(n=>e.indexOf(n)!=-1).map(n=>({source:`meta.${n}`,identifier:Ee(t[n]),type:"Untrusted",identifierType:"Unknown"}))}s(Wm,"metaLabels");var Zm=k(De());var eu=k(re()),tu=k(X()),Ze=k(G());function ru(r){return r?r.trim().split(/[-_]/).filter(Boolean).map((e,t)=>t===0?e.toLowerCase():t===1&&e.length===2?e.toUpperCase():e):[]}s(ru,"localeParts");function Vm(r){let[e]=ru(r);return e}s(Vm,"languageOf");function Jm(r){let e=ru(r);if(e.length!==0)return e.join("-")}s(Jm,"cleanLocale");var ka=class{localeOf(e){return[e.documentElement.lang,e.documentElement.getAttribute("xml:lang")].filter(Boolean)}};s(ka,"DocumentLocaleDetector");var Ea=class{localeOf(e){var n;let t=ce((n=e.defaultView)==null?void 0:n.location.search).lang;return typeof t!="string"?[]:[t]}};s(Ea,"QueryStringLocaleDetector");var sr=class{constructor(e){this.tld=e}static create(e){let[,t]=f(()=>e.defaultView.location.hostname.match(sr.pattern))||[];return new sr(t)}enrich(e){let t=f(()=>sr.mapping[this.tld],this.tld);return t&&sr.validate(`${e}-${t}`)||e}static validate(e){try{let[t]=Intl.DateTimeFormat.supportedLocalesOf(e);return t}catch(t){}}},Wi=sr;s(Wi,"CountryCodeTLDEnricher"),Wi.pattern=/\.(\w{2})$/,Wi.mapping={uk:"GB",co:"US"};function Ym(r){if(!r)return!1;if(r==="is"||r==="is-IS")return!0;try{let[e]=Intl.DateTimeFormat.supportedLocalesOf(r);return!!e}catch(e){}return!1}s(Ym,"isLocaleValid");var Vi=class{constructor(){this.detectors=[new Ea,new ka]}static detectLocale(e){let[t]=Vi.instance.localeOf(e);return t}localeOf(e){return(0,eu.array)(this.detectors,(0,Ze.flatMap)(t=>t.localeOf(e)),(0,Ze.map)(Jm),(0,Ze.filter)(Ym),(0,Ze.unique)((0,tu.by)(Vm)))}},Xr=Vi;s(Xr,"SimpleLocaleDetector"),Xr.instance=new Vi;var nu;(function(t){t.rate="rate",t.room="room"})(nu||(nu={}));function Qr(r){return Xr.detectLocale(r.document)}s(Qr,"getLanguageFromDocument");function iu(r){return Qr(r)||r.navigator.language}s(iu,"getLanguageFromDocumentOrBrowser");var Ji=class{constructor(e){this.storage=e}get(e){let t=this.storage.getItem(e);if(t)return B.parseWithDates(t)}set(e,t){return this.storage.setItem(e,JSON.stringify(t)),this}clear(){this.storage.clear()}};s(Ji,"JsonStorage");var Yi=class{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t)}clear(){this.data.clear()}};s(Yi,"InMemoryTypedStorage");var Zi=class{constructor(e){this.stores=e}clear(){this.stores.forEach(e=>f(()=>e.clear()))}get(e){for(let t of this.stores){let n=f(()=>t.get(e));if(n)return n}}set(e,t){return this.stores.forEach(n=>f(()=>n.set(e,t))),this}};s(Zi,"CompositeTypedStorage");function su(r){return y(this,null,function*(){if(typeof crypto!="undefined"&&crypto.subtle&&typeof TextEncoder!="undefined"){let e=new TextEncoder().encode(r),t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}else{let e=5381;for(let t=0;t<r.length;t++)e=(e<<5)+e+r.charCodeAt(t);return e.toString(16)}})}s(su,"digest");var au="triptease.integration.previous-pages";var or=class{constructor(e,t=10){this.storage=e;this.LIMIT=t}static create(e,t){let n=new Zi([f(()=>new Ji(e.sessionStorage)),or.backupStorage]);return new or(n,t)}storedData(){return Qm(this.storage.get(or.storageKey))||{data:[{type:v.Unknown}],count:0}}data(){return this.storedData().data}add(e){return y(this,null,function*(){let{data:t,count:n}=this.storedData(),i=T(g({},ey(e)),{digest:yield Ma(e)});t.unshift(i);let a=je.parse(n+1);return this.storage.set(or.storageKey,{data:ac(t,this.LIMIT),count:a}),a})}last(){let[e]=this.data();return e}find(e){let t=A.find(this.data(),e);if(t){let n=t,{digest:i}=n;return gt(n,["digest"])}}clear(){this.storage.clear()}isSameAsLastGeneration(e){return y(this,null,function*(){let t=this.last();return(t.digest||(yield Ma(t)))===(yield Ma(e))})}},ar=or;s(ar,"IntegrationHistory"),ar.storageKey=au,ar.backupStorage=new Yi;function Ma(r){return y(this,null,function*(){return yield su(B.stringify(Xm(r)))})}s(Ma,"getDigest");function Xm(r){if(!r)return{};let e=g({},r);return e.hasOwnProperty("ratesModified")&&e.ratesModified!=="searchInProgress"&&delete e.ratesModified,delete e.stats,e}s(Xm,"exclude");function Qm(r){if(!!r){if(m.isObject(r)&&"data"in r)return r;if(Array.isArray(r)&&r.every(e=>e.type))return{data:r}}}s(Qm,"adapt");function ey(r){let e=g({},r);return delete e.pii,e}s(ey,"scrubData");var Ia=class{reset(){}summarise(){return{}}timeAsync(e,t){return t()}timeCall(e,t){return t}timeSync(e,t){return t()}};s(Ia,"StubReporter");function ou(){return typeof performance=="object"&&"now"in performance?new _a:new Ia}s(ou,"createReporter");var _a=class{constructor(e=[],t=new ge){this.timings=e;this.timers=t}timeCall(e,t){let n=this;return function(...i){let a=performance.now(),o=t.apply(this,i),c=performance.now()-a;return n.timings.push({name:e,time:c}),o}}timeSync(e,t){let n=performance.now(),i=t(),a=performance.now()-n;return this.timings.push({name:e,time:a}),i}timeAsync(e,t){return y(this,null,function*(){let n=performance.now(),i=yield this.timers.task(t),a=performance.now()-n;return this.timings.push({name:e,time:a}),i})}summarise(){let e=this.timings.reduce((t,{name:n,time:i})=>{let a=t[n]||{count:0,avg:0,sum:0,min:Number.MAX_VALUE,max:Number.MIN_VALUE};return a.count++,a.min=Math.min(a.min,i),a.max=Math.max(a.max,i),a.sum+=i,a.avg+=(i-a.avg)/a.count,t[n]=a,t},{});return this.reset(),e}reset(){this.timings.length=0}};s(_a,"RealReporter");var cu="triptease.onboard.response";function lu(r){return r&&typeof r=="object"&&r.type==="triptease.onboard.response"&&typeof r.correlationId=="string"}s(lu,"isOnboardResponse");var uu=E("messaging"),Xi=class{constructor(e){this.messageHandler=e;this.promises=new Map;e&&e.addListener(t=>{if(lu(t)){let{correlationId:n}=t,i=this.promises.get(n);i&&(uu.debug("Sender matched response",t),i.resolve(t),this.promises.delete(n))}})}handle(e){return y(this,null,function*(){return uu.debug("Sending request",e),this.messageHandler&&this.messageHandler.send(e),new Promise((t,n)=>{this.promises.set(e.correlationId,{resolve:t,reject:n})})})}};s(Xi,"Sender");function du(r){return m.removeEmpty(T(g({},r),{lines:f(()=>r.lines.filter(Boolean).map(String))}))}s(du,"cleanAddress");var Qi=class{constructor(e,t=60*1e3,n=new ge){this.handler=e;this.timeout=t;this.timers=n}handle(e){return y(this,null,function*(){let t=yield Promise.race([this.handler.handle(e),this.timers.delay(this.timeout)]);return t||{type:cu,payload:new Error(`Request ${e.requestType} timed out after ${this.timeout}`),correlationId:e.correlationId}})}};s(Qi,"TimeoutMessageHandler");var yu=k(X());function pu(r){switch(r){case"essential":case"necessary":return"essential";case"functionality":case"personalisation":case"preferences":return"functionality";case"performance":case"statistics":case"analytics":return"performance";case"marketing":case"advertising":return"marketing"}}s(pu,"alias");var es=class{constructor(e){this.window=e}find(){let e=["necessary","preferences","statistics","marketing"].map(t=>f(()=>this.window.Cookiebot.consent[t])?pu(t):void 0).filter(Boolean);if(e.length>0)return{type:"cmp",source:Te.cookieBot,values:e}}};s(es,"CookieBotConsentFinder");var fu=new Set(["all"]);function mu(r){let e=new Set(r.filter(Boolean));return e.size===0||e.has("all")?fu:(e.has("none")&&e.size!==1&&e.delete("none"),e.has("auto")&&e.size!==1&&e.delete("auto"),e)}s(mu,"collapseConsentTypes");var ty=new Map([["ad_storage",["marketing"]],["ad_user_data",["marketing"]],["ad_personalization",["marketing","functionality"]],["analytics_storage",["performance"]],["functionality_storage",["functionality"]],["personalization_storage",["functionality"]],["security_storage",["essential"]]]),ts=class{constructor(e){this.window=e}find(){if(Array.isArray(this.window.dataLayer)){let e=this.window.dataLayer.filter(o=>o[0]==="consent"&&o[1]==="default").reduce((o,c)=>g(g({},o),c[2]),{}),t=this.window.dataLayer.filter(o=>o[0]==="consent"&&o[1]==="update").reduce((o,c)=>g(g({},o),c[2]),e),i=Object.entries(t).filter(([o,c])=>c==="granted").map(([o])=>o).reduce((o,c)=>{let l=ty.get(c)||[];return[...o,...l]},[]),a=A.unique(i);if(a.length>0)return{type:"cmp",source:Te.google,values:a};if(a.length===0&&Object.keys(t).length>0)return{type:"cmp",source:Te.google,values:["none"]}}}};s(ts,"GoogleConsent");var ry={app_basics:"essential",app_preference:"functionality",app_analytics:"performance",app_marketing:"marketing"},rs=class{constructor(e){this.window=e}find(){let{consents:e}=f(()=>this.window.klaro.getManager(),{consents:{}}),t=Object.entries(ry).reduce((n,[i,a])=>e[i]?[...n,a]:n,[]);if(t.length>0)return{type:"cmp",source:Te.klaro,values:t}}};s(rs,"KlaroConsentFinder");var cr=class{constructor(e,t,n){this.window=e;this.key=t;this.parser=n}values(){return this.scripts().map(t=>t.dataset[this.key]).filter(Boolean).flatMap(t=>t.split(/\s*,\s*/g).map(n=>this.parser.parse(n))).filter(t=>!!t)}scripts(){let e=ze.scripts(new he(this.window.document)),t=e.filter(n=>!n.src.includes("partner="));return t.length>0?t:e}};s(cr,"ScriptAttributeFinder");var ns=class{constructor(e){this.lookup=e.reduce((t,n)=>t.set(n,n),new Map)}parse(e){if(!!e)return this.lookup.get(e.toLowerCase().trim())}};s(ns,"AttributeParser");var is=class extends ns{constructor(){super(["none","first-party","third-party","all"])}};s(is,"StorageControlParser");var ss=class extends ns{constructor(){super(["none","essential","functionality","performance","marketing","all","auto"])}};s(ss,"UserConsentParser");var ny=E("consent"),Fa=class extends cr{constructor(e){super(e,"storageConsent",new ss)}find(){let e=this.values();if(e.length>0)return{type:"script",source:"script",values:e}}};s(Fa,"ScriptConsentFinder");var as=class{constructor(e,t=[new Fa(e),new es(e),new rs(e),new ts(e)]){this.finders=t}find(){return this.allConsents.overall}findAll(){return this.allConsents}get allConsents(){let e=this.finders.map(n=>n.find()).filter(Boolean);ny.log("individual consents",e);let t=this.getOverallConsent(e);return[...e,t].reduce((n,i)=>{let a=i.type==="overall"?i.type:i.source;return n[a]=i,n},{})}getOverallConsent(e){let t=e.find(i=>i.type==="script"),n=e.find(i=>i.type==="cmp"&&i.values.length>0);return t?t.values.includes("auto")?n?{type:"overall",source:n.source,values:this.cleaned(n.values)}:{type:"overall",source:Te.defaultAutoConsentMode,values:["none"]}:{type:"overall",source:t.source,values:this.cleaned(t.values)}:{type:"overall",source:Te.defaultNoConsentMode,values:["all"]}}cleaned(e){return Array.from(mu(e))}};s(as,"CompositeConsentFinder");var os=class extends cr{constructor(e){super(e,"storage",new is)}find(){let e=this.values();if(e.length>0)return{values:e}}};s(os,"ScriptStorageFinder");var cs=class{constructor(e){this.window=e}scrape(){var a,o;let t=new as(this.window).findAll(),i=(a=new os(this.window).find())==null?void 0:a.values;return{userConsent:(o=t.overall)==null?void 0:o.values,consent:t,storage:i}}};s(cs,"UserConsentScraper");var lr=class{constructor(e){this.filteredFeatures=lr.getFeatureFilter(e)}static getFeatureFilter(e){let n=qs(e,"triptease-features")||"auto",i=f(()=>{let[a]=ze.find(new Gt(e.document)),{features:o}=ce(a.query);return o},n).toLowerCase();return i==="none"||i==="auto"?i:i.split(",").filter(a=>a!=="none"&&a!=="auto")}mergeFeatures(e,t){let n=f(()=>I.merge(e.features||{},(t==null?void 0:t.features)||{}),{});return this.filteredFeatures==="auto"?n:Object.entries(n).reduce((i,[a,o])=>(i[a]=o,this.filteredFeatures.includes(a.toLowerCase())&&(i[a].enabled=!0),this.filteredFeatures==="none"&&(i[a].enabled=!1),i),{})}};s(lr,"DefaultFeatureLoader");function iy(r,e){return y(this,null,function*(){let t=ue(r).triptease;E("integration-executor").log(`replaceExecutor old:${f(()=>t.integration.script.app().name)} new:${f(()=>e.script.app().name)}`),t.integration&&(yield t.integration.stop()),t.integration=e,yield e.start()})}s(iy,"replaceExecutor");var ls=class{constructor(e,t,n=pi(e),i=E("integration-executor"),a=ue(e).onboard.messageBuilder,o=new Qi(new Xi(Tc(e))),c=new Qn(o),l=Xn(o),p=ar.create(e),h=new Ki(e,p),D=new lr(e),b=ou()){this.window=e;this.script=t;this.events=n;this.logger=i;this.messageBuilder=a;this.sender=o;this.kernel=c;this.kernelHost=l;this.history=p;this.processor=h;this.featureLoader=D;this.reporter=b;this.integrate=s(()=>y(this,null,function*(){this.logger.log("Begin integration executor");let e=yield this.reporter.timeAsync("page-scraping",()=>this.findPageData()),t=yield this.reporter.timeAsync("hotel-identification",()=>this.addIdentificationAndAdditionalData(e));t.language||(t.language=iu(this.window));let n=this.processor.process(t);this.logger.log("Processed integration data",n);let i=this.lastPath!==this.window.location.pathname,a=!(yield this.history.isSameAsLastGeneration(n)),o=this.kernelMode;this.kernelMode===zn.ApplicationHost&&(yield this.updateKernelMode());let c=o!==this.kernelMode;if(i||a||c){this.logger.log("Detected change - updating triptease.config",{pathHasChanged:i,integrationDataHasChanged:a,kernelModeHasChanged:c}),this.window.triptease.config=n;let l=yield this.history.add(n);yield this.sendToKernelHost(yield this.messageBuilder.buildMessage({type:"triptease.config",payload:T(g({},oy(n)),{diagnostics:T(g({},n==null?void 0:n.diagnostics),{pathHasChanged:i,integrationDataHasChanged:a,kernelModeHasChanged:c})}),context:{app:this.script.app(),tab:{eventCounter:l},kernelMode:this.kernelMode}})),this.lastPath=this.window.location.pathname}else this.logger.log("No change - doing nothing");return n}),"integrate");iy(e,this)}start(){return y(this,null,function*(){this.logger.log(`IntegrationExecutor.start ${this.script.app().name}`),yield this.events.listen(this.integrate),this.kernelMode=yield this.kernelHost.getKernelMode(),this.logger.log(`IntegrationExecutor's kernel is in ${this.kernelMode} mode`,{href:this.window.location.href})})}stop(){return y(this,null,function*(){this.logger.log(`IntegrationExecutor.stop ${this.script.app().name}`),this.events.removeListener(this.integrate)})}updateKernelMode(e){return y(this,null,function*(){this.kernelMode=e!=null?e:yield this.kernelHost.getKernelMode();let t=e?`updateKernelMode received ${e}`:`updateKernelMode set kernel mode to ${this.kernelMode}`;this.logger.log(t,{href:this.window.location.href})})}addIdentificationAndAdditionalData(e){return y(this,null,function*(){var h,D,b,C;let t=yield this.script.scrape(),n=g({},e),i=yield new ei([new cs(this.window),new fi(this.window),new We(this.window),{scrape:()=>t},new mi(n)],this.logger).scrape();if(i.apiKey==="none")return this.logger.log('Skipping identification as apiKey is set to "none" - Only interested in page data for ARI feed'),n;if(i=T(g({},i),{type:sy(n.type,t.type),integrationName:this.script.app().name}),this.logger.log("all identifiers",i),Us(n)&&Array.isArray(n.rateDetails)){n.rateDetails=yield this.processArrayIdentifiers(n.rateDetails,i);let j=this.getUniqueApiKey(n.rateDetails);j&&(i=T(g({},ja(i,{identifiers:(D=(h=n==null?void 0:n.rateDetails)==null?void 0:h[0])==null?void 0:D.identifiers})),{apiKey:j}))}if(Bs(n)&&Array.isArray(n.reservations)){n.reservations=yield this.processArrayIdentifiers(n.reservations,i);let j=this.getUniqueApiKey(n.reservations);j&&(i=T(g({},ja(i,{identifiers:(C=(b=n==null?void 0:n.reservations)==null?void 0:b[0])==null?void 0:C.identifiers})),{apiKey:j}))}this.logger.log("getting client config");let a=yield this.kernel.generateClientConfig(i);this.logger.log("got client config",a);let o=cy(i,n,a,this.logger);if(o!==Y.Disabled){let j=new zi(this.window,o).scrape();this.logger.log("default identifiers",j),i=ja(i,j),this.logger.log("merged identifiers",i.identifiers)}let c=yield this.kernel.generateConfig(i);this.logger.log("generatedConfig",c);let l=this.featureLoader.mergeFeatures(n,c);this.logger.log("mergeFeatures",l);let p=gu([i,n]);return m.removeEmpty(T(g(g(g({},i),n),c),{features:l,address:du(yield i.address),defaultIdentification:o,identifiers:this.filterOutPossibleUserData(i),diagnostics:p}))})}filterOutPossibleUserData(e){return f(()=>e.identifiers.filter(t=>Nn.has(t.identifierType)))}getUniqueApiKey(e){let t=A.unique(e.map(n=>n.apiKey));if(t.length===1)return t[0]}processArrayIdentifiers(e,t){return y(this,null,function*(){return yield Promise.all(e.map(n=>y(this,null,function*(){return Kt(n)?g(g({},n),yield this.kernel.generateConfig(g(T(g({},t),{apiKey:void 0}),ti(n)))):n})))})}sendToKernelHost(e){return y(this,null,function*(){this.logger.log("Sending triptease.config message to local kernel host",e);let t=T(g({},e),{context:T(g({},e.context),{stats:this.reporter.summarise()})});this.kernelHost.processConfig(t)})}findPageData(){return y(this,null,function*(){let e=[];for(let n of this.script.pages)try{let i=Cc(yield n.integrationData());if(i&&(i.pageClass=i.pageClass||oc(n)),Sc(i))return this.logger.log("Found valid page",i),i;e.push(i)}catch(i){this.logger.debug("Page didn't parse due to error",i)}this.logger.log("No valid pages found - finding partial page from",e);let t=gu(e);return Pc(e)||m.removeEmpty({type:v.Unknown,diagnostics:t})})}};s(ls,"IntegrationExecutor");function gu(r){if(!!Array.isArray(r))return r.reduce((e,t)=>g(g({},t==null?void 0:t.diagnostics),e),{})}s(gu,"mergeDiagnostics");function sy(...r){return A.first([...r,v.Unknown].filter(Boolean).sort((0,yu.by)(wc)))}s(sy,"calculatePageType");function ay(r,e){var t,n;return!!((n=(t=r.features)==null?void 0:t[e])==null?void 0:n.enabled)}s(ay,"isFeatureEnabled");function oy(r){if(!r)return;let e=!ay(r,"CartAbandonment"),t=g({},r);return e&&delete t.pii,t}s(oy,"scrubPII");function ja(r,e){var t,n;return T(g(g({},r),e),{identifiers:[...(t=r.identifiers)!=null?t:[],...(n=e.identifiers)!=null?n:[]]})}s(ja,"mergeIdentifiers");function cy(r,e,t,n=new Cr){return r.defaultIdentification===Y.Disabled?(n.log("Default hotel identification set to disabled as requested by integration"),Y.Disabled):r.defaultIdentification===Y.Enabled?(n.log("Default hotel identification set to enabled as requested by integration"),Y.Enabled):(t==null?void 0:t.defaultIdentification)&&t.defaultIdentification!==Y.NotConfigured?(n.log(`Default hotel identification set to ${t.defaultIdentification.toLowerCase()} as requested by client config`),t.defaultIdentification):Zr(r)||Zr(e)?(n.log("Default hotel identification set to disabled as page data already contains identifiers or apiKey"),Y.Disabled):(n.log("Default hotel identification set to enabled as it is not configured"),Y.Enabled)}s(cy,"getDefaultHotelIdentificationStatus");var hu=k(wi());var ur=class{static get(){return f(()=>{let e="9195.136023";return e?"v"+e:"latest"})}};s(ur,"Version");var us=class{constructor(e,t=new hu.SystemClock){this.window=e;this.clock=t}app(){return{name:f(()=>ue(this.window).onboard.integrationName.canonical),version:ur.get()}}address(){return{}}scrape(){return m.removeEmpty({address:f(()=>this.address())})}getDefaultIdentification(e){return e.length>0?Y.Disabled:Y.NotConfigured}};s(us,"Integration");var wu=k(De());var bu="triptease-managed";var vu=k(De());var ds=class{constructor(e,t=new he(e.document),n=(0,vu.numberParser)("."),i=(0,wu.parser)("en","yyyy-MM-dd")){this.window=e;this.selectorApi=t;this.numParser=n;this.dateParser=i}integrationData(){let e=this.selectorApi.querySelectorAll(`.price-fighter-widget:not(.${bu})`);if(e.length===0)return;let t=e.map(i=>this.cleanData(i)),n=this.createSetsFrom(t);return n.hasUnique("apiKey")||n.hasUnique("propertyCode")?this.singleHotel(t[0]):this.multipleHotels(t,n)}cleanData(e){let C=ly(e.dataset),{clientkey:t,property:n,token:i,hotelkey:a,directPrice:o,roomRate:c,roomType:l}=C,p=gt(C,["clientkey","property","token","hotelkey","directPrice","roomRate","roomType"]),h=a||i;return g({clientKey:t||(n?h:void 0),apiKey:n?void 0:h,propertyCode:n,price:o,roomName:l,rateName:c},p)}createSetsFrom(e){return e.reduce((t,n)=>m.entries(n).reduce((i,[a,o])=>i.add(a,o),t),new La)}singleHotel(e){let t=e.propertyCode?[{identifier:e.propertyCode,identifierType:"HotelCode",type:"Trusted",source:"pf-div"}]:[],n=e.loggedIn==="true"?"untrusted":"none",i=m.removeEmpty({price:f(()=>this.numParser.parse(e.price)),currency:e.currency,rateName:e.rateName,roomName:e.roomName});return m.removeEmpty({type:v.RoomsAndRates,pageClass:"SelfIntegratedRoomsAndRates",language:e.language,clientKey:e.clientKey,apiKey:e.apiKey,identifiers:t,adults:f(()=>this.numParser.parse(e.adults)),children:f(()=>this.numParser.parse(e.children)),rooms:f(()=>this.numParser.parse(e.rooms)),checkin:f(()=>this.dateParser.parse(e.checkin)),checkout:f(()=>this.dateParser.parse(e.checkout)),total:this.getTotal(e.total),layout:xu(e.layout),ratesModified:n,rateDetails:!!i.price&&!!i.currency?[i]:[]})}getTotal(e){let t=f(()=>e.toLowerCase());if(t==="true")return!0;if(t==="false")return!1}multipleHotels(e,t){let n=t.get("total"),i=e.reduce((a,o)=>a||o.loggedIn==="true",!1)?"untrusted":"none";return m.removeEmpty({type:v.RoomsAndRates,pageClass:"SelfIntegratedRoomsAndRates",language:t.get("language"),clientKey:f(()=>t.get("clientKey")),adults:f(()=>this.numParser.parse(t.get("adults"))),children:f(()=>this.numParser.parse(t.get("children"))),rooms:f(()=>this.numParser.parse(t.get("rooms"))),checkin:f(()=>this.dateParser.parse(t.get("checkin"))),checkout:f(()=>this.dateParser.parse(t.get("checkout"))),total:this.getTotal(n),layout:xu(t.get("layout")),ratesModified:i,rateDetails:e.map(a=>{let o=a.propertyCode?[{identifier:a.propertyCode,type:"Trusted",identifierType:"HotelCode"}]:[];return m.removeEmpty({clientKey:a.clientKey,apiKey:a.apiKey,identifiers:o,price:f(()=>this.numParser.parse(a.price)),currency:a.currency,rateName:a.rateName,roomName:a.roomName})})})}};s(ds,"SelfIntegratedRoomsAndRates");function ly(r){return Object.keys(r).reduce((e,t)=>{let n=t.replace(/^pf/,"");return T(g({},e),{[`${n[0].toLowerCase()}${n.slice(1)}`]:r[t]})},{})}s(ly,"cleanNames");function xu(r){if(!!r)return r.toLowerCase().replace("-","")}s(xu,"cleanLayout");var La=class{constructor(){this.sets={}}hasUnique(e){let t=this.sets[e];return t?t.size===1:!1}add(e,t){return t?(this.sets[e]=this.sets[e]||new Set,this.sets[e].add(t),this):this}get(e){let t=this.sets[e];if(t.size===1)return A.from(t)[0]}};s(La,"Sets");var Su=k(De());var ps=class{constructor(e,t=new he(e.document),n=(0,Su.numberParser)(".")){this.window=e;this.selectorApi=t;this.parser=n}integrationData(){let e=this.selectorApi.querySelectorAll('script[src*="triptease"]').map(t=>new N(t.src));return m.removeEmpty(e.reduce((t,n)=>{let i=Gl(ce(n.query,!1));return{type:v.Confirmation,price:i.bookingValue?this.parser.parse(i.bookingValue):t.price,currency:i.bookingCurrency?i.bookingCurrency:t.currency,reference:i.bookingReference?i.bookingReference:t.reference,basePrice:i.basePrice?this.parser.parse(i.basePrice):t.basePrice,checkin:i.checkin?new Date(i.checkin):t.checkin,checkout:i.checkout?new Date(i.checkout):t.checkout}},{}))}};s(ps,"SelfIntegratedConfirmation");var Hu=k(oe());var Ku=k(De());var Lu=k(oe()),qu=k(za());var nn=class{constructor(e){this.locale=e}getMoneyParser(e,t){return(0,qu.implicitMoneyParser)({currency:t,locale:e})}convert(e){return e.flatMap(t=>{var o,c,l,p;let n=(o=t.priceSpecification)==null?void 0:o.priceCurrency,i=this.getMoneyParser(this.locale,n),[a]=i.parseAll(String((c=t.priceSpecification)==null?void 0:c.price));return a?[m.removeEmpty({price:a.amount,currency:n,rateName:t.name,rateCode:t.identifier,roomName:(l=t.itemOffered)==null?void 0:l.name,roomCode:(p=t.itemOffered)==null?void 0:p.identifier,identifiers:Yr([t==null?void 0:t.offeredBy])})]:[]})}};s(nn,"OffersToRateDetailsConverter"),_e([Lu.cache],nn.prototype,"getMoneyParser",1);var fr=class{constructor(e){this.window=e;this.dateParser=(0,Ku.parser)("en","yyyy-MM-dd")}getOfferConverter(e){return new nn(e)}find(e){return{search:A.find(e,t=>t["@type"]==="LodgingSearch"),offers:e.filter(t=>t["@type"]==="Offer"),offerCatalog:A.find(e,t=>t["@type"]==="OfferCatalog")}}convert({search:e,offers:t,offerCatalog:n}){let i=Qr(this.window),a=this.getOfferConverter(i).convert(t);return m.removeEmpty({type:v.RoomsAndRates,language:i,pageClass:"StructuredDataRoomsAndRates",checkin:this.parseDate(e==null?void 0:e.checkinTime),checkout:this.parseDate(e==null?void 0:e.checkoutTime),adults:f(()=>je.parse(e.numAdults),2),children:f(()=>je.parse(e.numChildren),0),rooms:f(()=>je.parse(e.numRooms),1),rateDetails:a,ratesModified:f(()=>je.parse(n.numberOfItems)===0)?"noAvailability":void 0,total:f(()=>this.getTotal(t[0].priceSpecification.unitText)),priceComponents:f(()=>Ry(t[0].priceSpecification)),promoCodes:(Array.isArray(e==null?void 0:e.offerCode)?e==null?void 0:e.offerCode:[e==null?void 0:e.offerCode]).filter(Boolean)})}getTotal(e){let t=f(()=>e.toLowerCase().trim());if(t==="total")return!0;if(t==="nightly")return!1}parseDate(e){return f(()=>this.dateParser.parseAll(e.split("T")[0])[0])}};s(fr,"StructuredDataRoomsAndRates"),_e([Hu.cache],fr.prototype,"getOfferConverter",1);function Ry(r){if(!Array.isArray(r==null?void 0:r.priceComponentType))return[];let e=[it.Room,it.Fee,it.Tax].map(t=>r.priceComponentType.find(n=>n===t)).filter(Boolean);return e[0]!==it.Room?[]:e.length===r.priceComponentType.length?e:[]}s(Ry,"getStructuredDataPriceComponents");var Wa=k(Os()),bs=k(G());var Uu=k(re()),Bu=k(oe()),$u=k(za());var Gu=k(De());var mr=class{constructor(e){this.window=e;this.dateParser=(0,Gu.parser)("en","yyyy-MM-dd");this.lookup={["http://schema.org/ReservationConfirmed"]:"confirmed",["http://schema.org/ReservationCancelled"]:"cancelled",["http://schema.org/ReservationPending"]:"pending",["https://schema.org/ReservationConfirmed"]:"confirmed",["https://schema.org/ReservationCancelled"]:"cancelled",["https://schema.org/ReservationPending"]:"pending"}}getMoneyParser(e,t){return(0,$u.implicitMoneyParser)({currency:t,locale:e})}find(e){return e.filter(t=>hc(t)&&this.lookup[t.reservationStatus])}convert(e){let t=Qr(this.window),n=(0,Uu.array)(e,(0,bs.map)(p=>{let h=p.priceCurrency,D=this.getMoneyParser(t,h);return m.removeEmpty({reference:p.reservationId,price:f(()=>D.parse(String(p.totalPrice)).amount),basePrice:f(()=>D.parse(String(p.basePrice)).amount),currency:h,reservationStatus:this.lookup[p.reservationStatus],identifiers:Yr([p==null?void 0:p.provider])})}),(0,bs.unique)((p,h)=>I.same(p,h)?0:1)),[i]=e,{checkinTime:a,checkoutTime:o,priceCurrency:c,offerCode:l}=i;return m.removeEmpty({type:v.Confirmation,language:t,pageClass:"StructuredDataConfirmation",checkin:this.parseDate(a),checkout:this.parseDate(o),currency:c,reference:n.map(p=>p.reference).sort().join(","),price:n.map(p=>p.price).reduce(Wa.sum),basePrice:n.map(p=>p.basePrice).reduce(Wa.sum),reservations:n,promoCodes:[l!=null?l:[]].flat()})}parseDate(e){return f(()=>this.dateParser.parseAll(e.split("T")[0])[0])}};s(mr,"StructuredDataConfirmation"),_e([Bu.cache],mr.prototype,"getMoneyParser",1);var Qe=class{constructor(e,t=[new mr(e),new fr(e)]){this.window=e;this.converters=t;this.logger=E("structured-data")}static confirmation(e){return new Qe(e,[new mr(e)])}static roomsAndRates(e){return new Qe(e,[new fr(e)])}integrationData(){let e=lt.processDocument(this.window.document);for(let t of this.converters)try{let n=t.find(e);if(!n)continue;return t.convert(n)}catch(n){}this.logger.log(`${this.converters.length} converters were unable to process structured data`,{structuredData:e})}};s(Qe,"StructuredDataPage");var ky=ur.get();function Ey(r){return`https://onboard.triptease.io/integrations/${ky}/${r}.js`}s(Ey,"onboard");function sn(r){return typeof r!="string"?"":r.split(/[^A-Za-z0-9-]/)[0].replace(/-/g,"").toLowerCase()}s(sn,"cleanName");var u=class{constructor(e){this.name=e;if(!/[A-Za-z0-9]/.test(e))throw new Error("Only alpha numeric allowed");u.Lookup.set(sn(e),this)}static values(){return Array.from(u.Lookup.values())}static parse(e){let t=u.Lookup.get(sn(e));if(!t)throw new Error(`Invalid booking engine name: ${e}`);return t}toString(){return this.name}get canonical(){return sn(this.name)}get folder(){return this.isSelfIntegration()?u.Default.folder:L.kebabCase(this.name)}get script(){return Ey(this.folder)}isSelfIntegration(){return u.SelfIntegration.has(this)}},d=u;s(d,"IntegrationName"),d.Lookup=new Map,d.AboveProperty=new u("AboveProperty"),d.AfricaAlbida=new u("AfricaAlbida"),d.Alaric=new u("Alaric"),d.Ascott=new u("Ascott"),d.ASIWebRes=new u("ASIWebRes"),d.AtlantisORS=new u("AtlantisORS"),d.Auberge=new u("Auberge"),d.AvailPro=new u("AvailPro"),d.Avvio=new u("Avvio"),d.Ayana=new u("Ayana"),d.AZDS=new u("AZDS"),d.BestWesternFrance=new u("BestWesternFrance"),d.BestWesternItaly=new u("BestWesternItaly"),d.BestWesternUk=new u("BestWesternUk"),d.Betsy=new u("Betsy"),d.Bloom=new u("Bloom"),d.BookAssist=new u("BookAssist"),d.BookEasy=new u("BookEasy"),d.Bookolo=new u("Bookolo"),d.BookOnlineNow=new u("BookOnlineNow"),d.BookVisit=new u("BookVisit"),d.Booking=new u("Booking"),d.Booking2Hotels=new u("Booking2Hotels"),d.BookingExpert=new u("BookingExpert"),d.BrochnerHotels=new u("BrochnerHotels"),d.BusyRooms=new u("BusyRooms"),d.BWHHotelGroup=new u("BWHHotelGroup"),d.CenterHotels=new u("CenterHotels"),d.CityExpress=new u("CityExpress"),d.Clink=new u("Clink"),d.Clock=new u("Clock"),d.CloudBeds=new u("CloudBeds"),d.Cocotel=new u("Cocotel"),d.CompuRez=new u("CompuRez"),d.Comwell=new u("Comwell"),d.ConstanceHotels=new u("ConstanceHotels"),d.Default=new u("Default"),d.DerqueBooking=new u("DerqueBooking"),d.DeutscheHospitality=new u("DeutscheHospitality"),d.Dingus=new u("Dingus"),d.Dirs21=new u("Dirs21"),d.DoyleCollection=new u("DoyleCollection"),d.EasyBooking=new u("EasyBooking"),d.EasyConsulting=new u("EasyConsulting"),d.Erez=new u("Erez"),d.EGds=new u("EGds"),d.Evancy=new u("Evancy"),d.Exely=new u("Exely"),d.Everly=new u("Everly"),d.ExtendedStayAmerica=new u("ExtendedStayAmerica"),d.Ezee=new u("Ezee"),d.FastBooking=new u("FastBooking"),d.Firmdale=new u("Firmdale"),d.FourSeasons=new u("FourSeasons"),d.FrontDeskMaster=new u("FrontDeskMaster"),d.FullertonHotels=new u("FullertonHotels"),d.Furama=new u("Furama"),d.GemHotels=new u("GemHotels"),d.Generic=new u("Generic"),d.GlenEagles=new u("GlenEagles"),d.GuestCentric=new u("GuestCentric"),d.GuestDesk=new u("GuestDesk"),d.GuestLine=new u("GuestLine"),d.GuestPro=new u("GuestPro"),d.Guild=new u("Guild"),d.HamiltonIsland=new u("HamiltonIsland"),d.HamiltonIslandHolidayHomes=new u("HamiltonIslandHolidayHomes"),d.HandPickedHotels=new u("HandPickedHotels"),d.Hart=new u("Hart"),d.HHotels=new u("HHotels"),d.HighLevelSoftware=new u("HighLevelSoftware"),d.Hipotels=new u("Hipotels"),d.HiUsa=new u("HiUsa"),d.Hoteliers=new u("Hoteliers"),d.HoteliersGuru=new u("HoteliersGuru"),d.HotelKeyApp=new u("HotelKeyApp"),d.HotelNetSolutions=new u("HotelNetSolutions"),d.HotelPartner=new u("HotelPartner"),d.Hotetec=new u("Hotetec"),d.Hotusa=new u("Hotusa"),d.Hoxton=new u("Hoxton"),d.HspRez=new u("HspRez"),d.HtiSystems=new u("HtiSystems"),d.Hyatt=new u("Hyatt"),d.GHS=new u("GHS"),d.GuestRez=new u("GuestRez"),d.Iberostar=new u("Iberostar"),d.Infotera=new u("Infotera"),d.Inkaterra=new u("Inkaterra"),d.InnQuest=new u("InnQuest"),d.InnRoad=new u("InnRoad"),d.InnStyle=new u("InnStyle"),d.Inntopia=new u("Inntopia"),d.Iperbooking=new u("Iperbooking"),d.IRM=new u("IRM"),d.JazHotels=new u("JazHotels"),d.Journey=new u("Journey"),d.Kasa=new u("Kasa"),d.KeaHotels=new u("KeaHotels"),d.Kempinski=new u("Kempinski"),d.Kerzner=new u("Kerzner"),d.LatourHotelsAndResorts=new u("LatourHotelsAndResorts"),d.LHW=new u("LHW"),d.LifeHouse=new u("LifeHouse"),d.Loews=new u("Loews"),d.Lotte=new u("Lotte"),d.LumaHotels=new u("LumaHotels"),d.Luxscapia=new u("Luxscapia"),d.McDreams=new u("McDreams"),d.Mews=new u("Mews"),d.MgmResorts=new u("MgmResorts"),d.MillenniumHotels=new u("MillenniumHotels"),d.MinorHotels=new u("MinorHotels"),d.Mirai=new u("Mirai"),d.MotelOne=new u("MotelOne"),d.Namastay=new u("Namastay"),d.NativePlaces=new u("NativePlaces"),d.NeoBookings=new u("NeoBookings"),d.NetAffinity=new u("NetAffinity"),d.Newbook=new u("Newbook"),d.NHHotels=new u("NHHotels"),d.OKU=new u("OKU"),d.OmegaHotelManagement=new u("OmegaHotelManagement"),d.Omnibees=new u("Omnibees"),d.OneHotels=new u("OneHotels"),d.Opera=new u("Opera"),d.OpenHotel=new u("OpenHotel"),d.P3=new u("P3"),d.PalaceResorts=new u("PalaceResorts"),d.PanHospitality=new u("PanHospitality"),d.Paraty=new u("Paraty"),d.Pegasus=new u("Pegasus"),d.Pelican=new u("Pelican"),d.Phobs=new u("Phobs"),d.Planet=new u("Planet"),d.PointAHotels=new u("PointAHotels"),d.Prestige=new u("Prestige"),d.ProfitRoom=new u("ProfitRoom"),d.Protel=new u("Protel"),d.PursuitCollection=new u("PursuitCollection"),d.RedPlanet=new u("RedPlanet"),d.RegalHotels=new u("RegalHotels"),d.ReserveHotel=new u("ReserveHotel"),d.ReserveOnline=new u("ReserveOnline"),d.ReservationResources=new u("ReservationResources"),d.Reservit=new u("Reservit"),d.Reseze=new u("Reseze"),d.ResNexus=new u("ResNexus"),d.ResOnTheWeb=new u("ResOnTheWeb"),d.Retargeting=new u("Retargeting"),d.Revenatium=new u("Revenatium"),d.Reztrip=new u("Reztrip"),d.RGuest=new u("RGuest"),d.RMSCloud=new u("RMSCloud"),d.Roiback=new u("Roiback"),d.RoomKey=new u("RoomKey"),d.RoomMaster=new u("RoomMaster"),d.RoomSome=new u("RoomSome"),d.RoomStay=new u("RoomStay"),d.SandsVegas=new u("SandsVegas"),d.Sandrix=new u("Sandrix"),d.Sbe=new u("Sbe"),d.SeamillHydro=new u("SeamillHydro"),d.Seekda=new u("Seekda"),d.Selfbook=new u("Selfbook"),d.Shr=new u("Shr"),d.SimpleBooking=new u("SimpleBooking"),d.SiteMinder=new u("SiteMinder"),d.Skipper=new u("Skipper"),d.Skyware=new u("Skyware"),d.Staah=new u("Staah"),d.StationCasinos=new u("StationCasinos"),d.Stayntouch=new u("Stayntouch"),d.Sweett=new u("Sweett"),d.Synxis=new u("Synxis"),d.SysHotelOnline=new u("SysHotelOnline"),d.Taj=new u("Taj"),d.ThinkReservations=new u("ThinkReservations"),d.Travelanium=new u("Travelanium"),d.TravelClick=new u("TravelClick"),d.Uibscrs=new u("Uibscrs"),d.Up=new u("Up"),d.VacationMarbella=new u("VacationMarbella"),d.Valamar=new u("Valamar"),d.VerticalBooking=new u("VerticalBooking"),d.Viato=new u("Viato"),d.Vinpearl=new u("Vinpearl"),d.WebRezPro=new u("WebRezPro"),d.WestCordHotels=new u("WestCordHotels"),d.Witbooking=new u("Witbooking"),d.Youngs=new u("Youngs"),d.Zafiro=new u("Zafiro"),d.SelfIntegration=new Set([u.Dirs21,u.HtiSystems,u.ExtendedStayAmerica]);function My(r){return f(()=>{let i=r.find(a=>a["@type"]==="SoftwareApplication"),{name:e,version:t}=i,n=gt(i,["name","version"]);return g({name:sn(e),version:String(t)},m.filter(n,a=>!L.startWith(a,"@")))},{})}s(My,"getAppNameAndVersion");var ws=class extends us{constructor(){super(...arguments);this.pages=[Qe.confirmation(this.window),new ps(this.window),Qe.roomsAndRates(this.window),new ds(this.window)]}app(){let e=lt.processDocument(this.window.document),t=My(e);return t.name?t:super.app()}address(){let e=lt.processDocument(this.window.document);return Jl(e)}};s(ws,"Default");new ls(window,new ws(window));})();
